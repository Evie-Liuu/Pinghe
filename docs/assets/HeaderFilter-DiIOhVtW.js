import{r as n,C as k,c as b,G as F,a as o,o as a,b as t,d as c,F as V,p as H,e as f,P as L,t as G,v as x,w as O}from"./index-BMdFWD3I.js";import{s as D}from"./SDGs_goal-BU-5yG0n.js";const R={class:"text-lg flex items-center w-full"},U={class:"flex items-center gap-4"},B=["innerHTML"],j={key:0,class:"absolute z-10 mt-2 w-56 bg-white rounded-md shadow-lg max-h-60 overflow-y-auto text-black"},z={key:0,class:"p-2 border-t border-gray-200"},E={class:"inline-flex items-center w-full cursor-pointer"},N=["value"],P=["innerHTML"],_={key:0,class:"absolute z-10 mt-2 w-48 bg-white rounded-md shadow-lg text-black"},q={key:0,class:"flex gap-2 items-center text-black bg-white/50 p-2 rounded-lg"},A={class:"relative ml-auto"},Q={__name:"HeaderFilter",emits:["update:filters"],setup(I,{emit:C}){const s=n([]),g=n(!1),i=n("all"),d=n(!1),v=n(""),p=n(""),u=n(""),w=n(null),y=n(null);k(w,()=>{g.value=!1}),k(y,()=>{d.value=!1});const h=C,T=b(()=>D.filter(r=>r.value!==0)),$=b(()=>{if(s.value.length===0)return"SDGs";if(s.value.length>1)return`SDGs (${s.value.length})`;const r=D.find(e=>e.value===s.value[0]);return r?r.title.replace(/<br\s*\/?>/g," "):"SDGs"}),S=b(()=>{switch(i.value){case"day":return"最近一天";case"week":return"最近一周";case"custom":return"自訂範圍";default:return"發布時間"}});function m(r){i.value=r,d.value=!1,r!=="custom"&&(v.value="",p.value="")}return F([s,i,v,p,u],()=>{h("update:filters",{sdgs:s.value,time:i.value,startDate:v.value,endDate:p.value,keyword:u.value})},{deep:!0,immediate:!0}),(r,e)=>(a(),o("div",R,[t("div",U,[t("div",{class:"relative",ref_key:"sdgDropdownRef",ref:w},[t("button",{onClick:e[0]||(e[0]=l=>g.value=!g.value),class:"p-1 px-4 rounded-full bg-gray-500 text-white min-w-[150px] text-left flex justify-between items-center gap-2"},[t("span",{innerHTML:$.value,class:"truncate"},null,8,B),e[12]||(e[12]=t("span",null,"▾",-1))]),g.value?(a(),o("div",j,[s.value.length>0?(a(),o("div",z,[t("button",{onClick:e[1]||(e[1]=l=>s.value=[]),class:"text-sm text-blue-600 hover:underline w-full text-center"}," 清除選擇 ")])):c("",!0),(a(!0),o(V,null,H(T.value,l=>(a(),o("div",{key:l.value,class:"p-2 hover:bg-gray-100"},[t("label",E,[f(t("input",{type:"checkbox",value:l.value,"onUpdate:modelValue":e[2]||(e[2]=M=>s.value=M),class:"h-5 w-5 text-green-600 rounded focus:ring-green-500 border-gray-300"},null,8,N),[[L,s.value]]),t("span",{class:"ml-3 text-gray-700",innerHTML:l.title},null,8,P)])]))),128))])):c("",!0)],512),t("div",{class:"relative",ref_key:"timeDropdownRef",ref:y},[t("button",{onClick:e[3]||(e[3]=l=>d.value=!d.value),class:"p-1 px-4 rounded-full bg-gray-500 text-white min-w-[150px] text-left flex justify-between items-center gap-2"},[t("span",null,G(S.value),1),e[13]||(e[13]=t("span",null,"▾",-1))]),d.value?(a(),o("div",_,[t("div",{onClick:e[4]||(e[4]=l=>m("all")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 全部時間 "),t("div",{onClick:e[5]||(e[5]=l=>m("day")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 最近一天 "),t("div",{onClick:e[6]||(e[6]=l=>m("week")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 最近一周 "),t("div",{onClick:e[7]||(e[7]=l=>m("custom")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 自訂範圍 ")])):c("",!0)],512),i.value==="custom"?(a(),o("div",q,[f(t("input",{type:"date","onUpdate:modelValue":e[8]||(e[8]=l=>v.value=l),class:"p-1 border rounded-md"},null,512),[[x,v.value]]),e[14]||(e[14]=t("span",{class:"text-gray-600"},"至",-1)),f(t("input",{type:"date","onUpdate:modelValue":e[9]||(e[9]=l=>p.value=l),class:"p-1 border rounded-md"},null,512),[[x,p.value]])])):c("",!0)]),t("div",A,[f(t("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=l=>u.value=l),placeholder:"搜尋標題...",class:"p-1 px-4 rounded-full border border-black/50 placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-orange-400 focus:border-orange-400"},null,512),[[x,u.value]]),u.value.length?(a(),o("a",{key:0,href:"#",class:"absolute right-2 top-1.5",onClick:e[11]||(e[11]=O(l=>u.value="",["prevent"]))},[...e[15]||(e[15]=[t("i",{class:"fa-solid fa-xmark text-black/50"},null,-1)])])):c("",!0)])]))}};export{Q as _};
