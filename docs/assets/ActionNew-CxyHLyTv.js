import{B as vn,r as ge,c as J,C as bn,k as wn,D as yn,a as x,o as E,b as c,f as Bt,g as bt,h as ve,i as Tn,d as W,e as ce,v as fe,n as Te,F as Me,p as Fe,t as Y,j as _n,s as $t}from"./index-Bk2b4twl.js";import{C as Dn}from"./CJKSub-B3xCTqWM.js";import{u as xn,i as En,a as Sn,b as Cn}from"./index-DoPRvqEV.js";import{u as On}from"./useDateTime-C5bsu7z3.js";import{s as In}from"./SDGs_goal-BU-5yG0n.js";/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function zt(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),t.push.apply(t,n)}return t}function he(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zt(Object(t),!0).forEach(function(n){kn(o,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):zt(Object(t)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(t,n))})}return o}function ot(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ot=function(e){return typeof e}:ot=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(o)}function kn(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function we(){return we=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},we.apply(this,arguments)}function An(o,e){if(o==null)return{};var t={},n=Object.keys(o),i,r;for(r=0;r<n.length;r++)i=n[r],!(e.indexOf(i)>=0)&&(t[i]=o[i]);return t}function Nn(o,e){if(o==null)return{};var t=An(o,e),n,i;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);for(i=0;i<r.length;i++)n=r[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(o,n)&&(t[n]=o[n])}return t}var Pn="1.15.6";function be(o){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(o)}var ye=be(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ze=be(/Edge/i),Ht=be(/firefox/i),Ve=be(/safari/i)&&!be(/chrome/i)&&!be(/android/i),Nt=be(/iP(ad|od|hone)/i),Kt=be(/chrome/i)&&be(/android/i),Zt={capture:!1,passive:!1};function S(o,e,t){o.addEventListener(e,t,!ye&&Zt)}function D(o,e,t){o.removeEventListener(e,t,!ye&&Zt)}function st(o,e){if(e){if(e[0]===">"&&(e=e.substring(1)),o)try{if(o.matches)return o.matches(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e)}catch{return!1}return!1}}function Jt(o){return o.host&&o!==document&&o.host.nodeType?o.host:o.parentNode}function re(o,e,t,n){if(o){t=t||document;do{if(e!=null&&(e[0]===">"?o.parentNode===t&&st(o,e):st(o,e))||n&&o===t)return o;if(o===t)break}while(o=Jt(o))}return null}var Lt=/\s+/g;function Q(o,e,t){if(o&&e)if(o.classList)o.classList[t?"add":"remove"](e);else{var n=(" "+o.className+" ").replace(Lt," ").replace(" "+e+" "," ");o.className=(n+(t?" "+e:"")).replace(Lt," ")}}function v(o,e,t){var n=o&&o.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(o,""):o.currentStyle&&(t=o.currentStyle),e===void 0?t:t[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=t+(typeof t=="string"?"":"px")}}function $e(o,e){var t="";if(typeof o=="string")t=o;else do{var n=v(o,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!e&&(o=o.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function Qt(o,e,t){if(o){var n=o.getElementsByTagName(e),i=0,r=n.length;if(t)for(;i<r;i++)t(n[i],i);return n}return[]}function me(){var o=document.scrollingElement;return o||document.documentElement}function R(o,e,t,n,i){if(!(!o.getBoundingClientRect&&o!==window)){var r,l,a,u,d,g,p;if(o!==window&&o.parentNode&&o!==me()?(r=o.getBoundingClientRect(),l=r.top,a=r.left,u=r.bottom,d=r.right,g=r.height,p=r.width):(l=0,a=0,u=window.innerHeight,d=window.innerWidth,g=window.innerHeight,p=window.innerWidth),(e||t)&&o!==window&&(i=i||o.parentNode,!ye))do if(i&&i.getBoundingClientRect&&(v(i,"transform")!=="none"||t&&v(i,"position")!=="static")){var y=i.getBoundingClientRect();l-=y.top+parseInt(v(i,"border-top-width")),a-=y.left+parseInt(v(i,"border-left-width")),u=l+r.height,d=a+r.width;break}while(i=i.parentNode);if(n&&o!==window){var I=$e(i||o),_=I&&I.a,O=I&&I.d;I&&(l/=O,a/=_,p/=_,g/=O,u=l+g,d=a+p)}return{top:l,left:a,bottom:u,right:d,width:p,height:g}}}function Gt(o,e,t){for(var n=xe(o,!0),i=R(o)[e];n;){var r=R(n)[t],l=void 0;if(l=i>=r,!l)return n;if(n===me())break;n=xe(n,!1)}return!1}function ze(o,e,t,n){for(var i=0,r=0,l=o.children;r<l.length;){if(l[r].style.display!=="none"&&l[r]!==b.ghost&&(n||l[r]!==b.dragged)&&re(l[r],t.draggable,o,!1)){if(i===e)return l[r];i++}r++}return null}function Pt(o,e){for(var t=o.lastElementChild;t&&(t===b.ghost||v(t,"display")==="none"||e&&!st(t,e));)t=t.previousElementSibling;return t||null}function te(o,e){var t=0;if(!o||!o.parentNode)return-1;for(;o=o.previousElementSibling;)o.nodeName.toUpperCase()!=="TEMPLATE"&&o!==b.clone&&(!e||st(o,e))&&t++;return t}function Wt(o){var e=0,t=0,n=me();if(o)do{var i=$e(o),r=i.a,l=i.d;e+=o.scrollLeft*r,t+=o.scrollTop*l}while(o!==n&&(o=o.parentNode));return[e,t]}function Mn(o,e){for(var t in o)if(o.hasOwnProperty(t)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===o[t][n])return Number(t)}return-1}function xe(o,e){if(!o||!o.getBoundingClientRect)return me();var t=o,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=v(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return me();if(n||e)return t;n=!0}}while(t=t.parentNode);return me()}function Fn(o,e){if(o&&e)for(var t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);return o}function wt(o,e){return Math.round(o.top)===Math.round(e.top)&&Math.round(o.left)===Math.round(e.left)&&Math.round(o.height)===Math.round(e.height)&&Math.round(o.width)===Math.round(e.width)}var je;function en(o,e){return function(){if(!je){var t=arguments,n=this;t.length===1?o.call(n,t[0]):o.apply(n,t),je=setTimeout(function(){je=void 0},e)}}}function Rn(){clearTimeout(je),je=void 0}function tn(o,e,t){o.scrollLeft+=e,o.scrollTop+=t}function nn(o){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(o).cloneNode(!0):t?t(o).clone(!0)[0]:o.cloneNode(!0)}function on(o,e,t){var n={};return Array.from(o.children).forEach(function(i){var r,l,a,u;if(!(!re(i,e.draggable,o,!1)||i.animated||i===t)){var d=R(i);n.left=Math.min((r=n.left)!==null&&r!==void 0?r:1/0,d.left),n.top=Math.min((l=n.top)!==null&&l!==void 0?l:1/0,d.top),n.right=Math.max((a=n.right)!==null&&a!==void 0?a:-1/0,d.right),n.bottom=Math.max((u=n.bottom)!==null&&u!==void 0?u:-1/0,d.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var K="Sortable"+new Date().getTime();function Xn(){var o=[],e;return{captureAnimationState:function(){if(o=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(i){if(!(v(i,"display")==="none"||i===b.ghost)){o.push({target:i,rect:R(i)});var r=he({},o[o.length-1].rect);if(i.thisAnimationDuration){var l=$e(i,!0);l&&(r.top-=l.f,r.left-=l.e)}i.fromRect=r}})}},addAnimationState:function(n){o.push(n)},removeAnimationState:function(n){o.splice(Mn(o,{target:n}),1)},animateAll:function(n){var i=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var r=!1,l=0;o.forEach(function(a){var u=0,d=a.target,g=d.fromRect,p=R(d),y=d.prevFromRect,I=d.prevToRect,_=a.rect,O=$e(d,!0);O&&(p.top-=O.f,p.left-=O.e),d.toRect=p,d.thisAnimationDuration&&wt(y,p)&&!wt(g,p)&&(_.top-p.top)/(_.left-p.left)===(g.top-p.top)/(g.left-p.left)&&(u=Bn(_,y,I,i.options)),wt(p,g)||(d.prevFromRect=g,d.prevToRect=p,u||(u=i.options.animation),i.animate(d,_,p,u)),u&&(r=!0,l=Math.max(l,u),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},u),d.thisAnimationDuration=u)}),clearTimeout(e),r?e=setTimeout(function(){typeof n=="function"&&n()},l):typeof n=="function"&&n(),o=[]},animate:function(n,i,r,l){if(l){v(n,"transition",""),v(n,"transform","");var a=$e(this.el),u=a&&a.a,d=a&&a.d,g=(i.left-r.left)/(u||1),p=(i.top-r.top)/(d||1);n.animatingX=!!g,n.animatingY=!!p,v(n,"transform","translate3d("+g+"px,"+p+"px,0)"),this.forRepaintDummy=Yn(n),v(n,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),v(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){v(n,"transition",""),v(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},l)}}}}function Yn(o){return o.offsetWidth}function Bn(o,e,t,n){return Math.sqrt(Math.pow(e.top-o.top,2)+Math.pow(e.left-o.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*n.animation}var Re=[],yt={initializeByDefault:!0},Je={mount:function(e){for(var t in yt)yt.hasOwnProperty(t)&&!(t in e)&&(e[t]=yt[t]);Re.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Re.push(e)},pluginEvent:function(e,t,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var r=e+"Global";Re.forEach(function(l){t[l.pluginName]&&(t[l.pluginName][r]&&t[l.pluginName][r](he({sortable:t},n)),t.options[l.pluginName]&&t[l.pluginName][e]&&t[l.pluginName][e](he({sortable:t},n)))})},initializePlugins:function(e,t,n,i){Re.forEach(function(a){var u=a.pluginName;if(!(!e.options[u]&&!a.initializeByDefault)){var d=new a(e,t,e.options);d.sortable=e,d.options=e.options,e[u]=d,we(n,d.defaults)}});for(var r in e.options)if(e.options.hasOwnProperty(r)){var l=this.modifyOption(e,r,e.options[r]);typeof l<"u"&&(e.options[r]=l)}},getEventProperties:function(e,t){var n={};return Re.forEach(function(i){typeof i.eventProperties=="function"&&we(n,i.eventProperties.call(t[i.pluginName],e))}),n},modifyOption:function(e,t,n){var i;return Re.forEach(function(r){e[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[t]=="function"&&(i=r.optionListeners[t].call(e[r.pluginName],n))}),i}};function $n(o){var e=o.sortable,t=o.rootEl,n=o.name,i=o.targetEl,r=o.cloneEl,l=o.toEl,a=o.fromEl,u=o.oldIndex,d=o.newIndex,g=o.oldDraggableIndex,p=o.newDraggableIndex,y=o.originalEvent,I=o.putSortable,_=o.extraEventProperties;if(e=e||t&&t[K],!!e){var O,Z=e.options,ne="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!ye&&!Ze?O=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(O=document.createEvent("Event"),O.initEvent(n,!0,!0)),O.to=l||t,O.from=a||t,O.item=i||t,O.clone=r,O.oldIndex=u,O.newIndex=d,O.oldDraggableIndex=g,O.newDraggableIndex=p,O.originalEvent=y,O.pullMode=I?I.lastPutMode:void 0;var M=he(he({},_),Je.getEventProperties(n,e));for(var j in M)O[j]=M[j];t&&t.dispatchEvent(O),Z[ne]&&Z[ne].call(e,O)}}var zn=["evt"],q=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.evt,r=Nn(n,zn);Je.pluginEvent.bind(b)(e,t,he({dragEl:m,parentEl:N,ghostEl:w,rootEl:k,nextEl:Ne,lastDownEl:it,cloneEl:A,cloneHidden:De,dragStarted:Le,putSortable:$,activeSortable:b.active,originalEvent:i,oldIndex:Be,oldDraggableIndex:Ue,newIndex:ee,newDraggableIndex:_e,hideGhostForTarget:sn,unhideGhostForTarget:un,cloneNowHidden:function(){De=!0},cloneNowShown:function(){De=!1},dispatchSortableEvent:function(a){V({sortable:t,name:a,originalEvent:i})}},r))};function V(o){$n(he({putSortable:$,cloneEl:A,targetEl:m,rootEl:k,oldIndex:Be,oldDraggableIndex:Ue,newIndex:ee,newDraggableIndex:_e},o))}var m,N,w,k,Ne,it,A,De,Be,ee,Ue,_e,Qe,$,Ye=!1,ut=!1,dt=[],ke,ie,Tt,_t,Vt,jt,Le,Xe,qe,Ke=!1,et=!1,rt,z,Dt=[],Ot=!1,ct=[],mt=typeof document<"u",tt=Nt,Ut=Ze||ye?"cssFloat":"float",Hn=mt&&!Kt&&!Nt&&"draggable"in document.createElement("div"),rn=(function(){if(mt){if(ye)return!1;var o=document.createElement("x");return o.style.cssText="pointer-events:auto",o.style.pointerEvents==="auto"}})(),an=function(e,t){var n=v(e),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=ze(e,0,t),l=ze(e,1,t),a=r&&v(r),u=l&&v(l),d=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+R(r).width,g=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+R(l).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&a.float&&a.float!=="none"){var p=a.float==="left"?"left":"right";return l&&(u.clear==="both"||u.clear===p)?"vertical":"horizontal"}return r&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||d>=i&&n[Ut]==="none"||l&&n[Ut]==="none"&&d+g>i)?"vertical":"horizontal"},Ln=function(e,t,n){var i=n?e.left:e.top,r=n?e.right:e.bottom,l=n?e.width:e.height,a=n?t.left:t.top,u=n?t.right:t.bottom,d=n?t.width:t.height;return i===a||r===u||i+l/2===a+d/2},Gn=function(e,t){var n;return dt.some(function(i){var r=i[K].options.emptyInsertThreshold;if(!(!r||Pt(i))){var l=R(i),a=e>=l.left-r&&e<=l.right+r,u=t>=l.top-r&&t<=l.bottom+r;if(a&&u)return n=i}}),n},ln=function(e){function t(r,l){return function(a,u,d,g){var p=a.options.group.name&&u.options.group.name&&a.options.group.name===u.options.group.name;if(r==null&&(l||p))return!0;if(r==null||r===!1)return!1;if(l&&r==="clone")return r;if(typeof r=="function")return t(r(a,u,d,g),l)(a,u,d,g);var y=(l?a:u).options.group.name;return r===!0||typeof r=="string"&&r===y||r.join&&r.indexOf(y)>-1}}var n={},i=e.group;(!i||ot(i)!="object")&&(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n},sn=function(){!rn&&w&&v(w,"display","none")},un=function(){!rn&&w&&v(w,"display","")};mt&&!Kt&&document.addEventListener("click",function(o){if(ut)return o.preventDefault(),o.stopPropagation&&o.stopPropagation(),o.stopImmediatePropagation&&o.stopImmediatePropagation(),ut=!1,!1},!0);var Ae=function(e){if(m){e=e.touches?e.touches[0]:e;var t=Gn(e.clientX,e.clientY);if(t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[K]._onDragOver(n)}}},Wn=function(e){m&&m.parentNode[K]._isOutsideThisEl(e.target)};function b(o,e){if(!(o&&o.nodeType&&o.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(o));this.el=o,this.options=e=we({},e),o[K]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(o.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return an(o,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,a){l.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:b.supportPointer!==!1&&"PointerEvent"in window&&(!Ve||Nt),emptyInsertThreshold:5};Je.initializePlugins(this,o,t);for(var n in t)!(n in e)&&(e[n]=t[n]);ln(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:Hn,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?S(o,"pointerdown",this._onTapStart):(S(o,"mousedown",this._onTapStart),S(o,"touchstart",this._onTapStart)),this.nativeDraggable&&(S(o,"dragover",this),S(o,"dragenter",this)),dt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),we(this,Xn())}b.prototype={constructor:b,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Xe=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,m):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,i=this.options,r=i.preventOnFilter,l=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,u=(a||e).target,d=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,g=i.filter;if(Qn(n),!m&&!(/mousedown|pointerdown/.test(l)&&e.button!==0||i.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&Ve&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=re(u,i.draggable,n,!1),!(u&&u.animated)&&it!==u)){if(Be=te(u),Ue=te(u,i.draggable),typeof g=="function"){if(g.call(this,e,u,this)){V({sortable:t,rootEl:d,name:"filter",targetEl:u,toEl:n,fromEl:n}),q("filter",t,{evt:e}),r&&e.preventDefault();return}}else if(g&&(g=g.split(",").some(function(p){if(p=re(d,p.trim(),n,!1),p)return V({sortable:t,rootEl:p,name:"filter",targetEl:u,fromEl:n,toEl:n}),q("filter",t,{evt:e}),!0}),g)){r&&e.preventDefault();return}i.handle&&!re(d,i.handle,n,!1)||this._prepareDragStart(e,a,u)}}},_prepareDragStart:function(e,t,n){var i=this,r=i.el,l=i.options,a=r.ownerDocument,u;if(n&&!m&&n.parentNode===r){var d=R(n);if(k=r,m=n,N=m.parentNode,Ne=m.nextSibling,it=n,Qe=l.group,b.dragged=m,ke={target:m,clientX:(t||e).clientX,clientY:(t||e).clientY},Vt=ke.clientX-d.left,jt=ke.clientY-d.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,m.style["will-change"]="all",u=function(){if(q("delayEnded",i,{evt:e}),b.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Ht&&i.nativeDraggable&&(m.draggable=!0),i._triggerDragStart(e,t),V({sortable:i,name:"choose",originalEvent:e}),Q(m,l.chosenClass,!0)},l.ignore.split(",").forEach(function(g){Qt(m,g.trim(),xt)}),S(a,"dragover",Ae),S(a,"mousemove",Ae),S(a,"touchmove",Ae),l.supportPointer?(S(a,"pointerup",i._onDrop),!this.nativeDraggable&&S(a,"pointercancel",i._onDrop)):(S(a,"mouseup",i._onDrop),S(a,"touchend",i._onDrop),S(a,"touchcancel",i._onDrop)),Ht&&this.nativeDraggable&&(this.options.touchStartThreshold=4,m.draggable=!0),q("delayStart",this,{evt:e}),l.delay&&(!l.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Ze||ye))){if(b.eventCanceled){this._onDrop();return}l.supportPointer?(S(a,"pointerup",i._disableDelayedDrag),S(a,"pointercancel",i._disableDelayedDrag)):(S(a,"mouseup",i._disableDelayedDrag),S(a,"touchend",i._disableDelayedDrag),S(a,"touchcancel",i._disableDelayedDrag)),S(a,"mousemove",i._delayedDragTouchMoveHandler),S(a,"touchmove",i._delayedDragTouchMoveHandler),l.supportPointer&&S(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(u,l.delay)}else u()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){m&&xt(m),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;D(e,"mouseup",this._disableDelayedDrag),D(e,"touchend",this._disableDelayedDrag),D(e,"touchcancel",this._disableDelayedDrag),D(e,"pointerup",this._disableDelayedDrag),D(e,"pointercancel",this._disableDelayedDrag),D(e,"mousemove",this._delayedDragTouchMoveHandler),D(e,"touchmove",this._delayedDragTouchMoveHandler),D(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?S(document,"pointermove",this._onTouchMove):t?S(document,"touchmove",this._onTouchMove):S(document,"mousemove",this._onTouchMove):(S(m,"dragend",this),S(k,"dragstart",this._onDragStart));try{document.selection?at(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Ye=!1,k&&m){q("dragStarted",this,{evt:t}),this.nativeDraggable&&S(document,"dragover",Wn);var n=this.options;!e&&Q(m,n.dragClass,!1),Q(m,n.ghostClass,!0),b.active=this,e&&this._appendGhost(),V({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ie){this._lastX=ie.clientX,this._lastY=ie.clientY,sn();for(var e=document.elementFromPoint(ie.clientX,ie.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ie.clientX,ie.clientY),e!==t);)t=e;if(m.parentNode[K]._isOutsideThisEl(e),t)do{if(t[K]){var n=void 0;if(n=t[K]._onDragOver({clientX:ie.clientX,clientY:ie.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=Jt(t));un()}},_onTouchMove:function(e){if(ke){var t=this.options,n=t.fallbackTolerance,i=t.fallbackOffset,r=e.touches?e.touches[0]:e,l=w&&$e(w,!0),a=w&&l&&l.a,u=w&&l&&l.d,d=tt&&z&&Wt(z),g=(r.clientX-ke.clientX+i.x)/(a||1)+(d?d[0]-Dt[0]:0)/(a||1),p=(r.clientY-ke.clientY+i.y)/(u||1)+(d?d[1]-Dt[1]:0)/(u||1);if(!b.active&&!Ye){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(w){l?(l.e+=g-(Tt||0),l.f+=p-(_t||0)):l={a:1,b:0,c:0,d:1,e:g,f:p};var y="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");v(w,"webkitTransform",y),v(w,"mozTransform",y),v(w,"msTransform",y),v(w,"transform",y),Tt=g,_t=p,ie=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!w){var e=this.options.fallbackOnBody?document.body:k,t=R(m,!0,tt,!0,e),n=this.options;if(tt){for(z=e;v(z,"position")==="static"&&v(z,"transform")==="none"&&z!==document;)z=z.parentNode;z!==document.body&&z!==document.documentElement?(z===document&&(z=me()),t.top+=z.scrollTop,t.left+=z.scrollLeft):z=me(),Dt=Wt(z)}w=m.cloneNode(!0),Q(w,n.ghostClass,!1),Q(w,n.fallbackClass,!0),Q(w,n.dragClass,!0),v(w,"transition",""),v(w,"transform",""),v(w,"box-sizing","border-box"),v(w,"margin",0),v(w,"top",t.top),v(w,"left",t.left),v(w,"width",t.width),v(w,"height",t.height),v(w,"opacity","0.8"),v(w,"position",tt?"absolute":"fixed"),v(w,"zIndex","100000"),v(w,"pointerEvents","none"),b.ghost=w,e.appendChild(w),v(w,"transform-origin",Vt/parseInt(w.style.width)*100+"% "+jt/parseInt(w.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,i=e.dataTransfer,r=n.options;if(q("dragStart",this,{evt:e}),b.eventCanceled){this._onDrop();return}q("setupClone",this),b.eventCanceled||(A=nn(m),A.removeAttribute("id"),A.draggable=!1,A.style["will-change"]="",this._hideClone(),Q(A,this.options.chosenClass,!1),b.clone=A),n.cloneId=at(function(){q("clone",n),!b.eventCanceled&&(n.options.removeCloneOnHide||k.insertBefore(A,m),n._hideClone(),V({sortable:n,name:"clone"}))}),!t&&Q(m,r.dragClass,!0),t?(ut=!0,n._loopId=setInterval(n._emulateDragOver,50)):(D(document,"mouseup",n._onDrop),D(document,"touchend",n._onDrop),D(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(n,i,m)),S(document,"drop",n),v(m,"transform","translateZ(0)")),Ye=!0,n._dragStartId=at(n._dragStarted.bind(n,t,e)),S(document,"selectstart",n),Le=!0,window.getSelection().removeAllRanges(),Ve&&v(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,i,r,l,a=this.options,u=a.group,d=b.active,g=Qe===u,p=a.sort,y=$||d,I,_=this,O=!1;if(Ot)return;function Z(Ie,ht){q(Ie,_,he({evt:e,isOwner:g,axis:I?"vertical":"horizontal",revert:l,dragRect:i,targetRect:r,canSort:p,fromSortable:y,target:n,completed:M,onMove:function(Pe,pt){return nt(k,t,m,i,Pe,R(Pe),e,pt)},changed:j},ht))}function ne(){Z("dragOverAnimationCapture"),_.captureAnimationState(),_!==y&&y.captureAnimationState()}function M(Ie){return Z("dragOverCompleted",{insertion:Ie}),Ie&&(g?d._hideClone():d._showClone(_),_!==y&&(Q(m,$?$.options.ghostClass:d.options.ghostClass,!1),Q(m,a.ghostClass,!0)),$!==_&&_!==b.active?$=_:_===b.active&&$&&($=null),y===_&&(_._ignoreWhileAnimating=n),_.animateAll(function(){Z("dragOverAnimationComplete"),_._ignoreWhileAnimating=null}),_!==y&&(y.animateAll(),y._ignoreWhileAnimating=null)),(n===m&&!m.animated||n===t&&!n.animated)&&(Xe=null),!a.dragoverBubble&&!e.rootEl&&n!==document&&(m.parentNode[K]._isOutsideThisEl(e.target),!Ie&&Ae(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),O=!0}function j(){ee=te(m),_e=te(m,a.draggable),V({sortable:_,name:"change",toEl:t,newIndex:ee,newDraggableIndex:_e,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=re(n,a.draggable,t,!0),Z("dragOver"),b.eventCanceled)return O;if(m.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||_._ignoreWhileAnimating===n)return M(!1);if(ut=!1,d&&!a.disabled&&(g?p||(l=N!==k):$===this||(this.lastPutMode=Qe.checkPull(this,d,m,e))&&u.checkPut(this,d,m,e))){if(I=this._getDirection(e,n)==="vertical",i=R(m),Z("dragOverValid"),b.eventCanceled)return O;if(l)return N=k,ne(),this._hideClone(),Z("revert"),b.eventCanceled||(Ne?k.insertBefore(m,Ne):k.appendChild(m)),M(!0);var X=Pt(t,a.draggable);if(!X||qn(e,I,this)&&!X.animated){if(X===m)return M(!1);if(X&&t===e.target&&(n=X),n&&(r=R(n)),nt(k,t,m,i,n,r,e,!!n)!==!1)return ne(),X&&X.nextSibling?t.insertBefore(m,X.nextSibling):t.appendChild(m),N=t,j(),M(!0)}else if(X&&Un(e,I,this)){var ae=ze(t,0,a,!0);if(ae===m)return M(!1);if(n=ae,r=R(n),nt(k,t,m,i,n,r,e,!1)!==!1)return ne(),t.insertBefore(m,ae),N=t,j(),M(!0)}else if(n.parentNode===t){r=R(n);var B=0,le,Ee=m.parentNode!==t,H=!Ln(m.animated&&m.toRect||i,n.animated&&n.toRect||r,I),Se=I?"top":"left",se=Gt(n,"top","top")||Gt(m,"top","top"),Ce=se?se.scrollTop:void 0;Xe!==n&&(le=r[Se],Ke=!1,et=!H&&a.invertSwap||Ee),B=Kn(e,n,r,I,H?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,et,Xe===n);var oe;if(B!==0){var ue=te(m);do ue-=B,oe=N.children[ue];while(oe&&(v(oe,"display")==="none"||oe===w))}if(B===0||oe===n)return M(!1);Xe=n,qe=B;var Oe=n.nextElementSibling,de=!1;de=B===1;var U=nt(k,t,m,i,n,r,e,de);if(U!==!1)return(U===1||U===-1)&&(de=U===1),Ot=!0,setTimeout(jn,30),ne(),de&&!Oe?t.appendChild(m):n.parentNode.insertBefore(m,de?Oe:n),se&&tn(se,0,Ce-se.scrollTop),N=m.parentNode,le!==void 0&&!et&&(rt=Math.abs(le-R(n)[Se])),j(),M(!0)}if(t.contains(m))return M(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){D(document,"mousemove",this._onTouchMove),D(document,"touchmove",this._onTouchMove),D(document,"pointermove",this._onTouchMove),D(document,"dragover",Ae),D(document,"mousemove",Ae),D(document,"touchmove",Ae)},_offUpEvents:function(){var e=this.el.ownerDocument;D(e,"mouseup",this._onDrop),D(e,"touchend",this._onDrop),D(e,"pointerup",this._onDrop),D(e,"pointercancel",this._onDrop),D(e,"touchcancel",this._onDrop),D(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(ee=te(m),_e=te(m,n.draggable),q("drop",this,{evt:e}),N=m&&m.parentNode,ee=te(m),_e=te(m,n.draggable),b.eventCanceled){this._nulling();return}Ye=!1,et=!1,Ke=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),It(this.cloneId),It(this._dragStartId),this.nativeDraggable&&(D(document,"drop",this),D(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ve&&v(document.body,"user-select",""),v(m,"transform",""),e&&(Le&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),w&&w.parentNode&&w.parentNode.removeChild(w),(k===N||$&&$.lastPutMode!=="clone")&&A&&A.parentNode&&A.parentNode.removeChild(A),m&&(this.nativeDraggable&&D(m,"dragend",this),xt(m),m.style["will-change"]="",Le&&!Ye&&Q(m,$?$.options.ghostClass:this.options.ghostClass,!1),Q(m,this.options.chosenClass,!1),V({sortable:this,name:"unchoose",toEl:N,newIndex:null,newDraggableIndex:null,originalEvent:e}),k!==N?(ee>=0&&(V({rootEl:N,name:"add",toEl:N,fromEl:k,originalEvent:e}),V({sortable:this,name:"remove",toEl:N,originalEvent:e}),V({rootEl:N,name:"sort",toEl:N,fromEl:k,originalEvent:e}),V({sortable:this,name:"sort",toEl:N,originalEvent:e})),$&&$.save()):ee!==Be&&ee>=0&&(V({sortable:this,name:"update",toEl:N,originalEvent:e}),V({sortable:this,name:"sort",toEl:N,originalEvent:e})),b.active&&((ee==null||ee===-1)&&(ee=Be,_e=Ue),V({sortable:this,name:"end",toEl:N,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){q("nulling",this),k=m=N=w=Ne=A=it=De=ke=ie=Le=ee=_e=Be=Ue=Xe=qe=$=Qe=b.dragged=b.ghost=b.clone=b.active=null,ct.forEach(function(e){e.checked=!0}),ct.length=Tt=_t=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":m&&(this._onDragOver(e),Vn(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,i=0,r=n.length,l=this.options;i<r;i++)t=n[i],re(t,l.draggable,this.el,!1)&&e.push(t.getAttribute(l.dataIdAttr)||Jn(t));return e},sort:function(e,t){var n={},i=this.el;this.toArray().forEach(function(r,l){var a=i.children[l];re(a,this.options.draggable,i,!1)&&(n[r]=a)},this),t&&this.captureAnimationState(),e.forEach(function(r){n[r]&&(i.removeChild(n[r]),i.appendChild(n[r]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return re(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var i=Je.modifyOption(this,e,t);typeof i<"u"?n[e]=i:n[e]=t,e==="group"&&ln(n)},destroy:function(){q("destroy",this);var e=this.el;e[K]=null,D(e,"mousedown",this._onTapStart),D(e,"touchstart",this._onTapStart),D(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(D(e,"dragover",this),D(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),dt.splice(dt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!De){if(q("hideClone",this),b.eventCanceled)return;v(A,"display","none"),this.options.removeCloneOnHide&&A.parentNode&&A.parentNode.removeChild(A),De=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(De){if(q("showClone",this),b.eventCanceled)return;m.parentNode==k&&!this.options.group.revertClone?k.insertBefore(A,m):Ne?k.insertBefore(A,Ne):k.appendChild(A),this.options.group.revertClone&&this.animate(m,A),v(A,"display",""),De=!1}}};function Vn(o){o.dataTransfer&&(o.dataTransfer.dropEffect="move"),o.cancelable&&o.preventDefault()}function nt(o,e,t,n,i,r,l,a){var u,d=o[K],g=d.options.onMove,p;return window.CustomEvent&&!ye&&!Ze?u=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(u=document.createEvent("Event"),u.initEvent("move",!0,!0)),u.to=e,u.from=o,u.dragged=t,u.draggedRect=n,u.related=i||e,u.relatedRect=r||R(e),u.willInsertAfter=a,u.originalEvent=l,o.dispatchEvent(u),g&&(p=g.call(d,u,l)),p}function xt(o){o.draggable=!1}function jn(){Ot=!1}function Un(o,e,t){var n=R(ze(t.el,0,t.options,!0)),i=on(t.el,t.options,w),r=10;return e?o.clientX<i.left-r||o.clientY<n.top&&o.clientX<n.right:o.clientY<i.top-r||o.clientY<n.bottom&&o.clientX<n.left}function qn(o,e,t){var n=R(Pt(t.el,t.options.draggable)),i=on(t.el,t.options,w),r=10;return e?o.clientX>i.right+r||o.clientY>n.bottom&&o.clientX>n.left:o.clientY>i.bottom+r||o.clientX>n.right&&o.clientY>n.top}function Kn(o,e,t,n,i,r,l,a){var u=n?o.clientY:o.clientX,d=n?t.height:t.width,g=n?t.top:t.left,p=n?t.bottom:t.right,y=!1;if(!l){if(a&&rt<d*i){if(!Ke&&(qe===1?u>g+d*r/2:u<p-d*r/2)&&(Ke=!0),Ke)y=!0;else if(qe===1?u<g+rt:u>p-rt)return-qe}else if(u>g+d*(1-i)/2&&u<p-d*(1-i)/2)return Zn(e)}return y=y||l,y&&(u<g+d*r/2||u>p-d*r/2)?u>g+d/2?1:-1:0}function Zn(o){return te(m)<te(o)?1:-1}function Jn(o){for(var e=o.tagName+o.className+o.src+o.href+o.textContent,t=e.length,n=0;t--;)n+=e.charCodeAt(t);return n.toString(36)}function Qn(o){ct.length=0;for(var e=o.getElementsByTagName("input"),t=e.length;t--;){var n=e[t];n.checked&&ct.push(n)}}function at(o){return setTimeout(o,0)}function It(o){return clearTimeout(o)}mt&&S(document,"touchmove",function(o){(b.active||Ye)&&o.cancelable&&o.preventDefault()});b.utils={on:S,off:D,css:v,find:Qt,is:function(e,t){return!!re(e,t,e,!1)},extend:Fn,throttle:en,closest:re,toggleClass:Q,clone:nn,index:te,nextTick:at,cancelNextTick:It,detectDirection:an,getChild:ze,expando:K};b.get=function(o){return o[K]};b.mount=function(){for(var o=arguments.length,e=new Array(o),t=0;t<o;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(b.utils=he(he({},b.utils),n.utils)),Je.mount(n)})};b.create=function(o,e){return new b(o,e)};b.version=Pn;var F=[],Ge,kt,At=!1,Et,St,ft,We;function eo(){function o(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return o.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?S(document,"dragover",this._handleAutoScroll):this.options.supportPointer?S(document,"pointermove",this._handleFallbackAutoScroll):n.touches?S(document,"touchmove",this._handleFallbackAutoScroll):S(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?D(document,"dragover",this._handleAutoScroll):(D(document,"pointermove",this._handleFallbackAutoScroll),D(document,"touchmove",this._handleFallbackAutoScroll),D(document,"mousemove",this._handleFallbackAutoScroll)),qt(),lt(),Rn()},nulling:function(){ft=kt=Ge=At=We=Et=St=null,F.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var i=this,r=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(r,l);if(ft=t,n||this.options.forceAutoScrollFallback||Ze||ye||Ve){Ct(t,this.options,a,n);var u=xe(a,!0);At&&(!We||r!==Et||l!==St)&&(We&&qt(),We=setInterval(function(){var d=xe(document.elementFromPoint(r,l),!0);d!==u&&(u=d,lt()),Ct(t,i.options,d,n)},10),Et=r,St=l)}else{if(!this.options.bubbleScroll||xe(a,!0)===me()){lt();return}Ct(t,this.options,xe(a,!1),!1)}}},we(o,{pluginName:"scroll",initializeByDefault:!0})}function lt(){F.forEach(function(o){clearInterval(o.pid)}),F=[]}function qt(){clearInterval(We)}var Ct=en(function(o,e,t,n){if(e.scroll){var i=(o.touches?o.touches[0]:o).clientX,r=(o.touches?o.touches[0]:o).clientY,l=e.scrollSensitivity,a=e.scrollSpeed,u=me(),d=!1,g;kt!==t&&(kt=t,lt(),Ge=e.scroll,g=e.scrollFn,Ge===!0&&(Ge=xe(t,!0)));var p=0,y=Ge;do{var I=y,_=R(I),O=_.top,Z=_.bottom,ne=_.left,M=_.right,j=_.width,X=_.height,ae=void 0,B=void 0,le=I.scrollWidth,Ee=I.scrollHeight,H=v(I),Se=I.scrollLeft,se=I.scrollTop;I===u?(ae=j<le&&(H.overflowX==="auto"||H.overflowX==="scroll"||H.overflowX==="visible"),B=X<Ee&&(H.overflowY==="auto"||H.overflowY==="scroll"||H.overflowY==="visible")):(ae=j<le&&(H.overflowX==="auto"||H.overflowX==="scroll"),B=X<Ee&&(H.overflowY==="auto"||H.overflowY==="scroll"));var Ce=ae&&(Math.abs(M-i)<=l&&Se+j<le)-(Math.abs(ne-i)<=l&&!!Se),oe=B&&(Math.abs(Z-r)<=l&&se+X<Ee)-(Math.abs(O-r)<=l&&!!se);if(!F[p])for(var ue=0;ue<=p;ue++)F[ue]||(F[ue]={});(F[p].vx!=Ce||F[p].vy!=oe||F[p].el!==I)&&(F[p].el=I,F[p].vx=Ce,F[p].vy=oe,clearInterval(F[p].pid),(Ce!=0||oe!=0)&&(d=!0,F[p].pid=setInterval((function(){n&&this.layer===0&&b.active._onTouchMove(ft);var Oe=F[this.layer].vy?F[this.layer].vy*a:0,de=F[this.layer].vx?F[this.layer].vx*a:0;typeof g=="function"&&g.call(b.dragged.parentNode[K],de,Oe,o,ft,F[this.layer].el)!=="continue"||tn(F[this.layer].el,de,Oe)}).bind({layer:p}),24))),p++}while(e.bubbleScroll&&y!==u&&(y=xe(y,!1)));At=d}},30),dn=function(e){var t=e.originalEvent,n=e.putSortable,i=e.dragEl,r=e.activeSortable,l=e.dispatchSortableEvent,a=e.hideGhostForTarget,u=e.unhideGhostForTarget;if(t){var d=n||r;a();var g=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,p=document.elementFromPoint(g.clientX,g.clientY);u(),d&&!d.el.contains(p)&&(l("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function Mt(){}Mt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=ze(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:dn};we(Mt,{pluginName:"revertOnSpill"});function Ft(){}Ft.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,i=n||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:dn};we(Ft,{pluginName:"removeOnSpill"});b.mount(new eo);b.mount(Ft,Mt);const to={class:"page-background content-scroller"},no={class:"pt-25 w-full z-10 shadow-md bg-header text-rice-500"},oo={class:"container mx-auto flex items-center p-4"},io={class:"w-1/3"},ro={class:"text"},ao={class:"max-w-4xl mx-auto p-4 pt-10 text-[1.2rem]"},lo={class:"flex flex-col gap-4"},so={key:0,class:"text-red-500 text-sm mt-1"},uo={class:"flex flex-row gap-5"},co={class:"w-1/2"},fo={key:0,class:"text-red-500 text-sm mt-1"},mo={class:"w-1/2"},ho={key:0,class:"text-red-500 text-sm mt-1"},po={key:0,class:"text-red-500 text-sm mt-1"},go={class:"mt-2 relative"},vo={class:"relative"},bo=["onClick"],wo=["placeholder"],yo=["onClick"],To={key:0,class:"px-3 py-2 text-gray-500"},_o={key:0,class:"text-red-500 text-sm mt-1"},Do={class:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md"},xo={class:"flex items-center gap-2 text-sm text-blue-800"},Eo={key:0},So={key:1},Co={key:2,class:"text-orange-600"},Oo={key:0,class:"mt-4"},Io={class:"bg-white border border-gray-200 rounded-md p-4"},ko={class:"relative"},Ao={class:"h-8 bg-gray-100 rounded-full relative overflow-hidden"},No=["onClick","title"],Po={class:"text-xs text-white font-medium p-1 truncate"},Mo={class:"flex justify-between mt-2 text-xs text-gray-500"},Fo={key:0},Ro={key:1},Xo={class:"mt-3 flex flex-wrap gap-2 text-xs"},Yo={key:0,class:"flex items-center gap-1"},Bo={class:"flex flex-row gap-4"},$o={class:"mt-4 p-4 border border-gray-200 rounded-md"},zo={class:"flex flex-col gap-3"},Ho={class:"flex gap-3"},Lo={class:"flex-1"},Go=["min","max"],Wo={key:0,class:"text-orange-500 text-xs mt-1"},Vo={class:"flex-1"},jo=["min","max"],Uo={key:0,class:"text-orange-500 text-xs mt-1"},qo={key:0,class:"p-2 bg-yellow-50 border border-yellow-200 rounded text-sm"},Ko={class:"text-yellow-700 text-xs space-y-1"},Zo=["disabled"],Jo={key:0,class:"mt-4"},Qo={class:"flex items-center justify-between mb-3"},ei={class:"text-sm font-medium text-gray-700"},ti=["data-id"],ni={class:"flex items-start justify-between"},oi={class:"flex-1"},ii={class:"flex items-center gap-2"},ri={class:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full font-medium"},ai={class:"font-medium text-gray-900"},li={class:"mt-2 text-sm"},si={key:0,class:"text-gray-600"},ui={class:"text-gray-400 ml-2"},di={key:1,class:"text-orange-500"},ci={key:2,class:"text-red-500 text-xs mt-1"},fi={class:"flex items-center gap-2 ml-4"},mi=["onClick"],hi=["onClick"],pi={key:0,class:"mt-4 pt-4 border-t border-gray-200 bg-gray-50 -mx-4 -mb-4 px-4 pb-4 rounded-b-lg"},gi={class:"flex gap-3"},vi={class:"flex-1"},bi=["min","max"],wi={class:"flex-1"},yi=["min","max"],Ti={class:"flex gap-2 mt-3"},_i=["onClick","disabled"],Di={__name:"ActionNew",setup(o){_n();const{formatISO:e}=On(),t=ge({title:"",img_url:"",content:"",intro:"",types:[],startTime:"",endTime:"",stages:[]}),n=In.filter(f=>f.value!==0).map(f=>({...f,title:f.title.replace(/<br\s*\/?>/g,"")})),i=ge(""),r=ge(!1),l=ge(null),a=ge({name:"",startTime:"",endTime:""}),u=ge(-1),d=ge({startTime:"",endTime:""}),g=ge(null);let p=null;const y=J(()=>i.value?n.filter(f=>f.title.toLowerCase().includes(i.value.toLowerCase())&&!t.value.types.includes(f.value)):n.filter(f=>!t.value.types.includes(f.value))),I=J(()=>n.filter(f=>t.value.types.includes(f.value))),_=J(()=>!t.value.startTime||!t.value.endTime?!1:new Date(t.value.startTime)>new Date(t.value.endTime)),O=J(()=>a.value.name.trim()&&a.value.startTime&&a.value.endTime&&new Date(a.value.startTime)<=new Date(a.value.endTime)&&Pe(a.value)),Z=J(()=>t.value.startTime),ne=J(()=>!!t.value.endTime),M=J(()=>t.value.startTime),j=J(()=>t.value.endTime||Rt()),X=J(()=>t.value.stages.filter(f=>f.startTime&&f.endTime)),ae=J(()=>{const f=[],s=[...X.value].sort((T,h)=>new Date(T.startTime)-new Date(h.startTime));for(let T=0;T<s.length-1;T++){const h=s[T],C=s[T+1];new Date(h.endTime)>new Date(C.startTime)&&f.push({start:C.startTime,end:h.endTime<C.endTime?h.endTime:C.endTime})}return f}),B=J(()=>{const f={start:"",end:""};return a.value.startTime&&(t.value.startTime&&new Date(a.value.startTime)<new Date(t.value.startTime)&&(f.start="開始時間不能早於行動開始時間"),t.value.endTime&&new Date(a.value.startTime)>new Date(t.value.endTime)&&(f.start="開始時間不能晚於行動結束時間")),a.value.endTime&&t.value.endTime&&new Date(a.value.endTime)>new Date(t.value.endTime)&&(f.end="結束時間不能晚於行動結束時間"),f}),le=J(()=>{const f=[];if(!a.value.startTime||!a.value.endTime)return f;const s=new Date(a.value.startTime),T=new Date(a.value.endTime);return X.value.forEach((h,C)=>{const P=new Date(h.startTime),G=new Date(h.endTime);(s>=P&&s<G||T>P&&T<=G||s<=P&&T>=G)&&f.push(`與「${h.name}」時間重疊`)}),f}),Ee=J(()=>d.value.startTime&&d.value.endTime&&new Date(d.value.startTime)<=new Date(d.value.endTime)),H=f=>{t.value.types.includes(f.value)||t.value.types.push(f.value),i.value="",r.value=!1},Se=f=>{const s=t.value.types.indexOf(f);s!==-1&&t.value.types.splice(s,1)},se=()=>{},Ce=()=>{if(!O.value)return;const f=Date.now().toString();t.value.stages.push({id:f,name:a.value.name.trim(),startTime:a.value.startTime,endTime:a.value.endTime}),a.value={name:"",startTime:"",endTime:""}},oe=f=>{t.value.stages.splice(f,1),u.value===f?u.value=-1:u.value>f&&u.value--},ue=f=>{u.value=f;const s=t.value.stages[f];d.value={startTime:s.startTime||"",endTime:s.endTime||""}},Oe=f=>{d.value.startTime&&d.value.endTime?new Date(d.value.startTime)<=new Date(d.value.endTime)?(t.value.stages[f].startTime=d.value.startTime,t.value.stages[f].endTime=d.value.endTime,u.value=-1):alert("結束時間必須晚於或等於開始時間"):alert("請填寫完整的時間資訊")},de=()=>{u.value=-1,d.value={startTime:"",endTime:""}},U=f=>f?new Date(f).toLocaleDateString("zh-TW"):"",Ie=()=>{if(!t.value.startTime||!t.value.endTime)return"";const f=new Date(t.value.startTime),s=new Date(t.value.endTime),T=Math.abs(s-f);return`${Math.ceil(T/(1e3*60*60*24))} 天`},ht=(f,s)=>{if(!f||!s)return"";const T=new Date(f),h=new Date(s),C=Math.abs(h-T);return`${Math.ceil(C/(1e3*60*60*24))} 天`},Rt=()=>{if(!t.value.startTime)return null;const f=new Date(t.value.startTime);return f.setMonth(f.getMonth()+3),f.toISOString().split("T")[0]},Pe=f=>!(!f.startTime||!f.endTime||t.value.startTime&&new Date(f.startTime)<new Date(t.value.startTime)||t.value.endTime&&new Date(f.endTime)>new Date(t.value.endTime)),pt=(f,s)=>{const T=Xt(),h=new Date(f.startTime),C=new Date(f.endTime),P=new Date(M.value),G=Math.max(0,(h-P)/T*100),pe=(C-h)/T*100;return{left:`${G}%`,width:`${pe}%`,zIndex:10+s}},cn=f=>{const s=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-red-500"];return s[f%s.length]},fn=f=>{const s=Xt(),T=new Date(f.start),h=new Date(f.end),C=new Date(M.value),P=Math.max(0,(T-C)/s*100),G=(h-T)/s*100;return{left:`${P}%`,width:`${G}%`,zIndex:100}},Xt=()=>{const f=new Date(M.value);return new Date(j.value)-f},mn=f=>t.value.stages.findIndex(s=>s.id===f.id),hn=(f,s)=>{let T=[];return!f.startTime||!f.endTime?T.push("border-orange-300 bg-orange-50"):Pe(f)?T.push("border-gray-200"):T.push("border-red-300 bg-red-50"),X.value.some((C,P)=>{if(C.id===f.id)return!1;const G=new Date(f.startTime),pe=new Date(f.endTime),gt=new Date(C.startTime),vt=new Date(C.endTime);return G>=gt&&G<vt||pe>gt&&pe<=vt||G<=gt&&pe>=vt})&&T.push("border-yellow-300 bg-yellow-50"),T.join(" ")},Yt=(f,s)=>{if(!f.startTime||!f.endTime)return"";if(!Pe(f)){if(t.value.startTime&&new Date(f.startTime)<new Date(t.value.startTime))return"開始時間早於行動開始時間";if(t.value.endTime&&new Date(f.endTime)>new Date(t.value.endTime))return"結束時間晚於行動結束時間"}const T=X.value.filter(h=>{if(h.id===f.id)return!1;const C=new Date(f.startTime),P=new Date(f.endTime),G=new Date(h.startTime),pe=new Date(h.endTime);return C>=G&&C<pe||P>G&&P<=pe||C<=G&&P>=pe});return T.length>0?`與「${T[0].name}」${T.length>1?"等階段":""}時間重疊`:""},pn=()=>{g.value&&(p=b.create(g.value,{handle:".sortable-item",animation:150,onEnd:f=>{const{oldIndex:s,newIndex:T}=f;if(s!==T){const h=t.value.stages.splice(s,1)[0];t.value.stages.splice(T,0,h),t.value.stages.forEach(C=>{C.startTime="",C.endTime=""}),u.value=-1}}}))},L=ge({title:!1,tags:!1,content:!1,startTime:!1,endTime:!1,timeRange:!1}),He=xn({content:"<p>開始寫下你的故事...</p>",extensions:[En,Sn,Cn.configure({nested:!0})]});bn(l,()=>{r.value=!1}),wn(()=>{setTimeout(()=>{pn()},100)}),yn(()=>{He.value&&He.value.destroy(),p&&p.destroy()});const gn=()=>{L.value={title:!1,tags:!1,content:!1,startTime:!1,endTime:!1,timeRange:!1},He.value&&(t.value.content=He.value.getHTML());let f=!1;if(t.value.startTime||(L.value.startTime=!0,f=!0),t.value.endTime||(L.value.endTime=!0,f=!0),_.value&&(L.value.timeRange=!0,f=!0),t.value.title.trim()||(L.value.title=!0,f=!0),t.value.types.length===0&&(L.value.tags=!0,f=!0),He.value.isEmpty&&(L.value.content=!0,f=!0),f)return;const s=Math.floor(new Date(t.value.startTime).getTime()/1e3),T=Math.floor(new Date(t.value.endTime).getTime()/1e3),h={...t.value,startTime:e(s),endTime:e(T)};console.log("New Story Data:",h),alert("故事已儲存 (請查看主控台)！")};return(f,s)=>{const T=Tn("router-link");return E(),x("div",to,[c("header",no,[c("div",oo,[c("div",io,[Bt(T,{to:"/actions",class:"back-home-btn"},{default:bt(()=>[c("span",ro,[Bt(Dn,{align:"left"},{zh:bt(()=>[...s[11]||(s[11]=[ve("取消",-1)])]),en:bt(()=>[...s[12]||(s[12]=[ve("Cancel",-1)])]),_:1})]),s[13]||(s[13]=c("span",{class:"icon"},"←",-1))]),_:1})]),s[14]||(s[14]=c("div",{class:"w-1/3 text-center"},[c("h1",{class:"text-2xl md:text-3xl font-bold"},"建立行動")],-1)),s[15]||(s[15]=c("div",{class:"w-1/3"},null,-1))])]),c("main",ao,[c("div",lo,[c("div",null,[s[16]||(s[16]=c("label",{for:"title",class:"block text-lg font-medium"},"標題*",-1)),ce(c("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=h=>t.value.title=h),id:"title",class:Te(["mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":L.value.title}])},null,2),[[fe,t.value.title]]),L.value.title?(E(),x("p",so," 請輸入標題 ")):W("",!0)]),c("div",uo,[c("div",co,[s[17]||(s[17]=c("label",{for:"startTime",class:"block text-lg font-medium"},"起始時間*",-1)),ce(c("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=h=>t.value.startTime=h),id:"startTime",class:Te(["mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":L.value.startTime}])},null,2),[[fe,t.value.startTime]]),L.value.startTime?(E(),x("p",fo," 請輸入起始時間 ")):W("",!0)]),c("div",mo,[s[18]||(s[18]=c("label",{for:"endTime",class:"block text-lg font-medium"},"結束時間*",-1)),ce(c("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=h=>t.value.endTime=h),id:"endTime",class:Te(["mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":L.value.endTime}])},null,2),[[fe,t.value.endTime]]),L.value.endTime?(E(),x("p",ho," 請輸入結束時間 ")):W("",!0)])]),_.value?(E(),x("p",po," 結束時間必須晚於起始時間 ")):W("",!0),c("div",null,[s[19]||(s[19]=c("label",{class:"block text-lg font-medium"},"SDGs標籤*",-1)),c("div",go,[c("div",vo,[c("div",{class:Te(["flex flex-wrap items-center gap-1 p-2 border border-gray-300 rounded-md shadow-sm focus-within:ring-indigo-500 focus-within:border-indigo-500 min-h-[2.5rem]",{"border-red-500":L.value.tags}])},[(E(!0),x(Me,null,Fe(I.value,h=>(E(),x("span",{key:h.value,class:"inline-flex items-center px-2 py-1 text-sm bg-blue-500 text-white rounded-full"},[c("span",null,Y(h.title),1),c("button",{onClick:C=>Se(h.value),class:"ml-1 text-white hover:text-gray-200"}," × ",8,bo)]))),128)),ce(c("input",{type:"text","onUpdate:modelValue":s[3]||(s[3]=h=>i.value=h),onFocus:s[4]||(s[4]=h=>r.value=!0),onInput:se,class:"flex-1 min-w-0 outline-none bg-transparent",placeholder:I.value.length===0?"搜尋SDGs標籤...":"",ref:"searchInput"},null,40,wo),[[fe,i.value]])],2),r.value?(E(),x("div",{key:0,ref_key:"dropdown",ref:l,class:"absolute z-10 w-full bg-pblue-200 border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto mt-1"},[(E(!0),x(Me,null,Fe(y.value,h=>(E(),x("div",{key:h.value,onClick:C=>H(h),class:"px-3 py-2 hover:bg-orange-300 cursor-pointer"},Y(h.title),9,yo))),128)),y.value.length===0?(E(),x("div",To," 無匹配的標籤 ")):W("",!0)],512)):W("",!0)]),L.value.tags?(E(),x("p",_o," 請至少選擇一個SDGs標籤 ")):W("",!0)])]),c("div",null,[s[20]||(s[20]=c("label",{for:"intro",class:"block text-lg font-medium"},"描述",-1)),ce(c("input",{type:"text","onUpdate:modelValue":s[5]||(s[5]=h=>t.value.intro=h),id:"intro",class:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[fe,t.value.intro]])]),c("div",null,[s[43]||(s[43]=c("label",{class:"block text-lg font-medium"},"階段規劃",-1)),c("div",Do,[c("div",xo,[s[21]||(s[21]=c("i",{class:"fa-solid fa-info-circle"},null,-1)),t.value.startTime&&t.value.endTime?(E(),x("span",Eo," 行動期間："+Y(U(t.value.startTime))+" 至 "+Y(U(t.value.endTime))+" （"+Y(Ie())+"） ",1)):t.value.startTime?(E(),x("span",So," 行動起始："+Y(U(t.value.startTime))+"（無結束期限） ",1)):(E(),x("span",Co," 請先設定行動時間以便規劃階段 "))])]),t.value.stages.length>0&&Z.value?(E(),x("div",Oo,[s[25]||(s[25]=c("div",{class:"text-sm font-medium text-gray-700 mb-2"}," 時間軸視覺化 ",-1)),c("div",Io,[c("div",ko,[c("div",Ao,[(E(!0),x(Me,null,Fe(X.value,(h,C)=>(E(),x("div",{key:h.id,style:$t(pt(h,C)),class:Te(["absolute h-full rounded transition-all duration-300 hover:opacity-80 cursor-pointer border-2 border-white",cn(C)]),onClick:P=>ue(mn(h)),title:`${h.name}: ${U(h.startTime)} - ${U(h.endTime)}`},[c("div",Po,Y(h.name),1)],14,No))),128)),(E(!0),x(Me,null,Fe(ae.value,h=>(E(),x("div",{key:`overlap-${h.start}-${h.end}`,style:$t(fn(h)),class:"absolute h-full bg-red-500 opacity-70 border-2 border-red-600",title:"時間重疊"},null,4))),128))]),c("div",Mo,[c("span",null,Y(U(M.value)),1),ne.value?(E(),x("span",Fo,Y(U(j.value)),1)):(E(),x("span",Ro,"進行中..."))])]),c("div",Xo,[s[23]||(s[23]=c("div",{class:"flex items-center gap-1"},[c("div",{class:"w-3 h-3 bg-blue-500 rounded"}),c("span",null,"已規劃階段")],-1)),s[24]||(s[24]=c("div",{class:"flex items-center gap-1"},[c("div",{class:"w-3 h-3 bg-gray-300 rounded"}),c("span",null,"空檔期間")],-1)),ae.value.length>0?(E(),x("div",Yo,[...s[22]||(s[22]=[c("div",{class:"w-3 h-3 bg-red-500 rounded"},null,-1),c("span",null,"時間重疊",-1)])])):W("",!0)])])])):W("",!0),c("section",Bo,[c("div",$o,[s[31]||(s[31]=c("h3",{class:"text-md font-medium mb-3"},"新增階段",-1)),c("div",zo,[c("div",null,[s[26]||(s[26]=c("label",{for:"newStageName",class:"block text-sm font-medium"},"階段名稱",-1)),ce(c("input",{type:"text","onUpdate:modelValue":s[6]||(s[6]=h=>a.value.name=h),id:"newStageName",placeholder:"輸入階段名稱",class:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[fe,a.value.name]])]),c("div",Ho,[c("div",Lo,[s[27]||(s[27]=c("label",{for:"newStageStartTime",class:"block text-sm font-medium"},"開始時間",-1)),ce(c("input",{type:"date","onUpdate:modelValue":s[7]||(s[7]=h=>a.value.startTime=h),id:"newStageStartTime",min:t.value.startTime,max:t.value.endTime,class:Te(["mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",{"border-orange-500":B.value.start}])},null,10,Go),[[fe,a.value.startTime]]),B.value.start?(E(),x("p",Wo,Y(B.value.start),1)):W("",!0)]),c("div",Vo,[s[28]||(s[28]=c("label",{for:"newStageEndTime",class:"block text-sm font-medium"},"結束時間",-1)),ce(c("input",{type:"date","onUpdate:modelValue":s[8]||(s[8]=h=>a.value.endTime=h),id:"newStageEndTime",min:a.value.startTime||t.value.startTime,max:t.value.endTime,class:Te(["mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",{"border-orange-500":B.value.end}])},null,10,jo),[[fe,a.value.endTime]]),B.value.end?(E(),x("p",Uo,Y(B.value.end),1)):W("",!0)])]),le.value.length>0?(E(),x("div",qo,[s[29]||(s[29]=c("div",{class:"text-yellow-800 font-medium mb-1"}," ⚠️ 時間衝突警告： ",-1)),c("ul",Ko,[(E(!0),x(Me,null,Fe(le.value,h=>(E(),x("li",{key:h},Y(h),1))),128))])])):W("",!0),c("button",{onClick:Ce,disabled:!O.value,class:"self-start bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-sm transition-colors"},[...s[30]||(s[30]=[c("i",{class:"fa-solid fa-plus mr-1"},null,-1),ve(" 新增階段 ",-1)])],8,Zo)])]),t.value.stages.length>0?(E(),x("div",Jo,[c("div",Qo,[c("div",ei," 已規劃階段 ("+Y(t.value.stages.length)+") ",1),s[32]||(s[32]=c("div",{class:"text-xs text-gray-500"},"可拖曳調整順序",-1))]),c("div",{ref_key:"sortableContainer",ref:g,class:"space-y-3"},[(E(!0),x(Me,null,Fe(t.value.stages,(h,C)=>(E(),x("div",{key:h.id,"data-id":h.id,class:Te(["sortable-item p-4 border rounded-lg bg-white hover:shadow-md transition-all duration-200",hn(h)])},[c("div",ni,[c("div",oi,[c("div",ii,[c("span",ri," 第"+Y(C+1)+"階段 ",1),c("div",ai,Y(h.name),1)]),c("div",li,[h.startTime&&h.endTime?(E(),x("div",si,[s[33]||(s[33]=c("i",{class:"fa-solid fa-calendar mr-1"},null,-1)),ve(" "+Y(U(h.startTime))+" 至 "+Y(U(h.endTime))+" ",1),c("span",ui," ("+Y(ht(h.startTime,h.endTime))+") ",1)])):(E(),x("div",di,[...s[34]||(s[34]=[c("i",{class:"fa-solid fa-exclamation-triangle mr-1"},null,-1),ve(" 請設定時間 ",-1)])])),Yt(h)?(E(),x("div",ci,Y(Yt(h)),1)):W("",!0)])]),c("div",fi,[c("button",{onClick:P=>ue(C),class:"text-blue-500 hover:text-blue-700 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",title:"編輯時間"},[...s[35]||(s[35]=[c("i",{class:"fa-solid fa-edit mr-1"},null,-1),ve("編輯 ",-1)])],8,mi),c("button",{onClick:P=>oe(C),class:"text-red-500 hover:text-red-700 text-sm px-2 py-1 rounded hover:bg-red-50 transition-colors",title:"刪除階段"},[...s[36]||(s[36]=[c("i",{class:"fa-solid fa-trash mr-1"},null,-1),ve("刪除 ",-1)])],8,hi),s[37]||(s[37]=c("div",{class:"text-gray-400 cursor-move px-2 py-1 hover:text-gray-600",title:"拖曳排序"},[c("i",{class:"fa-solid fa-grip-vertical"})],-1))])]),u.value===C?(E(),x("div",pi,[s[42]||(s[42]=c("div",{class:"text-sm font-medium text-gray-700 mb-3"}," 編輯階段時間 ",-1)),c("div",gi,[c("div",vi,[s[38]||(s[38]=c("label",{class:"block text-sm font-medium text-gray-700"},"開始時間",-1)),ce(c("input",{type:"date","onUpdate:modelValue":s[9]||(s[9]=P=>d.value.startTime=P),min:t.value.startTime,max:t.value.endTime,class:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,8,bi),[[fe,d.value.startTime]])]),c("div",wi,[s[39]||(s[39]=c("label",{class:"block text-sm font-medium text-gray-700"},"結束時間",-1)),ce(c("input",{type:"date","onUpdate:modelValue":s[10]||(s[10]=P=>d.value.endTime=P),min:d.value.startTime||t.value.startTime,max:t.value.endTime,class:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,8,yi),[[fe,d.value.endTime]])])]),c("div",Ti,[c("button",{onClick:P=>Oe(C),disabled:!Ee.value,class:"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},[...s[40]||(s[40]=[c("i",{class:"fa-solid fa-check mr-1"},null,-1),ve("儲存 ",-1)])],8,_i),c("button",{onClick:de,class:"bg-gray-500 text-white px-3 py-1 rounded text-sm hover:bg-gray-600 transition-colors"},[...s[41]||(s[41]=[c("i",{class:"fa-solid fa-times mr-1"},null,-1),ve("取消 ",-1)])])])])):W("",!0)],10,ti))),128))],512)])):W("",!0)])]),c("div",{class:"self-end"},[c("button",{onClick:gn,class:"bg-green-500 text-white px-6 py-2 rounded-md hover:bg-green-600"}," 儲存 ")])])])])}}},Ii=vn(Di,[["__scopeId","data-v-38421d44"]]);export{Ii as default};
