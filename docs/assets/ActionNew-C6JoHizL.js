import{B as vn,r as ge,c as J,C as bn,k as wn,D as yn,a as E,o as S,b as c,f as Bt,g as vt,h as ve,i as Tn,d as L,e as ce,v as fe,n as Te,F as Me,p as Fe,t as Y,l as _n,j as Dn,s as $t}from"./index-BMdFWD3I.js";import{C as xn}from"./CJKSub-CytIZdfj.js";import{u as En,i as Sn,a as Cn,b as On}from"./index-Bt3qDDDW.js";import{u as In}from"./useDateTime-C5bsu7z3.js";import{s as kn}from"./SDGs_goal-BU-5yG0n.js";/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function zt(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),t.push.apply(t,n)}return t}function he(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zt(Object(t),!0).forEach(function(n){An(o,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):zt(Object(t)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(t,n))})}return o}function nt(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nt=function(e){return typeof e}:nt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(o)}function An(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function we(){return we=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},we.apply(this,arguments)}function Nn(o,e){if(o==null)return{};var t={},n=Object.keys(o),i,r;for(r=0;r<n.length;r++)i=n[r],!(e.indexOf(i)>=0)&&(t[i]=o[i]);return t}function Pn(o,e){if(o==null)return{};var t=Nn(o,e),n,i;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);for(i=0;i<r.length;i++)n=r[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(o,n)&&(t[n]=o[n])}return t}var Mn="1.15.6";function be(o){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(o)}var ye=be(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ke=be(/Edge/i),Gt=be(/firefox/i),We=be(/safari/i)&&!be(/chrome/i)&&!be(/android/i),At=be(/iP(ad|od|hone)/i),Kt=be(/chrome/i)&&be(/android/i),Zt={capture:!1,passive:!1};function C(o,e,t){o.addEventListener(e,t,!ye&&Zt)}function x(o,e,t){o.removeEventListener(e,t,!ye&&Zt)}function lt(o,e){if(e){if(e[0]===">"&&(e=e.substring(1)),o)try{if(o.matches)return o.matches(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e)}catch{return!1}return!1}}function Jt(o){return o.host&&o!==document&&o.host.nodeType?o.host:o.parentNode}function re(o,e,t,n){if(o){t=t||document;do{if(e!=null&&(e[0]===">"?o.parentNode===t&&lt(o,e):lt(o,e))||n&&o===t)return o;if(o===t)break}while(o=Jt(o))}return null}var Ht=/\s+/g;function Q(o,e,t){if(o&&e)if(o.classList)o.classList[t?"add":"remove"](e);else{var n=(" "+o.className+" ").replace(Ht," ").replace(" "+e+" "," ");o.className=(n+(t?" "+e:"")).replace(Ht," ")}}function v(o,e,t){var n=o&&o.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(o,""):o.currentStyle&&(t=o.currentStyle),e===void 0?t:t[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=t+(typeof t=="string"?"":"px")}}function $e(o,e){var t="";if(typeof o=="string")t=o;else do{var n=v(o,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!e&&(o=o.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function Qt(o,e,t){if(o){var n=o.getElementsByTagName(e),i=0,r=n.length;if(t)for(;i<r;i++)t(n[i],i);return n}return[]}function me(){var o=document.scrollingElement;return o||document.documentElement}function R(o,e,t,n,i){if(!(!o.getBoundingClientRect&&o!==window)){var r,l,a,d,u,g,p;if(o!==window&&o.parentNode&&o!==me()?(r=o.getBoundingClientRect(),l=r.top,a=r.left,d=r.bottom,u=r.right,g=r.height,p=r.width):(l=0,a=0,d=window.innerHeight,u=window.innerWidth,g=window.innerHeight,p=window.innerWidth),(e||t)&&o!==window&&(i=i||o.parentNode,!ye))do if(i&&i.getBoundingClientRect&&(v(i,"transform")!=="none"||t&&v(i,"position")!=="static")){var y=i.getBoundingClientRect();l-=y.top+parseInt(v(i,"border-top-width")),a-=y.left+parseInt(v(i,"border-left-width")),d=l+r.height,u=a+r.width;break}while(i=i.parentNode);if(n&&o!==window){var I=$e(i||o),_=I&&I.a,O=I&&I.d;I&&(l/=O,a/=_,p/=_,g/=O,d=l+g,u=a+p)}return{top:l,left:a,bottom:d,right:u,width:p,height:g}}}function Lt(o,e,t){for(var n=xe(o,!0),i=R(o)[e];n;){var r=R(n)[t],l=void 0;if(l=i>=r,!l)return n;if(n===me())break;n=xe(n,!1)}return!1}function ze(o,e,t,n){for(var i=0,r=0,l=o.children;r<l.length;){if(l[r].style.display!=="none"&&l[r]!==b.ghost&&(n||l[r]!==b.dragged)&&re(l[r],t.draggable,o,!1)){if(i===e)return l[r];i++}r++}return null}function Nt(o,e){for(var t=o.lastElementChild;t&&(t===b.ghost||v(t,"display")==="none"||e&&!lt(t,e));)t=t.previousElementSibling;return t||null}function te(o,e){var t=0;if(!o||!o.parentNode)return-1;for(;o=o.previousElementSibling;)o.nodeName.toUpperCase()!=="TEMPLATE"&&o!==b.clone&&(!e||lt(o,e))&&t++;return t}function Wt(o){var e=0,t=0,n=me();if(o)do{var i=$e(o),r=i.a,l=i.d;e+=o.scrollLeft*r,t+=o.scrollTop*l}while(o!==n&&(o=o.parentNode));return[e,t]}function Fn(o,e){for(var t in o)if(o.hasOwnProperty(t)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===o[t][n])return Number(t)}return-1}function xe(o,e){if(!o||!o.getBoundingClientRect)return me();var t=o,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=v(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return me();if(n||e)return t;n=!0}}while(t=t.parentNode);return me()}function Rn(o,e){if(o&&e)for(var t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);return o}function bt(o,e){return Math.round(o.top)===Math.round(e.top)&&Math.round(o.left)===Math.round(e.left)&&Math.round(o.height)===Math.round(e.height)&&Math.round(o.width)===Math.round(e.width)}var Ve;function en(o,e){return function(){if(!Ve){var t=arguments,n=this;t.length===1?o.call(n,t[0]):o.apply(n,t),Ve=setTimeout(function(){Ve=void 0},e)}}}function Xn(){clearTimeout(Ve),Ve=void 0}function tn(o,e,t){o.scrollLeft+=e,o.scrollTop+=t}function nn(o){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(o).cloneNode(!0):t?t(o).clone(!0)[0]:o.cloneNode(!0)}function on(o,e,t){var n={};return Array.from(o.children).forEach(function(i){var r,l,a,d;if(!(!re(i,e.draggable,o,!1)||i.animated||i===t)){var u=R(i);n.left=Math.min((r=n.left)!==null&&r!==void 0?r:1/0,u.left),n.top=Math.min((l=n.top)!==null&&l!==void 0?l:1/0,u.top),n.right=Math.max((a=n.right)!==null&&a!==void 0?a:-1/0,u.right),n.bottom=Math.max((d=n.bottom)!==null&&d!==void 0?d:-1/0,u.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var K="Sortable"+new Date().getTime();function Yn(){var o=[],e;return{captureAnimationState:function(){if(o=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(i){if(!(v(i,"display")==="none"||i===b.ghost)){o.push({target:i,rect:R(i)});var r=he({},o[o.length-1].rect);if(i.thisAnimationDuration){var l=$e(i,!0);l&&(r.top-=l.f,r.left-=l.e)}i.fromRect=r}})}},addAnimationState:function(n){o.push(n)},removeAnimationState:function(n){o.splice(Fn(o,{target:n}),1)},animateAll:function(n){var i=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var r=!1,l=0;o.forEach(function(a){var d=0,u=a.target,g=u.fromRect,p=R(u),y=u.prevFromRect,I=u.prevToRect,_=a.rect,O=$e(u,!0);O&&(p.top-=O.f,p.left-=O.e),u.toRect=p,u.thisAnimationDuration&&bt(y,p)&&!bt(g,p)&&(_.top-p.top)/(_.left-p.left)===(g.top-p.top)/(g.left-p.left)&&(d=$n(_,y,I,i.options)),bt(p,g)||(u.prevFromRect=g,u.prevToRect=p,d||(d=i.options.animation),i.animate(u,_,p,d)),d&&(r=!0,l=Math.max(l,d),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},d),u.thisAnimationDuration=d)}),clearTimeout(e),r?e=setTimeout(function(){typeof n=="function"&&n()},l):typeof n=="function"&&n(),o=[]},animate:function(n,i,r,l){if(l){v(n,"transition",""),v(n,"transform","");var a=$e(this.el),d=a&&a.a,u=a&&a.d,g=(i.left-r.left)/(d||1),p=(i.top-r.top)/(u||1);n.animatingX=!!g,n.animatingY=!!p,v(n,"transform","translate3d("+g+"px,"+p+"px,0)"),this.forRepaintDummy=Bn(n),v(n,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),v(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){v(n,"transition",""),v(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},l)}}}}function Bn(o){return o.offsetWidth}function $n(o,e,t,n){return Math.sqrt(Math.pow(e.top-o.top,2)+Math.pow(e.left-o.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*n.animation}var Re=[],wt={initializeByDefault:!0},Ze={mount:function(e){for(var t in wt)wt.hasOwnProperty(t)&&!(t in e)&&(e[t]=wt[t]);Re.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Re.push(e)},pluginEvent:function(e,t,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var r=e+"Global";Re.forEach(function(l){t[l.pluginName]&&(t[l.pluginName][r]&&t[l.pluginName][r](he({sortable:t},n)),t.options[l.pluginName]&&t[l.pluginName][e]&&t[l.pluginName][e](he({sortable:t},n)))})},initializePlugins:function(e,t,n,i){Re.forEach(function(a){var d=a.pluginName;if(!(!e.options[d]&&!a.initializeByDefault)){var u=new a(e,t,e.options);u.sortable=e,u.options=e.options,e[d]=u,we(n,u.defaults)}});for(var r in e.options)if(e.options.hasOwnProperty(r)){var l=this.modifyOption(e,r,e.options[r]);typeof l<"u"&&(e.options[r]=l)}},getEventProperties:function(e,t){var n={};return Re.forEach(function(i){typeof i.eventProperties=="function"&&we(n,i.eventProperties.call(t[i.pluginName],e))}),n},modifyOption:function(e,t,n){var i;return Re.forEach(function(r){e[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[t]=="function"&&(i=r.optionListeners[t].call(e[r.pluginName],n))}),i}};function zn(o){var e=o.sortable,t=o.rootEl,n=o.name,i=o.targetEl,r=o.cloneEl,l=o.toEl,a=o.fromEl,d=o.oldIndex,u=o.newIndex,g=o.oldDraggableIndex,p=o.newDraggableIndex,y=o.originalEvent,I=o.putSortable,_=o.extraEventProperties;if(e=e||t&&t[K],!!e){var O,Z=e.options,ne="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!ye&&!Ke?O=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(O=document.createEvent("Event"),O.initEvent(n,!0,!0)),O.to=l||t,O.from=a||t,O.item=i||t,O.clone=r,O.oldIndex=d,O.newIndex=u,O.oldDraggableIndex=g,O.newDraggableIndex=p,O.originalEvent=y,O.pullMode=I?I.lastPutMode:void 0;var M=he(he({},_),Ze.getEventProperties(n,e));for(var V in M)O[V]=M[V];t&&t.dispatchEvent(O),Z[ne]&&Z[ne].call(e,O)}}var Gn=["evt"],q=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.evt,r=Pn(n,Gn);Ze.pluginEvent.bind(b)(e,t,he({dragEl:m,parentEl:N,ghostEl:w,rootEl:k,nextEl:Ne,lastDownEl:ot,cloneEl:A,cloneHidden:De,dragStarted:Ge,putSortable:$,activeSortable:b.active,originalEvent:i,oldIndex:Be,oldDraggableIndex:je,newIndex:ee,newDraggableIndex:_e,hideGhostForTarget:sn,unhideGhostForTarget:dn,cloneNowHidden:function(){De=!0},cloneNowShown:function(){De=!1},dispatchSortableEvent:function(a){W({sortable:t,name:a,originalEvent:i})}},r))};function W(o){zn(he({putSortable:$,cloneEl:A,targetEl:m,rootEl:k,oldIndex:Be,oldDraggableIndex:je,newIndex:ee,newDraggableIndex:_e},o))}var m,N,w,k,Ne,ot,A,De,Be,ee,je,_e,Je,$,Ye=!1,st=!1,dt=[],ke,ie,yt,Tt,Vt,jt,Ge,Xe,Ue,qe=!1,Qe=!1,it,z,_t=[],Ct=!1,ut=[],ft=typeof document<"u",et=At,Ut=Ke||ye?"cssFloat":"float",Hn=ft&&!Kt&&!At&&"draggable"in document.createElement("div"),rn=(function(){if(ft){if(ye)return!1;var o=document.createElement("x");return o.style.cssText="pointer-events:auto",o.style.pointerEvents==="auto"}})(),an=function(e,t){var n=v(e),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=ze(e,0,t),l=ze(e,1,t),a=r&&v(r),d=l&&v(l),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+R(r).width,g=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+R(l).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&a.float&&a.float!=="none"){var p=a.float==="left"?"left":"right";return l&&(d.clear==="both"||d.clear===p)?"vertical":"horizontal"}return r&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=i&&n[Ut]==="none"||l&&n[Ut]==="none"&&u+g>i)?"vertical":"horizontal"},Ln=function(e,t,n){var i=n?e.left:e.top,r=n?e.right:e.bottom,l=n?e.width:e.height,a=n?t.left:t.top,d=n?t.right:t.bottom,u=n?t.width:t.height;return i===a||r===d||i+l/2===a+u/2},Wn=function(e,t){var n;return dt.some(function(i){var r=i[K].options.emptyInsertThreshold;if(!(!r||Nt(i))){var l=R(i),a=e>=l.left-r&&e<=l.right+r,d=t>=l.top-r&&t<=l.bottom+r;if(a&&d)return n=i}}),n},ln=function(e){function t(r,l){return function(a,d,u,g){var p=a.options.group.name&&d.options.group.name&&a.options.group.name===d.options.group.name;if(r==null&&(l||p))return!0;if(r==null||r===!1)return!1;if(l&&r==="clone")return r;if(typeof r=="function")return t(r(a,d,u,g),l)(a,d,u,g);var y=(l?a:d).options.group.name;return r===!0||typeof r=="string"&&r===y||r.join&&r.indexOf(y)>-1}}var n={},i=e.group;(!i||nt(i)!="object")&&(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n},sn=function(){!rn&&w&&v(w,"display","none")},dn=function(){!rn&&w&&v(w,"display","")};ft&&!Kt&&document.addEventListener("click",function(o){if(st)return o.preventDefault(),o.stopPropagation&&o.stopPropagation(),o.stopImmediatePropagation&&o.stopImmediatePropagation(),st=!1,!1},!0);var Ae=function(e){if(m){e=e.touches?e.touches[0]:e;var t=Wn(e.clientX,e.clientY);if(t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[K]._onDragOver(n)}}},Vn=function(e){m&&m.parentNode[K]._isOutsideThisEl(e.target)};function b(o,e){if(!(o&&o.nodeType&&o.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(o));this.el=o,this.options=e=we({},e),o[K]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(o.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return an(o,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,a){l.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:b.supportPointer!==!1&&"PointerEvent"in window&&(!We||At),emptyInsertThreshold:5};Ze.initializePlugins(this,o,t);for(var n in t)!(n in e)&&(e[n]=t[n]);ln(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:Hn,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?C(o,"pointerdown",this._onTapStart):(C(o,"mousedown",this._onTapStart),C(o,"touchstart",this._onTapStart)),this.nativeDraggable&&(C(o,"dragover",this),C(o,"dragenter",this)),dt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),we(this,Yn())}b.prototype={constructor:b,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Xe=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,m):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,i=this.options,r=i.preventOnFilter,l=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,d=(a||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||d,g=i.filter;if(eo(n),!m&&!(/mousedown|pointerdown/.test(l)&&e.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&We&&d&&d.tagName.toUpperCase()==="SELECT")&&(d=re(d,i.draggable,n,!1),!(d&&d.animated)&&ot!==d)){if(Be=te(d),je=te(d,i.draggable),typeof g=="function"){if(g.call(this,e,d,this)){W({sortable:t,rootEl:u,name:"filter",targetEl:d,toEl:n,fromEl:n}),q("filter",t,{evt:e}),r&&e.preventDefault();return}}else if(g&&(g=g.split(",").some(function(p){if(p=re(u,p.trim(),n,!1),p)return W({sortable:t,rootEl:p,name:"filter",targetEl:d,fromEl:n,toEl:n}),q("filter",t,{evt:e}),!0}),g)){r&&e.preventDefault();return}i.handle&&!re(u,i.handle,n,!1)||this._prepareDragStart(e,a,d)}}},_prepareDragStart:function(e,t,n){var i=this,r=i.el,l=i.options,a=r.ownerDocument,d;if(n&&!m&&n.parentNode===r){var u=R(n);if(k=r,m=n,N=m.parentNode,Ne=m.nextSibling,ot=n,Je=l.group,b.dragged=m,ke={target:m,clientX:(t||e).clientX,clientY:(t||e).clientY},Vt=ke.clientX-u.left,jt=ke.clientY-u.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,m.style["will-change"]="all",d=function(){if(q("delayEnded",i,{evt:e}),b.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Gt&&i.nativeDraggable&&(m.draggable=!0),i._triggerDragStart(e,t),W({sortable:i,name:"choose",originalEvent:e}),Q(m,l.chosenClass,!0)},l.ignore.split(",").forEach(function(g){Qt(m,g.trim(),Dt)}),C(a,"dragover",Ae),C(a,"mousemove",Ae),C(a,"touchmove",Ae),l.supportPointer?(C(a,"pointerup",i._onDrop),!this.nativeDraggable&&C(a,"pointercancel",i._onDrop)):(C(a,"mouseup",i._onDrop),C(a,"touchend",i._onDrop),C(a,"touchcancel",i._onDrop)),Gt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,m.draggable=!0),q("delayStart",this,{evt:e}),l.delay&&(!l.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Ke||ye))){if(b.eventCanceled){this._onDrop();return}l.supportPointer?(C(a,"pointerup",i._disableDelayedDrag),C(a,"pointercancel",i._disableDelayedDrag)):(C(a,"mouseup",i._disableDelayedDrag),C(a,"touchend",i._disableDelayedDrag),C(a,"touchcancel",i._disableDelayedDrag)),C(a,"mousemove",i._delayedDragTouchMoveHandler),C(a,"touchmove",i._delayedDragTouchMoveHandler),l.supportPointer&&C(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(d,l.delay)}else d()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){m&&Dt(m),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;x(e,"mouseup",this._disableDelayedDrag),x(e,"touchend",this._disableDelayedDrag),x(e,"touchcancel",this._disableDelayedDrag),x(e,"pointerup",this._disableDelayedDrag),x(e,"pointercancel",this._disableDelayedDrag),x(e,"mousemove",this._delayedDragTouchMoveHandler),x(e,"touchmove",this._delayedDragTouchMoveHandler),x(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?C(document,"pointermove",this._onTouchMove):t?C(document,"touchmove",this._onTouchMove):C(document,"mousemove",this._onTouchMove):(C(m,"dragend",this),C(k,"dragstart",this._onDragStart));try{document.selection?rt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Ye=!1,k&&m){q("dragStarted",this,{evt:t}),this.nativeDraggable&&C(document,"dragover",Vn);var n=this.options;!e&&Q(m,n.dragClass,!1),Q(m,n.ghostClass,!0),b.active=this,e&&this._appendGhost(),W({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ie){this._lastX=ie.clientX,this._lastY=ie.clientY,sn();for(var e=document.elementFromPoint(ie.clientX,ie.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ie.clientX,ie.clientY),e!==t);)t=e;if(m.parentNode[K]._isOutsideThisEl(e),t)do{if(t[K]){var n=void 0;if(n=t[K]._onDragOver({clientX:ie.clientX,clientY:ie.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=Jt(t));dn()}},_onTouchMove:function(e){if(ke){var t=this.options,n=t.fallbackTolerance,i=t.fallbackOffset,r=e.touches?e.touches[0]:e,l=w&&$e(w,!0),a=w&&l&&l.a,d=w&&l&&l.d,u=et&&z&&Wt(z),g=(r.clientX-ke.clientX+i.x)/(a||1)+(u?u[0]-_t[0]:0)/(a||1),p=(r.clientY-ke.clientY+i.y)/(d||1)+(u?u[1]-_t[1]:0)/(d||1);if(!b.active&&!Ye){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(w){l?(l.e+=g-(yt||0),l.f+=p-(Tt||0)):l={a:1,b:0,c:0,d:1,e:g,f:p};var y="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");v(w,"webkitTransform",y),v(w,"mozTransform",y),v(w,"msTransform",y),v(w,"transform",y),yt=g,Tt=p,ie=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!w){var e=this.options.fallbackOnBody?document.body:k,t=R(m,!0,et,!0,e),n=this.options;if(et){for(z=e;v(z,"position")==="static"&&v(z,"transform")==="none"&&z!==document;)z=z.parentNode;z!==document.body&&z!==document.documentElement?(z===document&&(z=me()),t.top+=z.scrollTop,t.left+=z.scrollLeft):z=me(),_t=Wt(z)}w=m.cloneNode(!0),Q(w,n.ghostClass,!1),Q(w,n.fallbackClass,!0),Q(w,n.dragClass,!0),v(w,"transition",""),v(w,"transform",""),v(w,"box-sizing","border-box"),v(w,"margin",0),v(w,"top",t.top),v(w,"left",t.left),v(w,"width",t.width),v(w,"height",t.height),v(w,"opacity","0.8"),v(w,"position",et?"absolute":"fixed"),v(w,"zIndex","100000"),v(w,"pointerEvents","none"),b.ghost=w,e.appendChild(w),v(w,"transform-origin",Vt/parseInt(w.style.width)*100+"% "+jt/parseInt(w.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,i=e.dataTransfer,r=n.options;if(q("dragStart",this,{evt:e}),b.eventCanceled){this._onDrop();return}q("setupClone",this),b.eventCanceled||(A=nn(m),A.removeAttribute("id"),A.draggable=!1,A.style["will-change"]="",this._hideClone(),Q(A,this.options.chosenClass,!1),b.clone=A),n.cloneId=rt(function(){q("clone",n),!b.eventCanceled&&(n.options.removeCloneOnHide||k.insertBefore(A,m),n._hideClone(),W({sortable:n,name:"clone"}))}),!t&&Q(m,r.dragClass,!0),t?(st=!0,n._loopId=setInterval(n._emulateDragOver,50)):(x(document,"mouseup",n._onDrop),x(document,"touchend",n._onDrop),x(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(n,i,m)),C(document,"drop",n),v(m,"transform","translateZ(0)")),Ye=!0,n._dragStartId=rt(n._dragStarted.bind(n,t,e)),C(document,"selectstart",n),Ge=!0,window.getSelection().removeAllRanges(),We&&v(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,i,r,l,a=this.options,d=a.group,u=b.active,g=Je===d,p=a.sort,y=$||u,I,_=this,O=!1;if(Ct)return;function Z(Ie,mt){q(Ie,_,he({evt:e,isOwner:g,axis:I?"vertical":"horizontal",revert:l,dragRect:i,targetRect:r,canSort:p,fromSortable:y,target:n,completed:M,onMove:function(Pe,ht){return tt(k,t,m,i,Pe,R(Pe),e,ht)},changed:V},mt))}function ne(){Z("dragOverAnimationCapture"),_.captureAnimationState(),_!==y&&y.captureAnimationState()}function M(Ie){return Z("dragOverCompleted",{insertion:Ie}),Ie&&(g?u._hideClone():u._showClone(_),_!==y&&(Q(m,$?$.options.ghostClass:u.options.ghostClass,!1),Q(m,a.ghostClass,!0)),$!==_&&_!==b.active?$=_:_===b.active&&$&&($=null),y===_&&(_._ignoreWhileAnimating=n),_.animateAll(function(){Z("dragOverAnimationComplete"),_._ignoreWhileAnimating=null}),_!==y&&(y.animateAll(),y._ignoreWhileAnimating=null)),(n===m&&!m.animated||n===t&&!n.animated)&&(Xe=null),!a.dragoverBubble&&!e.rootEl&&n!==document&&(m.parentNode[K]._isOutsideThisEl(e.target),!Ie&&Ae(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),O=!0}function V(){ee=te(m),_e=te(m,a.draggable),W({sortable:_,name:"change",toEl:t,newIndex:ee,newDraggableIndex:_e,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=re(n,a.draggable,t,!0),Z("dragOver"),b.eventCanceled)return O;if(m.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||_._ignoreWhileAnimating===n)return M(!1);if(st=!1,u&&!a.disabled&&(g?p||(l=N!==k):$===this||(this.lastPutMode=Je.checkPull(this,u,m,e))&&d.checkPut(this,u,m,e))){if(I=this._getDirection(e,n)==="vertical",i=R(m),Z("dragOverValid"),b.eventCanceled)return O;if(l)return N=k,ne(),this._hideClone(),Z("revert"),b.eventCanceled||(Ne?k.insertBefore(m,Ne):k.appendChild(m)),M(!0);var X=Nt(t,a.draggable);if(!X||Kn(e,I,this)&&!X.animated){if(X===m)return M(!1);if(X&&t===e.target&&(n=X),n&&(r=R(n)),tt(k,t,m,i,n,r,e,!!n)!==!1)return ne(),X&&X.nextSibling?t.insertBefore(m,X.nextSibling):t.appendChild(m),N=t,V(),M(!0)}else if(X&&qn(e,I,this)){var ae=ze(t,0,a,!0);if(ae===m)return M(!1);if(n=ae,r=R(n),tt(k,t,m,i,n,r,e,!1)!==!1)return ne(),t.insertBefore(m,ae),N=t,V(),M(!0)}else if(n.parentNode===t){r=R(n);var B=0,le,Ee=m.parentNode!==t,G=!Ln(m.animated&&m.toRect||i,n.animated&&n.toRect||r,I),Se=I?"top":"left",se=Lt(n,"top","top")||Lt(m,"top","top"),Ce=se?se.scrollTop:void 0;Xe!==n&&(le=r[Se],qe=!1,Qe=!G&&a.invertSwap||Ee),B=Zn(e,n,r,I,G?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,Qe,Xe===n);var oe;if(B!==0){var de=te(m);do de-=B,oe=N.children[de];while(oe&&(v(oe,"display")==="none"||oe===w))}if(B===0||oe===n)return M(!1);Xe=n,Ue=B;var Oe=n.nextElementSibling,ue=!1;ue=B===1;var j=tt(k,t,m,i,n,r,e,ue);if(j!==!1)return(j===1||j===-1)&&(ue=j===1),Ct=!0,setTimeout(Un,30),ne(),ue&&!Oe?t.appendChild(m):n.parentNode.insertBefore(m,ue?Oe:n),se&&tn(se,0,Ce-se.scrollTop),N=m.parentNode,le!==void 0&&!Qe&&(it=Math.abs(le-R(n)[Se])),V(),M(!0)}if(t.contains(m))return M(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){x(document,"mousemove",this._onTouchMove),x(document,"touchmove",this._onTouchMove),x(document,"pointermove",this._onTouchMove),x(document,"dragover",Ae),x(document,"mousemove",Ae),x(document,"touchmove",Ae)},_offUpEvents:function(){var e=this.el.ownerDocument;x(e,"mouseup",this._onDrop),x(e,"touchend",this._onDrop),x(e,"pointerup",this._onDrop),x(e,"pointercancel",this._onDrop),x(e,"touchcancel",this._onDrop),x(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(ee=te(m),_e=te(m,n.draggable),q("drop",this,{evt:e}),N=m&&m.parentNode,ee=te(m),_e=te(m,n.draggable),b.eventCanceled){this._nulling();return}Ye=!1,Qe=!1,qe=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ot(this.cloneId),Ot(this._dragStartId),this.nativeDraggable&&(x(document,"drop",this),x(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),We&&v(document.body,"user-select",""),v(m,"transform",""),e&&(Ge&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),w&&w.parentNode&&w.parentNode.removeChild(w),(k===N||$&&$.lastPutMode!=="clone")&&A&&A.parentNode&&A.parentNode.removeChild(A),m&&(this.nativeDraggable&&x(m,"dragend",this),Dt(m),m.style["will-change"]="",Ge&&!Ye&&Q(m,$?$.options.ghostClass:this.options.ghostClass,!1),Q(m,this.options.chosenClass,!1),W({sortable:this,name:"unchoose",toEl:N,newIndex:null,newDraggableIndex:null,originalEvent:e}),k!==N?(ee>=0&&(W({rootEl:N,name:"add",toEl:N,fromEl:k,originalEvent:e}),W({sortable:this,name:"remove",toEl:N,originalEvent:e}),W({rootEl:N,name:"sort",toEl:N,fromEl:k,originalEvent:e}),W({sortable:this,name:"sort",toEl:N,originalEvent:e})),$&&$.save()):ee!==Be&&ee>=0&&(W({sortable:this,name:"update",toEl:N,originalEvent:e}),W({sortable:this,name:"sort",toEl:N,originalEvent:e})),b.active&&((ee==null||ee===-1)&&(ee=Be,_e=je),W({sortable:this,name:"end",toEl:N,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){q("nulling",this),k=m=N=w=Ne=A=ot=De=ke=ie=Ge=ee=_e=Be=je=Xe=Ue=$=Je=b.dragged=b.ghost=b.clone=b.active=null,ut.forEach(function(e){e.checked=!0}),ut.length=yt=Tt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":m&&(this._onDragOver(e),jn(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,i=0,r=n.length,l=this.options;i<r;i++)t=n[i],re(t,l.draggable,this.el,!1)&&e.push(t.getAttribute(l.dataIdAttr)||Qn(t));return e},sort:function(e,t){var n={},i=this.el;this.toArray().forEach(function(r,l){var a=i.children[l];re(a,this.options.draggable,i,!1)&&(n[r]=a)},this),t&&this.captureAnimationState(),e.forEach(function(r){n[r]&&(i.removeChild(n[r]),i.appendChild(n[r]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return re(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var i=Ze.modifyOption(this,e,t);typeof i<"u"?n[e]=i:n[e]=t,e==="group"&&ln(n)},destroy:function(){q("destroy",this);var e=this.el;e[K]=null,x(e,"mousedown",this._onTapStart),x(e,"touchstart",this._onTapStart),x(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(x(e,"dragover",this),x(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),dt.splice(dt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!De){if(q("hideClone",this),b.eventCanceled)return;v(A,"display","none"),this.options.removeCloneOnHide&&A.parentNode&&A.parentNode.removeChild(A),De=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(De){if(q("showClone",this),b.eventCanceled)return;m.parentNode==k&&!this.options.group.revertClone?k.insertBefore(A,m):Ne?k.insertBefore(A,Ne):k.appendChild(A),this.options.group.revertClone&&this.animate(m,A),v(A,"display",""),De=!1}}};function jn(o){o.dataTransfer&&(o.dataTransfer.dropEffect="move"),o.cancelable&&o.preventDefault()}function tt(o,e,t,n,i,r,l,a){var d,u=o[K],g=u.options.onMove,p;return window.CustomEvent&&!ye&&!Ke?d=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(d=document.createEvent("Event"),d.initEvent("move",!0,!0)),d.to=e,d.from=o,d.dragged=t,d.draggedRect=n,d.related=i||e,d.relatedRect=r||R(e),d.willInsertAfter=a,d.originalEvent=l,o.dispatchEvent(d),g&&(p=g.call(u,d,l)),p}function Dt(o){o.draggable=!1}function Un(){Ct=!1}function qn(o,e,t){var n=R(ze(t.el,0,t.options,!0)),i=on(t.el,t.options,w),r=10;return e?o.clientX<i.left-r||o.clientY<n.top&&o.clientX<n.right:o.clientY<i.top-r||o.clientY<n.bottom&&o.clientX<n.left}function Kn(o,e,t){var n=R(Nt(t.el,t.options.draggable)),i=on(t.el,t.options,w),r=10;return e?o.clientX>i.right+r||o.clientY>n.bottom&&o.clientX>n.left:o.clientY>i.bottom+r||o.clientX>n.right&&o.clientY>n.top}function Zn(o,e,t,n,i,r,l,a){var d=n?o.clientY:o.clientX,u=n?t.height:t.width,g=n?t.top:t.left,p=n?t.bottom:t.right,y=!1;if(!l){if(a&&it<u*i){if(!qe&&(Ue===1?d>g+u*r/2:d<p-u*r/2)&&(qe=!0),qe)y=!0;else if(Ue===1?d<g+it:d>p-it)return-Ue}else if(d>g+u*(1-i)/2&&d<p-u*(1-i)/2)return Jn(e)}return y=y||l,y&&(d<g+u*r/2||d>p-u*r/2)?d>g+u/2?1:-1:0}function Jn(o){return te(m)<te(o)?1:-1}function Qn(o){for(var e=o.tagName+o.className+o.src+o.href+o.textContent,t=e.length,n=0;t--;)n+=e.charCodeAt(t);return n.toString(36)}function eo(o){ut.length=0;for(var e=o.getElementsByTagName("input"),t=e.length;t--;){var n=e[t];n.checked&&ut.push(n)}}function rt(o){return setTimeout(o,0)}function Ot(o){return clearTimeout(o)}ft&&C(document,"touchmove",function(o){(b.active||Ye)&&o.cancelable&&o.preventDefault()});b.utils={on:C,off:x,css:v,find:Qt,is:function(e,t){return!!re(e,t,e,!1)},extend:Rn,throttle:en,closest:re,toggleClass:Q,clone:nn,index:te,nextTick:rt,cancelNextTick:Ot,detectDirection:an,getChild:ze,expando:K};b.get=function(o){return o[K]};b.mount=function(){for(var o=arguments.length,e=new Array(o),t=0;t<o;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(b.utils=he(he({},b.utils),n.utils)),Ze.mount(n)})};b.create=function(o,e){return new b(o,e)};b.version=Mn;var F=[],He,It,kt=!1,xt,Et,ct,Le;function to(){function o(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return o.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?C(document,"dragover",this._handleAutoScroll):this.options.supportPointer?C(document,"pointermove",this._handleFallbackAutoScroll):n.touches?C(document,"touchmove",this._handleFallbackAutoScroll):C(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?x(document,"dragover",this._handleAutoScroll):(x(document,"pointermove",this._handleFallbackAutoScroll),x(document,"touchmove",this._handleFallbackAutoScroll),x(document,"mousemove",this._handleFallbackAutoScroll)),qt(),at(),Xn()},nulling:function(){ct=It=He=kt=Le=xt=Et=null,F.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var i=this,r=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(r,l);if(ct=t,n||this.options.forceAutoScrollFallback||Ke||ye||We){St(t,this.options,a,n);var d=xe(a,!0);kt&&(!Le||r!==xt||l!==Et)&&(Le&&qt(),Le=setInterval(function(){var u=xe(document.elementFromPoint(r,l),!0);u!==d&&(d=u,at()),St(t,i.options,u,n)},10),xt=r,Et=l)}else{if(!this.options.bubbleScroll||xe(a,!0)===me()){at();return}St(t,this.options,xe(a,!1),!1)}}},we(o,{pluginName:"scroll",initializeByDefault:!0})}function at(){F.forEach(function(o){clearInterval(o.pid)}),F=[]}function qt(){clearInterval(Le)}var St=en(function(o,e,t,n){if(e.scroll){var i=(o.touches?o.touches[0]:o).clientX,r=(o.touches?o.touches[0]:o).clientY,l=e.scrollSensitivity,a=e.scrollSpeed,d=me(),u=!1,g;It!==t&&(It=t,at(),He=e.scroll,g=e.scrollFn,He===!0&&(He=xe(t,!0)));var p=0,y=He;do{var I=y,_=R(I),O=_.top,Z=_.bottom,ne=_.left,M=_.right,V=_.width,X=_.height,ae=void 0,B=void 0,le=I.scrollWidth,Ee=I.scrollHeight,G=v(I),Se=I.scrollLeft,se=I.scrollTop;I===d?(ae=V<le&&(G.overflowX==="auto"||G.overflowX==="scroll"||G.overflowX==="visible"),B=X<Ee&&(G.overflowY==="auto"||G.overflowY==="scroll"||G.overflowY==="visible")):(ae=V<le&&(G.overflowX==="auto"||G.overflowX==="scroll"),B=X<Ee&&(G.overflowY==="auto"||G.overflowY==="scroll"));var Ce=ae&&(Math.abs(M-i)<=l&&Se+V<le)-(Math.abs(ne-i)<=l&&!!Se),oe=B&&(Math.abs(Z-r)<=l&&se+X<Ee)-(Math.abs(O-r)<=l&&!!se);if(!F[p])for(var de=0;de<=p;de++)F[de]||(F[de]={});(F[p].vx!=Ce||F[p].vy!=oe||F[p].el!==I)&&(F[p].el=I,F[p].vx=Ce,F[p].vy=oe,clearInterval(F[p].pid),(Ce!=0||oe!=0)&&(u=!0,F[p].pid=setInterval((function(){n&&this.layer===0&&b.active._onTouchMove(ct);var Oe=F[this.layer].vy?F[this.layer].vy*a:0,ue=F[this.layer].vx?F[this.layer].vx*a:0;typeof g=="function"&&g.call(b.dragged.parentNode[K],ue,Oe,o,ct,F[this.layer].el)!=="continue"||tn(F[this.layer].el,ue,Oe)}).bind({layer:p}),24))),p++}while(e.bubbleScroll&&y!==d&&(y=xe(y,!1)));kt=u}},30),un=function(e){var t=e.originalEvent,n=e.putSortable,i=e.dragEl,r=e.activeSortable,l=e.dispatchSortableEvent,a=e.hideGhostForTarget,d=e.unhideGhostForTarget;if(t){var u=n||r;a();var g=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,p=document.elementFromPoint(g.clientX,g.clientY);d(),u&&!u.el.contains(p)&&(l("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function Pt(){}Pt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=ze(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:un};we(Pt,{pluginName:"revertOnSpill"});function Mt(){}Mt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,i=n||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:un};we(Mt,{pluginName:"removeOnSpill"});b.mount(new to);b.mount(Mt,Pt);const no={class:"page-background content-scroller"},oo={class:"pt-25 w-full z-10 shadow-md bg-header text-rice-500"},io={class:"container mx-auto flex items-center p-4"},ro={class:"w-1/3"},ao={class:"text"},lo={class:"max-w-4xl mx-auto p-4 pt-10 text-[1.2rem]"},so={class:"flex flex-col gap-4"},uo={key:0,class:"text-red-500 text-sm mt-1"},co={class:"flex flex-row gap-5"},fo={class:"w-1/2"},mo={key:0,class:"text-red-500 text-sm mt-1"},ho={class:"w-1/2"},po={key:0,class:"text-red-500 text-sm mt-1"},go={key:0,class:"text-red-500 text-sm mt-1"},vo={class:"mt-2 relative"},bo={class:"relative"},wo=["onClick"],yo=["placeholder"],To=["onClick"],_o={key:0,class:"px-3 py-2 text-gray-500"},Do={key:0,class:"text-red-500 text-sm mt-1"},xo={class:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md"},Eo={class:"flex items-center gap-2 text-sm text-blue-800"},So={key:0},Co={key:1},Oo={key:2,class:"text-orange-600"},Io={key:0,class:"mt-4"},ko={class:"bg-white border border-gray-200 rounded-md p-4"},Ao={class:"relative"},No={class:"h-8 bg-gray-100 rounded-full relative overflow-hidden"},Po=["onClick","title"],Mo={class:"text-xs text-white font-medium p-1 truncate"},Fo={class:"flex justify-between mt-2 text-xs text-gray-500"},Ro={key:0},Xo={key:1},Yo={class:"mt-3 flex flex-wrap gap-2 text-xs"},Bo={key:0,class:"flex items-center gap-1"},$o={class:"flex flex-row gap-4"},zo={class:"mt-4 p-4 border border-gray-200 rounded-md"},Go={class:"flex flex-col gap-3"},Ho={class:"flex gap-3"},Lo={class:"flex-1"},Wo=["min","max"],Vo={key:0,class:"text-orange-500 text-xs mt-1"},jo={class:"flex-1"},Uo=["min","max"],qo={key:0,class:"text-orange-500 text-xs mt-1"},Ko={key:0,class:"p-2 bg-yellow-50 border border-yellow-200 rounded text-sm"},Zo={class:"text-yellow-700 text-xs space-y-1"},Jo=["disabled"],Qo={key:0,class:"mt-4"},ei={class:"flex items-center justify-between mb-3"},ti={class:"text-sm font-medium text-gray-700"},ni=["data-id"],oi={class:"flex items-start justify-between"},ii={class:"flex-1"},ri={class:"flex items-center gap-2"},ai={class:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full font-medium"},li={class:"font-medium text-gray-900"},si={class:"mt-2 text-sm"},di={key:0,class:"text-gray-600"},ui={class:"text-gray-400 ml-2"},ci={key:1,class:"text-orange-500"},fi={key:2,class:"text-red-500 text-xs mt-1"},mi={class:"flex items-center gap-2 ml-4"},hi=["onClick"],pi=["onClick"],gi={key:0,class:"mt-4 pt-4 border-t border-gray-200 bg-gray-50 -mx-4 -mb-4 px-4 pb-4 rounded-b-lg"},vi={class:"flex gap-3"},bi={class:"flex-1"},wi=["min","max"],yi={class:"flex-1"},Ti=["min","max"],_i={class:"flex gap-2 mt-3"},Di=["onClick","disabled"],xi={__name:"ActionNew",setup(o){Dn();const{formatISO:e}=In(),t=ge({title:"",content:"",intro:"",startTime:"",endTime:"",sdgs_goals:[],stages:[],cover_image_url:null}),n=kn.filter(f=>f.value!==0).map(f=>({...f,title:f.title.replace(/<br\s*\/?>/g,"")})),i=ge(""),r=ge(!1),l=ge(null),a=ge({name:"",startTime:"",endTime:""}),d=ge(-1),u=ge({startTime:"",endTime:""}),g=ge(null);let p=null;const y=J(()=>i.value?n.filter(f=>f.title.toLowerCase().includes(i.value.toLowerCase())&&!t.value.sdgs_goals.includes(f.value)):n.filter(f=>!t.value.sdgs_goals.includes(f.value))),I=J(()=>n.filter(f=>t.value.sdgs_goals.includes(f.value))),_=J(()=>!t.value.startTime||!t.value.endTime?!1:new Date(t.value.startTime)>new Date(t.value.endTime)),O=J(()=>a.value.name.trim()&&a.value.startTime&&a.value.endTime&&new Date(a.value.startTime)<=new Date(a.value.endTime)&&Pe(a.value)),Z=J(()=>t.value.startTime),ne=J(()=>!!t.value.endTime),M=J(()=>t.value.startTime),V=J(()=>t.value.endTime||Ft()),X=J(()=>t.value.stages.filter(f=>f.startTime&&f.endTime)),ae=J(()=>{const f=[],s=[...X.value].sort((T,h)=>new Date(T.startTime)-new Date(h.startTime));for(let T=0;T<s.length-1;T++){const h=s[T],D=s[T+1];new Date(h.endTime)>new Date(D.startTime)&&f.push({start:D.startTime,end:h.endTime<D.endTime?h.endTime:D.endTime})}return f}),B=J(()=>{const f={start:"",end:""};return a.value.startTime&&(t.value.startTime&&new Date(a.value.startTime)<new Date(t.value.startTime)&&(f.start="開始時間不能早於行動開始時間"),t.value.endTime&&new Date(a.value.startTime)>new Date(t.value.endTime)&&(f.start="開始時間不能晚於行動結束時間")),a.value.endTime&&t.value.endTime&&new Date(a.value.endTime)>new Date(t.value.endTime)&&(f.end="結束時間不能晚於行動結束時間"),f}),le=J(()=>{const f=[];if(!a.value.startTime||!a.value.endTime)return f;const s=new Date(a.value.startTime),T=new Date(a.value.endTime);return X.value.forEach((h,D)=>{const P=new Date(h.startTime),H=new Date(h.endTime);(s>=P&&s<H||T>P&&T<=H||s<=P&&T>=H)&&f.push(`與「${h.name}」時間重疊`)}),f}),Ee=J(()=>u.value.startTime&&u.value.endTime&&new Date(u.value.startTime)<=new Date(u.value.endTime)),G=f=>{t.value.sdgs_goals.includes(f.value)||t.value.sdgs_goals.push(f.value),i.value="",r.value=!1},Se=f=>{const s=t.value.sdgs_goals.indexOf(f);s!==-1&&t.value.sdgs_goals.splice(s,1)},se=()=>{},Ce=()=>{if(!O.value)return;const f=Date.now().toString();t.value.stages.push({id:f,name:a.value.name.trim(),startTime:a.value.startTime,endTime:a.value.endTime}),a.value={name:"",startTime:"",endTime:""}},oe=f=>{t.value.stages.splice(f,1),d.value===f?d.value=-1:d.value>f&&d.value--},de=f=>{d.value=f;const s=t.value.stages[f];u.value={startTime:s.startTime||"",endTime:s.endTime||""}},Oe=f=>{u.value.startTime&&u.value.endTime?new Date(u.value.startTime)<=new Date(u.value.endTime)?(t.value.stages[f].startTime=u.value.startTime,t.value.stages[f].endTime=u.value.endTime,d.value=-1):alert("結束時間必須晚於或等於開始時間"):alert("請填寫完整的時間資訊")},ue=()=>{d.value=-1,u.value={startTime:"",endTime:""}},j=f=>f?new Date(f).toLocaleDateString("zh-TW"):"",Ie=()=>{if(!t.value.startTime||!t.value.endTime)return"";const f=new Date(t.value.startTime),s=new Date(t.value.endTime),T=Math.abs(s-f);return`${Math.ceil(T/(1e3*60*60*24))} 天`},mt=(f,s)=>{if(!f||!s)return"";const T=new Date(f),h=new Date(s),D=Math.abs(h-T);return`${Math.ceil(D/(1e3*60*60*24))} 天`},Ft=()=>{if(!t.value.startTime)return null;const f=new Date(t.value.startTime);return f.setMonth(f.getMonth()+3),f.toISOString().split("T")[0]},Pe=f=>!(!f.startTime||!f.endTime||t.value.startTime&&new Date(f.startTime)<new Date(t.value.startTime)||t.value.endTime&&new Date(f.endTime)>new Date(t.value.endTime)),ht=(f,s)=>{const T=Rt(),h=new Date(f.startTime),D=new Date(f.endTime),P=new Date(M.value),H=Math.max(0,(h-P)/T*100),pe=(D-h)/T*100;return{left:`${H}%`,width:`${pe}%`,zIndex:10+s}},cn=f=>{const s=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-red-500"];return s[f%s.length]},fn=f=>{const s=Rt(),T=new Date(f.start),h=new Date(f.end),D=new Date(M.value),P=Math.max(0,(T-D)/s*100),H=(h-T)/s*100;return{left:`${P}%`,width:`${H}%`,zIndex:100}},Rt=()=>{const f=new Date(M.value);return new Date(V.value)-f},mn=f=>t.value.stages.findIndex(s=>s.id===f.id),hn=(f,s)=>{let T=[];return!f.startTime||!f.endTime?T.push("border-orange-300 bg-orange-50"):Pe(f)?T.push("border-gray-200"):T.push("border-red-300 bg-red-50"),X.value.some((D,P)=>{if(D.id===f.id)return!1;const H=new Date(f.startTime),pe=new Date(f.endTime),pt=new Date(D.startTime),gt=new Date(D.endTime);return H>=pt&&H<gt||pe>pt&&pe<=gt||H<=pt&&pe>=gt})&&T.push("border-yellow-300 bg-yellow-50"),T.join(" ")},Xt=(f,s)=>{if(!f.startTime||!f.endTime)return"";if(!Pe(f)){if(t.value.startTime&&new Date(f.startTime)<new Date(t.value.startTime))return"開始時間早於行動開始時間";if(t.value.endTime&&new Date(f.endTime)>new Date(t.value.endTime))return"結束時間晚於行動結束時間"}const T=X.value.filter(h=>{if(h.id===f.id)return!1;const D=new Date(f.startTime),P=new Date(f.endTime),H=new Date(h.startTime),pe=new Date(h.endTime);return D>=H&&D<pe||P>H&&P<=pe||D<=H&&P>=pe});return T.length>0?`與「${T[0].name}」${T.length>1?"等階段":""}時間重疊`:""},pn=()=>{g.value&&(p=b.create(g.value,{handle:".sortable-item",animation:150,onEnd:f=>{const{oldIndex:s,newIndex:T}=f;if(s!==T){const h=t.value.stages.splice(s,1)[0];t.value.stages.splice(T,0,h),t.value.stages.forEach(D=>{D.startTime="",D.endTime=""}),d.value=-1}}}))},U=ge({title:!1,sdgs_goals:!1,content:!1,startTime:!1,endTime:!1,timeRange:!1}),Yt=En({content:"<p>開始寫下你的故事...</p>",extensions:[Sn,Cn,On.configure({nested:!0})]});bn(l,()=>{r.value=!1}),wn(()=>{setTimeout(()=>{pn()},100)}),yn(()=>{Yt.value&&Yt.value.destroy(),p&&p.destroy()});const gn=async()=>{U.value={title:!1,sdgs_goals:!1,content:!1,startTime:!1,endTime:!1,timeRange:!1};let f=!1;if(t.value.startTime||(U.value.startTime=!0,f=!0),t.value.endTime||(U.value.endTime=!0,f=!0),_.value&&(U.value.timeRange=!0,f=!0),t.value.title.trim()||(U.value.title=!0,f=!0),t.value.sdgs_goals.length===0&&(U.value.sdgs_goals=!0,f=!0),f)return;const s=Math.floor(new Date(t.value.startTime).getTime()/1e3),T=Math.floor(new Date(t.value.endTime).getTime()/1e3),h={...t.value,startTime:e(s),endTime:e(T)};console.log("New Action Data:",h);try{let D=await _n.createActivity(h);console.log(D)}catch{}};return(f,s)=>{const T=Tn("router-link");return S(),E("div",no,[c("header",oo,[c("div",io,[c("div",ro,[Bt(T,{to:"/actions",class:"back-home-btn"},{default:vt(()=>[c("span",ao,[Bt(xn,{align:"left"},{zh:vt(()=>[...s[11]||(s[11]=[ve("取消",-1)])]),en:vt(()=>[...s[12]||(s[12]=[ve("Cancel",-1)])]),_:1})]),s[13]||(s[13]=c("span",{class:"icon"},"←",-1))]),_:1})]),s[14]||(s[14]=c("div",{class:"w-1/3 text-center"},[c("h1",{class:"text-2xl md:text-3xl font-bold"},"建立行動")],-1)),s[15]||(s[15]=c("div",{class:"w-1/3"},null,-1))])]),c("main",lo,[c("div",so,[c("div",null,[s[16]||(s[16]=c("label",{for:"title",class:"block text-lg font-medium"},"標題*",-1)),ce(c("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=h=>t.value.title=h),id:"title",class:Te(["mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":U.value.title}])},null,2),[[fe,t.value.title]]),U.value.title?(S(),E("p",uo," 請輸入標題 ")):L("",!0)]),c("div",co,[c("div",fo,[s[17]||(s[17]=c("label",{for:"startTime",class:"block text-lg font-medium"},"起始時間*",-1)),ce(c("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=h=>t.value.startTime=h),id:"startTime",class:Te(["mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":U.value.startTime}])},null,2),[[fe,t.value.startTime]]),U.value.startTime?(S(),E("p",mo," 請輸入起始時間 ")):L("",!0)]),c("div",ho,[s[18]||(s[18]=c("label",{for:"endTime",class:"block text-lg font-medium"},"結束時間*",-1)),ce(c("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=h=>t.value.endTime=h),id:"endTime",class:Te(["mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":U.value.endTime}])},null,2),[[fe,t.value.endTime]]),U.value.endTime?(S(),E("p",po," 請輸入結束時間 ")):L("",!0)])]),_.value?(S(),E("p",go," 結束時間必須晚於起始時間 ")):L("",!0),c("div",null,[s[19]||(s[19]=c("label",{class:"block text-lg font-medium"},"SDGs標籤*",-1)),c("div",vo,[c("div",bo,[c("div",{class:Te(["flex flex-wrap items-center gap-1 p-2 border border-gray-300 rounded-md shadow-sm focus-within:ring-indigo-500 focus-within:border-indigo-500 min-h-[2.5rem]",{"border-red-500":U.value.sdgs_goals}])},[(S(!0),E(Me,null,Fe(I.value,h=>(S(),E("span",{key:h.value,class:"inline-flex items-center px-2 py-1 text-sm bg-blue-500 text-white rounded-full"},[c("span",null,Y(h.title),1),c("button",{onClick:D=>Se(h.value),class:"ml-1 text-white hover:text-gray-200"}," × ",8,wo)]))),128)),ce(c("input",{type:"text","onUpdate:modelValue":s[3]||(s[3]=h=>i.value=h),onFocus:s[4]||(s[4]=h=>r.value=!0),onInput:se,class:"flex-1 min-w-0 outline-none bg-transparent",placeholder:I.value.length===0?"搜尋SDGs標籤...":"",ref:"searchInput"},null,40,yo),[[fe,i.value]])],2),r.value?(S(),E("div",{key:0,ref_key:"dropdown",ref:l,class:"absolute z-10 w-full bg-pblue-200 border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto mt-1"},[(S(!0),E(Me,null,Fe(y.value,h=>(S(),E("div",{key:h.value,onClick:D=>G(h),class:"px-3 py-2 hover:bg-orange-300 cursor-pointer"},Y(h.title),9,To))),128)),y.value.length===0?(S(),E("div",_o," 無匹配的標籤 ")):L("",!0)],512)):L("",!0)]),U.value.sdgs_goals?(S(),E("p",Do," 請至少選擇一個SDGs標籤 ")):L("",!0)])]),c("div",null,[s[20]||(s[20]=c("label",{for:"intro",class:"block text-lg font-medium"},"描述",-1)),ce(c("input",{type:"text","onUpdate:modelValue":s[5]||(s[5]=h=>t.value.intro=h),id:"intro",class:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[fe,t.value.intro]])]),c("div",null,[s[43]||(s[43]=c("label",{class:"block text-lg font-medium"},"階段規劃",-1)),c("div",xo,[c("div",Eo,[s[21]||(s[21]=c("i",{class:"fa-solid fa-info-circle"},null,-1)),t.value.startTime&&t.value.endTime?(S(),E("span",So," 行動期間："+Y(j(t.value.startTime))+" 至 "+Y(j(t.value.endTime))+" （"+Y(Ie())+"） ",1)):t.value.startTime?(S(),E("span",Co," 行動起始："+Y(j(t.value.startTime))+"（無結束期限） ",1)):(S(),E("span",Oo," 請先設定行動時間以便規劃階段 "))])]),t.value.stages.length>0&&Z.value?(S(),E("div",Io,[s[25]||(s[25]=c("div",{class:"text-sm font-medium text-gray-700 mb-2"}," 時間軸視覺化 ",-1)),c("div",ko,[c("div",Ao,[c("div",No,[(S(!0),E(Me,null,Fe(X.value,(h,D)=>(S(),E("div",{key:h.id,style:$t(ht(h,D)),class:Te(["absolute h-full rounded transition-all duration-300 hover:opacity-80 cursor-pointer border-2 border-white",cn(D)]),onClick:P=>de(mn(h)),title:`${h.name}: ${j(h.startTime)} - ${j(h.endTime)}`},[c("div",Mo,Y(h.name),1)],14,Po))),128)),(S(!0),E(Me,null,Fe(ae.value,h=>(S(),E("div",{key:`overlap-${h.start}-${h.end}`,style:$t(fn(h)),class:"absolute h-full bg-red-500 opacity-70 border-2 border-red-600",title:"時間重疊"},null,4))),128))]),c("div",Fo,[c("span",null,Y(j(M.value)),1),ne.value?(S(),E("span",Ro,Y(j(V.value)),1)):(S(),E("span",Xo,"進行中..."))])]),c("div",Yo,[s[23]||(s[23]=c("div",{class:"flex items-center gap-1"},[c("div",{class:"w-3 h-3 bg-blue-500 rounded"}),c("span",null,"已規劃階段")],-1)),s[24]||(s[24]=c("div",{class:"flex items-center gap-1"},[c("div",{class:"w-3 h-3 bg-gray-300 rounded"}),c("span",null,"空檔期間")],-1)),ae.value.length>0?(S(),E("div",Bo,[...s[22]||(s[22]=[c("div",{class:"w-3 h-3 bg-red-500 rounded"},null,-1),c("span",null,"時間重疊",-1)])])):L("",!0)])])])):L("",!0),c("section",$o,[c("div",zo,[s[31]||(s[31]=c("h3",{class:"text-md font-medium mb-3"},"新增階段",-1)),c("div",Go,[c("div",null,[s[26]||(s[26]=c("label",{for:"newStageName",class:"block text-sm font-medium"},"階段名稱",-1)),ce(c("input",{type:"text","onUpdate:modelValue":s[6]||(s[6]=h=>a.value.name=h),id:"newStageName",placeholder:"輸入階段名稱",class:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[fe,a.value.name]])]),c("div",Ho,[c("div",Lo,[s[27]||(s[27]=c("label",{for:"newStageStartTime",class:"block text-sm font-medium"},"開始時間",-1)),ce(c("input",{type:"date","onUpdate:modelValue":s[7]||(s[7]=h=>a.value.startTime=h),id:"newStageStartTime",min:t.value.startTime,max:t.value.endTime,class:Te(["mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",{"border-orange-500":B.value.start}])},null,10,Wo),[[fe,a.value.startTime]]),B.value.start?(S(),E("p",Vo,Y(B.value.start),1)):L("",!0)]),c("div",jo,[s[28]||(s[28]=c("label",{for:"newStageEndTime",class:"block text-sm font-medium"},"結束時間",-1)),ce(c("input",{type:"date","onUpdate:modelValue":s[8]||(s[8]=h=>a.value.endTime=h),id:"newStageEndTime",min:a.value.startTime||t.value.startTime,max:t.value.endTime,class:Te(["mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",{"border-orange-500":B.value.end}])},null,10,Uo),[[fe,a.value.endTime]]),B.value.end?(S(),E("p",qo,Y(B.value.end),1)):L("",!0)])]),le.value.length>0?(S(),E("div",Ko,[s[29]||(s[29]=c("div",{class:"text-yellow-800 font-medium mb-1"}," ⚠️ 時間衝突警告： ",-1)),c("ul",Zo,[(S(!0),E(Me,null,Fe(le.value,h=>(S(),E("li",{key:h},Y(h),1))),128))])])):L("",!0),c("button",{onClick:Ce,disabled:!O.value,class:"self-start bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-sm transition-colors"},[...s[30]||(s[30]=[c("i",{class:"fa-solid fa-plus mr-1"},null,-1),ve(" 新增階段 ",-1)])],8,Jo)])]),t.value.stages.length>0?(S(),E("div",Qo,[c("div",ei,[c("div",ti," 已規劃階段 ("+Y(t.value.stages.length)+") ",1),s[32]||(s[32]=c("div",{class:"text-xs text-gray-500"},"可拖曳調整順序",-1))]),c("div",{ref_key:"sortableContainer",ref:g,class:"space-y-3"},[(S(!0),E(Me,null,Fe(t.value.stages,(h,D)=>(S(),E("div",{key:h.id,"data-id":h.id,class:Te(["sortable-item p-4 border rounded-lg bg-white hover:shadow-md transition-all duration-200",hn(h)])},[c("div",oi,[c("div",ii,[c("div",ri,[c("span",ai," 第"+Y(D+1)+"階段 ",1),c("div",li,Y(h.name),1)]),c("div",si,[h.startTime&&h.endTime?(S(),E("div",di,[s[33]||(s[33]=c("i",{class:"fa-solid fa-calendar mr-1"},null,-1)),ve(" "+Y(j(h.startTime))+" 至 "+Y(j(h.endTime))+" ",1),c("span",ui," ("+Y(mt(h.startTime,h.endTime))+") ",1)])):(S(),E("div",ci,[...s[34]||(s[34]=[c("i",{class:"fa-solid fa-exclamation-triangle mr-1"},null,-1),ve(" 請設定時間 ",-1)])])),Xt(h)?(S(),E("div",fi,Y(Xt(h)),1)):L("",!0)])]),c("div",mi,[c("button",{onClick:P=>de(D),class:"text-blue-500 hover:text-blue-700 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",title:"編輯時間"},[...s[35]||(s[35]=[c("i",{class:"fa-solid fa-edit mr-1"},null,-1),ve("編輯 ",-1)])],8,hi),c("button",{onClick:P=>oe(D),class:"text-red-500 hover:text-red-700 text-sm px-2 py-1 rounded hover:bg-red-50 transition-colors",title:"刪除階段"},[...s[36]||(s[36]=[c("i",{class:"fa-solid fa-trash mr-1"},null,-1),ve("刪除 ",-1)])],8,pi),s[37]||(s[37]=c("div",{class:"text-gray-400 cursor-move px-2 py-1 hover:text-gray-600",title:"拖曳排序"},[c("i",{class:"fa-solid fa-grip-vertical"})],-1))])]),d.value===D?(S(),E("div",gi,[s[42]||(s[42]=c("div",{class:"text-sm font-medium text-gray-700 mb-3"}," 編輯階段時間 ",-1)),c("div",vi,[c("div",bi,[s[38]||(s[38]=c("label",{class:"block text-sm font-medium text-gray-700"},"開始時間",-1)),ce(c("input",{type:"date","onUpdate:modelValue":s[9]||(s[9]=P=>u.value.startTime=P),min:t.value.startTime,max:t.value.endTime,class:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,8,wi),[[fe,u.value.startTime]])]),c("div",yi,[s[39]||(s[39]=c("label",{class:"block text-sm font-medium text-gray-700"},"結束時間",-1)),ce(c("input",{type:"date","onUpdate:modelValue":s[10]||(s[10]=P=>u.value.endTime=P),min:u.value.startTime||t.value.startTime,max:t.value.endTime,class:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,8,Ti),[[fe,u.value.endTime]])])]),c("div",_i,[c("button",{onClick:P=>Oe(D),disabled:!Ee.value,class:"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},[...s[40]||(s[40]=[c("i",{class:"fa-solid fa-check mr-1"},null,-1),ve("儲存 ",-1)])],8,Di),c("button",{onClick:ue,class:"bg-gray-500 text-white px-3 py-1 rounded text-sm hover:bg-gray-600 transition-colors"},[...s[41]||(s[41]=[c("i",{class:"fa-solid fa-times mr-1"},null,-1),ve("取消 ",-1)])])])])):L("",!0)],10,ni))),128))],512)])):L("",!0)])]),c("div",{class:"self-end"},[c("button",{onClick:gn,class:"bg-green-500 text-white px-6 py-2 rounded-md hover:bg-green-600"}," 儲存 ")])])])])}}},ki=vn(xi,[["__scopeId","data-v-2d01b60a"]]);export{ki as default};
