import{r,u as N,k as _,l as D,c as k,a as n,o as u,b as o,d as E,w as F,e as m,v as b,m as x,F as h,p as V,q as T,n as A,t as y,f as z,g as I,h as L,i as O,j as P}from"./index-DSeoTcbi.js";const q={台北市:["松山國小","信義國小","大安國小","中山國小","中正國小","大同國小","萬華國小","文山國小","南港國小","內湖國小","士林國小","北投國小"],彰化縣:["員林國小","南郭國小","和美國小","鹿港國小","溪湖國小","二林國小","田中國小","北斗國小","花壇國小","芬園國小","大村國小","永靖國小","伸港國小","線西國小","大嘉國小","嘉犁國小","忠孝國小","平和國小"],台中市:["台中市忠孝國小","台中市東勢國小","台中市豐原國小","台中市后里國小","台中市石岡國小","台中市新社國小","台中市和平國小","台中市大甲國小","台中市外埔國小","台中市大安國小"],高雄市:["高雄市鹽埕國小","高雄市鼓山國小","高雄市左營國小","高雄市楠梓國小","高雄市三民國小","高雄市新興國小","高雄市前金國小","高雄市苓雅國小","高雄市前鎮國小","高雄市旗津國小"],台南市:["台南市後甲國小","台南市鹽行國小","台南市下營國小","台南市柳營國小","台南市六甲國小","台南市官田國小","台南市大內國小","台南市玉井國小","台南市楠西國小","台南市南化國小"],新北市:["新北市板橋國小","新北市三重國小","新北市中和國小","新北市永和國小","新北市新莊國小","新北市新店國小","新北市樹林國小","新北市鶯歌國小","新北市三峽國小","新北市淡水國小"]},W=()=>Object.keys(q),$=w=>q[w]||[],G={class:"flex items-center justify-center min-h-screen bg-gray-100"},H={class:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md"},J={class:"space-y-4"},K={class:"flex flex-row gap-4"},Q=["value"],X=["disabled"],Y=["value"],Z={class:"mt-6"},ee=["disabled"],oe={key:0},te={key:1},se={class:"text-sm text-center"},ae={__name:"Register",setup(w){const v=r(""),g=r(""),c=r(""),d=r(""),p=r(""),f=r("student"),l=r(!1),s=r(""),a=r(!1),S=N(),R=P();_(async()=>{try{let i=await D.getInstitutions();console.log(i)}catch(i){console.error("Failed to fetch institutions:",i)}});const U=W(),C=k(()=>d.value?$(d.value):[]),M=async()=>{if(l.value=!0,s.value="",a.value=!1,!v.value.trim()){s.value="請輸入姓名",a.value=!0,l.value=!1,console.log(s.value);return}if(!g.value.trim()){s.value="請輸入電子郵件",a.value=!0,l.value=!1;return}if(!c.value.trim()){s.value="請輸入密碼",a.value=!0,l.value=!1;return}if(!d.value){s.value="請選擇地區",a.value=!0,l.value=!1;return}if(!p.value){s.value="請選擇學校",a.value=!0,l.value=!1;return}const{success:i,message:e}=await S.registerWithEmailAndPassword(v.value,g.value,c.value,p.value,f.value);l.value=!1,i?(s.value="註冊成功！將為您跳轉到登入頁面...",setTimeout(()=>{R.push("/login")},2e3)):(s.value=`註冊失敗: ${e}`,a.value=!0)},j=k(()=>({"bg-red-100 text-red-700":a.value,"bg-green-100 text-green-700":!a.value}));return(i,e)=>{const B=O("router-link");return u(),n("div",G,[o("div",H,[e[15]||(e[15]=o("h2",{class:"text-2xl font-bold text-center text-gray-900"},"註冊新帳號",-1)),o("form",{onSubmit:F(M,["prevent"]),novalidate:""},[o("div",J,[o("div",null,[e[6]||(e[6]=o("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"姓名",-1)),m(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>v.value=t),id:"username",required:"",class:"block w-full px-3 py-2 mt-1 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-md shadow-sm appearance-none focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[b,v.value]])]),o("div",null,[e[8]||(e[8]=o("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"身分",-1)),m(o("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>f.value=t),id:"role",required:"",class:"block w-full px-3 py-2 mt-1 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-md shadow-sm appearance-none focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[...e[7]||(e[7]=[o("option",{value:"student"},"學生",-1),o("option",{value:"teacher"},"老師",-1),o("option",{value:"admin"},"管理員",-1)])],512),[[x,f.value]])]),o("div",null,[e[9]||(e[9]=o("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"電子郵件",-1)),m(o("input",{type:"email","onUpdate:modelValue":e[2]||(e[2]=t=>g.value=t),id:"email",required:"",class:"block w-full px-3 py-2 mt-1 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-md shadow-sm appearance-none focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[b,g.value]])]),o("div",null,[e[12]||(e[12]=o("label",{for:"school",class:"block text-sm font-medium text-gray-700"},"學校",-1)),o("div",K,[m(o("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>d.value=t),id:"region",required:"",class:"block w-full px-3 py-2 mt-1 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-md shadow-sm appearance-none focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[e[10]||(e[10]=o("option",{value:""},"請選擇地區",-1)),(u(!0),n(h,null,V(T(U),t=>(u(),n("option",{key:t,value:t},y(t),9,Q))),128))],512),[[x,d.value]]),m(o("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>p.value=t),id:"school",required:"",disabled:!d.value,class:"block w-full px-3 py-2 mt-1 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-md shadow-sm appearance-none focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"},[e[11]||(e[11]=o("option",{value:""},"請先選擇地區",-1)),(u(!0),n(h,null,V(C.value,t=>(u(),n("option",{key:t,value:t},y(t),9,Y))),128))],8,X),[[x,p.value]])])]),o("div",null,[e[13]||(e[13]=o("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"密碼",-1)),m(o("input",{type:"password","onUpdate:modelValue":e[5]||(e[5]=t=>c.value=t),id:"password",required:"",class:"block w-full px-3 py-2 mt-1 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-md shadow-sm appearance-none focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[b,c.value]])])]),o("div",Z,[o("button",{type:"submit",disabled:l.value,class:"flex justify-center w-full px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-gray-400"},[l.value?(u(),n("span",oe,"註冊中...")):(u(),n("span",te,"註冊"))],8,ee)])],32),s.value?(u(),n("div",{key:0,class:A([j.value,"p-4 mt-4 text-sm rounded-md"])},y(s.value),3)):E("",!0),o("div",se,[z(B,{to:"/login",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:I(()=>[...e[14]||(e[14]=[L("已經有帳號了？ 登入",-1)])]),_:1})])])])}}};export{ae as default};
