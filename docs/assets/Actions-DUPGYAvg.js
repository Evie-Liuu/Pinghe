import{e as F,f as H,r as f,g as C,w as U,c as d,o as u,b as e,a as _,F as P,h as I,i as S,v as E,t as y,j as M,u as R,k as v,l as w,m as c,n as B,p as O,q as z,s as q,x as G,y as J,z as K}from"./index-CWaBl_E8.js";import{t as L}from"./SDGs_goal-D1XSLY4x.js";import{C as T}from"./CJKSub-CXK5C8v8.js";const X=[{id:1,title:"剩食問題",group:"一年忠班",startTime:"1746028800",endTime:"1753977600",types:[2],intro:"",progress:10,thumbnail:"thumb2.jpg",description:""},{id:2,title:"剩食問題",group:"一年孝班",startTime:"1746028800",endTime:"1753977600",types:[2],intro:"",progress:40,thumbnail:"thumb2.jpg",description:""},{id:3,title:"節約用水",group:"全校",startTime:"",endTime:"",types:[6],intro:"",progress:80,thumbnail:"thumb2.jpg",description:""},{id:4,title:"社區踏查",group:"",startTime:"",endTime:"",types:[2,3],intro:"",progress:50,thumbnail:"thumb2.jpg",description:""}];function N(x,b){const n=a=>{x.value&&!x.value.contains(a.target)&&b()};F(()=>document.addEventListener("mousedown",n)),H(()=>document.removeEventListener("mousedown",n))}const Q={class:"text-lg"},W=["innerHTML"],Y={key:0,class:"absolute z-10 mt-2 w-56 bg-white rounded-md shadow-lg max-h-60 overflow-y-auto text-black"},Z={key:0,class:"p-2 border-t border-gray-200"},ee={class:"inline-flex items-center w-full cursor-pointer"},te=["value"],se=["innerHTML"],le={key:0,class:"absolute z-10 mt-2 w-48 bg-white rounded-md shadow-lg text-black"},ne={key:0,class:"flex gap-2 items-center text-black bg-white/50 p-2 rounded-lg"},ae={__name:"HeaderFilter",emits:["update:filters"],setup(x,{emit:b}){const n=f([]),a=f(!1),t=f("all"),r=f(!1),o=f(""),k=f(""),i=f(null),s=f(null);N(i,()=>{a.value=!1}),N(s,()=>{r.value=!1});const m=b,g=C(()=>L.filter(h=>h.value!==0)),D=C(()=>{if(n.value.length===0)return"SDGs";if(n.value.length>1)return`SDGs (${n.value.length})`;const h=L.find(l=>l.value===n.value[0]);return h?h.title.replace(/<br\s*\/?>/g," "):"SDGs"}),V=C(()=>{switch(t.value){case"day":return"最近一天";case"week":return"最近一周";case"custom":return"自訂範圍";default:return"發布時間"}});function $(h){t.value=h,r.value=!1,h!=="custom"&&(o.value="",k.value="")}return U([n,t,o,k],()=>{m("update:filters",{sdgs:n.value,time:t.value,startDate:o.value,endDate:k.value})},{deep:!0,immediate:!0}),(h,l)=>(u(),d("div",Q,[e("div",{class:"relative",ref_key:"sdgDropdownRef",ref:i},[e("button",{onClick:l[0]||(l[0]=p=>a.value=!a.value),class:"p-1 px-4 rounded-full bg-gray-500 text-white min-w-[150px] text-left flex justify-between items-center gap-2"},[e("span",{innerHTML:D.value,class:"truncate"},null,8,W),l[10]||(l[10]=e("span",null,"▾",-1))]),a.value?(u(),d("div",Y,[n.value.length>0?(u(),d("div",Z,[e("button",{onClick:l[1]||(l[1]=p=>n.value=[]),class:"text-sm text-blue-600 hover:underline w-full text-center"}," 清除選擇 ")])):_("",!0),(u(!0),d(P,null,I(g.value,p=>(u(),d("div",{key:p.value,class:"p-2 hover:bg-gray-100"},[e("label",ee,[S(e("input",{type:"checkbox",value:p.value,"onUpdate:modelValue":l[2]||(l[2]=A=>n.value=A),class:"h-5 w-5 text-green-600 rounded focus:ring-green-500 border-gray-300"},null,8,te),[[E,n.value]]),e("span",{class:"ml-3 text-gray-700",innerHTML:p.title},null,8,se)])]))),128))])):_("",!0)],512),e("div",{class:"relative",ref_key:"timeDropdownRef",ref:s},[e("button",{onClick:l[3]||(l[3]=p=>r.value=!r.value),class:"p-1 px-4 rounded-full bg-gray-500 text-white min-w-[150px] text-left flex justify-between items-center gap-2"},[e("span",null,y(V.value),1),l[11]||(l[11]=e("span",null,"▾",-1))]),r.value?(u(),d("div",le,[e("div",{onClick:l[4]||(l[4]=p=>$("all")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 全部時間 "),e("div",{onClick:l[5]||(l[5]=p=>$("day")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 最近一天 "),e("div",{onClick:l[6]||(l[6]=p=>$("week")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 最近一周 "),e("div",{onClick:l[7]||(l[7]=p=>$("custom")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 自訂範圍 ")])):_("",!0)],512),t.value==="custom"?(u(),d("div",ne,[S(e("input",{type:"date","onUpdate:modelValue":l[8]||(l[8]=p=>o.value=p),class:"p-1 border rounded-md"},null,512),[[M,o.value]]),l[12]||(l[12]=e("span",{class:"text-gray-600"},"至",-1)),S(e("input",{type:"date","onUpdate:modelValue":l[9]||(l[9]=p=>k.value=p),class:"p-1 border rounded-md"},null,512),[[M,k.value]])])):_("",!0)]))}},re="/Pinghe/assets/lightBulb2-o5XC2Rg-.png",oe=["onClick"],ie={class:"p-6 md:p-15 flex flex-col justify-center w-full md:flex-1 text-sm md:text-lg"},de={class:"text-xl md:text-2xl mb-2 md:mb-2"},ue={class:"grid grid-cols-1 md:grid-cols-2 gap-x-4"},me={class:"mb-2"},pe={class:"text-md mb-2"},ce={class:"text-md mb-2 md:col-span-2"},ge={class:"flex items-center w-full md:w-70 gap-3 md:col-span-2"},ve={class:"relative flex-1 bg-gray-200 rounded-full h-2 overflow-hidden"},xe={class:"w-10 text-sm text-gray-700 text-left"},fe={class:"flex flex-wrap gap-2 mt-2 md:col-span-2"},be={__name:"ActionCard",props:{filteredInfo:{type:Array,default:()=>[]}},setup(x){R();const b=a=>a<40?"bg-red-500":a<70?"bg-yellow-400":"bg-green-500",n=a=>{};return(a,t)=>(u(),d("div",q(G(a.$attrs)),[(u(!0),d(P,null,I(x.filteredInfo,r=>(u(),d("div",{class:"animate-fade-in-up cursor-pointer w-full md:max-w-7xl min-h-96 md:max-h-80 bg-pblue-300 text-pblue-700 font-bold rounded-xl shadow-md hover:shadow-gray-400/50 overflow-hidden flex flex-col md:flex-row hover:scale-105",key:r.id,onClick:o=>n(r.id)},[t[11]||(t[11]=e("div",{class:"w-full md:w-2/5 flex items-end justify-center md:justify-end"},[e("img",{src:re,alt:"Card Image",class:"w-full h-full object-cover object-center rounded-xl"})],-1)),e("div",ie,[e("h2",de,[e("span",null,[w(T,{align:"center"},{zh:c(()=>[...t[0]||(t[0]=[e("span",{class:"text-xl md:text-2xl"},"主題",-1)])]),en:c(()=>[...t[1]||(t[1]=[v("Issue",-1)])]),_:1})]),v(" ："+y(r.title),1)]),e("div",ue,[e("p",me,[w(T,{align:"center"},{zh:c(()=>[...t[2]||(t[2]=[e("span",{class:"text-lg md:text-xl"},"時間",-1)])]),en:c(()=>[...t[3]||(t[3]=[v("Time",-1)])]),_:1}),v(" ："+y(r.startTime.length?new Date(r.startTime*1e3).toLocaleDateString()+" ~ "+new Date(r.endTime*1e3).toLocaleDateString():"無"),1)]),e("p",pe,[w(T,{align:"left"},{zh:c(()=>[...t[4]||(t[4]=[e("span",{class:"text-lg md:text-xl"},"成員",-1)])]),en:c(()=>[...t[5]||(t[5]=[v("Member",-1)])]),_:1}),v(" ："+y(r.group),1)]),e("p",ce,[w(T,{align:"left"},{zh:c(()=>[...t[6]||(t[6]=[e("span",{class:"text-lg md:text-xl"},"描述",-1)])]),en:c(()=>[...t[7]||(t[7]=[v("Description",-1)])]),_:1}),v(" ："+y(r.intro),1)]),e("div",ge,[w(T,{align:"left"},{zh:c(()=>[...t[8]||(t[8]=[e("span",{class:"text-lg md:text-xl"},"進度",-1)])]),en:c(()=>[...t[9]||(t[9]=[v("Progress",-1)])]),_:1}),t[10]||(t[10]=v(" ： ",-1)),e("div",ve,[e("div",{class:O(["h-2 rounded-full transition-all duration-500",b(r.progress)]),style:B({width:r.progress+"%"})},null,6)]),e("span",xe,y(r.progress)+"% ",1)]),e("div",fe,[(u(!0),d(P,null,I(r.types,o=>(u(),d("span",{key:o,class:"px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800"},y(z(L)[o].title),1))),128))])])])],8,oe))),128))],16))}},we={key:0,class:"text-base md:text-[1.6rem]"},ye=["disabled"],ke=["disabled"],De={__name:"PageLabel",props:{totalItems:{type:Number,required:!0},itemsPerPage:{type:Number,default:6},modelValue:{type:Number,required:!0}},emits:["update:modelValue"],setup(x,{emit:b}){const n=x,a=b,t=C(()=>n.totalItems===0?1:Math.ceil(n.totalItems/n.itemsPerPage)),r=()=>{n.modelValue<t.value&&a("update:modelValue",n.modelValue+1)},o=()=>{n.modelValue>1&&a("update:modelValue",n.modelValue-1)};return(k,i)=>t.value>=1?(u(),d("div",we,[e("button",{onClick:o,disabled:x.modelValue===1,class:"px-4 py-2 bg-gray-300 rounded-md disabled:opacity-50"}," 上一頁 ",8,ye),e("span",null,"第 "+y(x.modelValue)+" / "+y(t.value)+" 頁",1),e("button",{onClick:r,disabled:x.modelValue===t.value,class:"px-4 py-2 bg-gray-300 rounded-md disabled:opacity-50"}," 下一頁 ",8,ke)])):_("",!0)}},he={class:"relative z-5 pt-25 w-full shadow-md bg-header text-rice-500"},$e={class:"container mx-auto flex items-center p-4"},Te={class:"w-1/3"},_e={class:"text"},Ce={class:"p-10 flex flex-col justify-center items-center gap-8 max-w-7xl md:mx-auto"},Ve={key:0,class:"text-center text-gray-500 mt-8"},j=3,Ie={__name:"Actions",setup(x){const b=K("handleAppScroll"),n=f(X),a=f({sdgs:[],time:"all",startDate:"",endDate:""}),t=f(1),r=i=>{a.value=i,t.value=1},o=C(()=>{let i=n.value;if(a.value.sdgs.length>0&&(i=i.filter(s=>s.types&&s.types.some(m=>a.value.sdgs.includes(m)))),a.value.time!=="all"){const s=new Date;let m,g;switch(a.value.time){case"day":g=new Date(s),m=new Date(s),m.setDate(s.getDate()-1);break;case"week":g=new Date(s),m=new Date(s),m.setDate(s.getDate()-7);break;case"custom":a.value.startDate&&a.value.endDate&&(m=new Date(a.value.startDate),m.setHours(0,0,0,0),g=new Date(a.value.endDate),g.setHours(23,59,59,999));break}m&&g&&(i=i.filter(D=>{if(!D.startTime||!D.endTime||!String(D.startTime).trim()||!String(D.endTime).trim())return!1;const V=new Date(Number(D.startTime)*1e3),$=new Date(Number(D.endTime)*1e3);return V<=g&&$>=m}))}return i}),k=C(()=>{const i=(t.value-1)*j,s=i+j;return o.value.slice(i,s)});return(i,s)=>{const m=J("router-link");return u(),d("div",{class:"page-background content-scroller",onScroll:s[1]||(s[1]=(...g)=>z(b)&&z(b)(...g))},[e("header",he,[e("div",$e,[e("div",Te,[w(m,{to:"/",class:"back-home-btn"},{default:c(()=>[e("span",_e,[w(T,{align:"center"},{zh:c(()=>[...s[2]||(s[2]=[v("回首頁",-1)])]),en:c(()=>[...s[3]||(s[3]=[v("Home",-1)])]),_:1})]),s[4]||(s[4]=e("span",{class:"icon"},"←",-1))]),_:1})]),s[5]||(s[5]=e("div",{class:"w-1/3 text-center"},[e("h1",{class:"text-2xl md:text-3xl font-bold"},"行動追蹤")],-1)),s[6]||(s[6]=e("div",{class:"w-1/3"},null,-1))])]),e("main",Ce,[w(ae,{"onUpdate:filters":r,class:"flex flex-wrap justify-center items-center gap-4"}),w(be,{filteredInfo:k.value,class:"flex flex-col gap-10 w-full md:px-0"},null,8,["filteredInfo"]),o.value.length===0?(u(),d("div",Ve,[...s[7]||(s[7]=[e("p",null,"找不到符合條件的行動。",-1)])])):_("",!0),w(De,{class:"flex justify-center items-center gap-4 mt-8",totalItems:o.value.length,itemsPerPage:j,modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=g=>t.value=g)},null,8,["totalItems","modelValue"])])],32)}}};export{Ie as default};
