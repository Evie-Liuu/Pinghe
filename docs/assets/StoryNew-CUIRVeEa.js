import{r as k,J as C,c as i,o as a,b as e,f as d,w as u,e as f,m as T,E as m,H as g,F as L,d as S,h as n,a as _,g as p,u as N}from"./index-7AOMyK3c.js";import{_ as E,C as V}from"./CJKSub-DtAg9oaQ.js";import{u as D,i as M,a as $,b as B,E as H}from"./index-CVl8IZer.js";import{t as U}from"./SDGs_goal-D1XSLY4x.js";const z={class:"page-background content-scroller"},h={class:"pt-25 w-full z-10 shadow-md bg-header text-rice-500"},A={class:"container mx-auto flex items-center p-4"},F={class:"w-1/3"},G={class:"text"},J={class:"max-w-4xl mx-auto p-4 pt-10 text-[1.2rem]"},O={class:"flex flex-col gap-4"},I={class:"mt-2 flex flex-wrap gap-2 border p-2 rounded-md"},K=["onClick","innerHTML"],R={key:0,class:"border p-2 flex gap-2 rounded-t-md bg-gray-100 mt-1"},j={__name:"StoryNew",setup(q){const b=N(),l=k({title:"",img_url:"",content:"",intro:"",time:Math.floor(Date.now()/1e3),types:[]}),x=U.filter(r=>r.value!==0),v=r=>{const t=l.value.types.indexOf(r);t===-1?l.value.types.push(r):l.value.types.splice(t,1)},c=r=>l.value.types.includes(r),o=D({content:"<p>開始寫下你的故事...</p>",extensions:[M,$,B.configure({nested:!0})]});C(()=>{o.value&&o.value.destroy()});const y=()=>{if(o.value&&(l.value.content=o.value.getHTML()),!l.value.title.trim()){alert("請輸入標題！");return}if(l.value.types.length===0){alert("請至少選擇一個SDGs標籤！");return}if(o.value.isEmpty){alert("請輸入內容！");return}console.log("New Story Data:",l.value),alert("故事已儲存 (請查看主控台)！"),b.push("/story")};return(r,t)=>{const w=T("router-link");return a(),i("div",z,[e("header",h,[e("div",A,[e("div",F,[d(w,{to:"/story",class:"back-home-btn"},{default:u(()=>[e("span",G,[d(V,{align:"left"},{zh:u(()=>[...t[5]||(t[5]=[f("取消",-1)])]),en:u(()=>[...t[6]||(t[6]=[f("Cancel",-1)])]),_:1})]),t[7]||(t[7]=e("span",{class:"icon"},"←",-1))]),_:1})]),t[8]||(t[8]=e("div",{class:"w-1/3 text-center"},[e("h1",{class:"text-2xl md:text-3xl font-bold"},"建立新故事")],-1)),t[9]||(t[9]=e("div",{class:"w-1/3"},null,-1))])]),e("main",J,[e("div",O,[e("div",null,[t[10]||(t[10]=e("label",{for:"title",class:"block text-lg font-medium text-gray-700"},"標題*",-1)),m(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>l.value.title=s),id:"title",class:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[g,l.value.title]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-lg font-medium text-gray-700"},"SDGs標籤*",-1)),e("div",I,[(a(!0),i(L,null,S(n(x),s=>(a(),i("button",{key:s.value,onClick:P=>v(s.value),class:p(["px-3 py-1 text-sm rounded-full transition-colors",c(s.value)?"bg-blue-500 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"]),innerHTML:s.title},null,10,K))),128))])]),e("div",null,[t[12]||(t[12]=e("label",{for:"intro",class:"block text-lg font-medium text-gray-700"},"簡介",-1)),m(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>l.value.intro=s),id:"intro",class:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[g,l.value.intro]])]),e("div",null,[t[13]||(t[13]=e("label",{for:"image",class:"block text-lg font-medium text-gray-700"},"背景圖片",-1)),m(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=s=>l.value.img_url=s),id:"image",class:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., my-image.png"},null,512),[[g,l.value.img_url]]),t[14]||(t[14]=e("p",{class:"text-sm text-gray-500 mt-1"}," 請提供圖片檔名，並確保圖片已存在於 `src/assets/images/` 資料夾中。 ",-1))]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-lg font-medium text-gray-700"},"內容*",-1)),n(o)?(a(),i("div",R,[e("button",{onClick:t[3]||(t[3]=s=>n(o).chain().focus().toggleTaskList().run()),class:p([{"bg-blue-200":n(o).isActive("taskList")},"p-2 rounded hover:bg-blue-200"]),title:"待辦清單"},[...t[15]||(t[15]=[e("i",{class:"fa-solid fa-list-check"},null,-1)])],2),e("button",{onClick:t[4]||(t[4]=s=>n(o).chain().focus().toggleBulletList().run()),class:p([{"bg-blue-200":n(o).isActive("bulletList")},"p-2 rounded hover:bg-blue-200"]),title:"項目符號清單"},[...t[16]||(t[16]=[e("i",{class:"fa-solid fa-list-ul"},null,-1)])],2)])):_("",!0),d(n(H),{editor:n(o),class:"w-full prose max-w-none border-x border-b p-4 rounded-b-md bg-white"},null,8,["editor"])]),e("div",{class:"self-end"},[e("button",{onClick:y,class:"bg-green-500 text-white px-6 py-2 rounded-md hover:bg-green-600"}," 儲存 ")])])])])}}},Z=E(j,[["__scopeId","data-v-a37ae531"]]);export{Z as default};
