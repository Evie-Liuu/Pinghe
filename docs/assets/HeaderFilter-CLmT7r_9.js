import{q as F,x as V,r as n,k as w,z as E,c as r,o as a,b as t,a as m,F as H,d as U,C as f,D as B,t as G,E as k,G as O}from"./index-DMMpmzwx.js";import{t as C}from"./SDGs_goal-D1XSLY4x.js";function h(b,x){const s=u=>{b.value&&!b.value.contains(u.target)&&x()};F(()=>document.addEventListener("mousedown",s)),V(()=>document.removeEventListener("mousedown",s))}const z={class:"text-lg flex items-center w-full"},R={class:"flex items-center gap-4"},j=["innerHTML"],N={key:0,class:"absolute z-10 mt-2 w-56 bg-white rounded-md shadow-lg max-h-60 overflow-y-auto text-black"},q={key:0,class:"p-2 border-t border-gray-200"},_={class:"inline-flex items-center w-full cursor-pointer"},A=["value"],I=["innerHTML"],J={key:0,class:"absolute z-10 mt-2 w-48 bg-white rounded-md shadow-lg text-black"},K={key:0,class:"flex gap-2 items-center text-black bg-white/50 p-2 rounded-lg"},P={class:"relative ml-auto"},X={__name:"HeaderFilter",emits:["update:filters"],setup(b,{emit:x}){const s=n([]),u=n(!1),d=n("all"),v=n(!1),p=n(""),c=n(""),i=n(""),y=n(null),D=n(null);h(y,()=>{u.value=!1}),h(D,()=>{v.value=!1});const T=x,$=w(()=>C.filter(o=>o.value!==0)),M=w(()=>{if(s.value.length===0)return"SDGs";if(s.value.length>1)return`SDGs (${s.value.length})`;const o=C.find(e=>e.value===s.value[0]);return o?o.title.replace(/<br\s*\/?>/g," "):"SDGs"}),S=w(()=>{switch(d.value){case"day":return"最近一天";case"week":return"最近一周";case"custom":return"自訂範圍";default:return"發布時間"}});function g(o){d.value=o,v.value=!1,o!=="custom"&&(p.value="",c.value="")}return E([s,d,p,c,i],()=>{T("update:filters",{sdgs:s.value,time:d.value,startDate:p.value,endDate:c.value,keyword:i.value})},{deep:!0,immediate:!0}),(o,e)=>(a(),r("div",z,[t("div",R,[t("div",{class:"relative",ref_key:"sdgDropdownRef",ref:y},[t("button",{onClick:e[0]||(e[0]=l=>u.value=!u.value),class:"p-1 px-4 rounded-full bg-gray-500 text-white min-w-[150px] text-left flex justify-between items-center gap-2"},[t("span",{innerHTML:M.value,class:"truncate"},null,8,j),e[12]||(e[12]=t("span",null,"▾",-1))]),u.value?(a(),r("div",N,[s.value.length>0?(a(),r("div",q,[t("button",{onClick:e[1]||(e[1]=l=>s.value=[]),class:"text-sm text-blue-600 hover:underline w-full text-center"}," 清除選擇 ")])):m("",!0),(a(!0),r(H,null,U($.value,l=>(a(),r("div",{key:l.value,class:"p-2 hover:bg-gray-100"},[t("label",_,[f(t("input",{type:"checkbox",value:l.value,"onUpdate:modelValue":e[2]||(e[2]=L=>s.value=L),class:"h-5 w-5 text-green-600 rounded focus:ring-green-500 border-gray-300"},null,8,A),[[B,s.value]]),t("span",{class:"ml-3 text-gray-700",innerHTML:l.title},null,8,I)])]))),128))])):m("",!0)],512),t("div",{class:"relative",ref_key:"timeDropdownRef",ref:D},[t("button",{onClick:e[3]||(e[3]=l=>v.value=!v.value),class:"p-1 px-4 rounded-full bg-gray-500 text-white min-w-[150px] text-left flex justify-between items-center gap-2"},[t("span",null,G(S.value),1),e[13]||(e[13]=t("span",null,"▾",-1))]),v.value?(a(),r("div",J,[t("div",{onClick:e[4]||(e[4]=l=>g("all")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 全部時間 "),t("div",{onClick:e[5]||(e[5]=l=>g("day")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 最近一天 "),t("div",{onClick:e[6]||(e[6]=l=>g("week")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 最近一周 "),t("div",{onClick:e[7]||(e[7]=l=>g("custom")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 自訂範圍 ")])):m("",!0)],512),d.value==="custom"?(a(),r("div",K,[f(t("input",{type:"date","onUpdate:modelValue":e[8]||(e[8]=l=>p.value=l),class:"p-1 border rounded-md"},null,512),[[k,p.value]]),e[14]||(e[14]=t("span",{class:"text-gray-600"},"至",-1)),f(t("input",{type:"date","onUpdate:modelValue":e[9]||(e[9]=l=>c.value=l),class:"p-1 border rounded-md"},null,512),[[k,c.value]])])):m("",!0)]),t("div",P,[f(t("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=l=>i.value=l),placeholder:"搜尋標題...",class:"p-1 px-4 rounded-full border border-black/50 placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-orange-400 focus:border-orange-400"},null,512),[[k,i.value]]),i.value.length?(a(),r("a",{key:0,href:"#",class:"absolute right-2 top-1.5",onClick:e[11]||(e[11]=O(l=>i.value="",["prevent"]))},[...e[15]||(e[15]=[t("i",{class:"fa-solid fa-xmark text-black/50"},null,-1)])])):m("",!0)])]))}};export{X as _};
