import{C as vn,u as bn,r as me,c as J,D as _n,k as wn,E as yn,a as E,o as S,b as c,f as Bt,g as vt,h as ve,i as Dn,d as L,e as ce,v as fe,n as ye,F as Me,p as Fe,t as Y,l as xn,j as En,s as $t}from"./index-BdfhtmlJ.js";import{C as Sn}from"./CJKSub-BfqnPf4a.js";import{u as Tn,i as Cn,a as kn,b as On}from"./index-Dzb-g-gX.js";import{s as In}from"./SDGs_goal-BU-5yG0n.js";/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function zt(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),t.push.apply(t,n)}return t}function pe(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zt(Object(t),!0).forEach(function(n){An(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):zt(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function nt(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nt=function(e){return typeof e}:nt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(a)}function An(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function _e(){return _e=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},_e.apply(this,arguments)}function Nn(a,e){if(a==null)return{};var t={},n=Object.keys(a),o,r;for(r=0;r<n.length;r++)o=n[r],!(e.indexOf(o)>=0)&&(t[o]=a[o]);return t}function Pn(a,e){if(a==null)return{};var t=Nn(a,e),n,o;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);for(o=0;o<r.length;o++)n=r[o],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(a,n)&&(t[n]=a[n])}return t}var Mn="1.15.6";function be(a){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(a)}var we=be(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ke=be(/Edge/i),Gt=be(/firefox/i),We=be(/safari/i)&&!be(/chrome/i)&&!be(/android/i),At=be(/iP(ad|od|hone)/i),Kt=be(/chrome/i)&&be(/android/i),Zt={capture:!1,passive:!1};function T(a,e,t){a.addEventListener(e,t,!we&&Zt)}function x(a,e,t){a.removeEventListener(e,t,!we&&Zt)}function lt(a,e){if(e){if(e[0]===">"&&(e=e.substring(1)),a)try{if(a.matches)return a.matches(e);if(a.msMatchesSelector)return a.msMatchesSelector(e);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(e)}catch{return!1}return!1}}function Jt(a){return a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode}function re(a,e,t,n){if(a){t=t||document;do{if(e!=null&&(e[0]===">"?a.parentNode===t&&lt(a,e):lt(a,e))||n&&a===t)return a;if(a===t)break}while(a=Jt(a))}return null}var Ht=/\s+/g;function Q(a,e,t){if(a&&e)if(a.classList)a.classList[t?"add":"remove"](e);else{var n=(" "+a.className+" ").replace(Ht," ").replace(" "+e+" "," ");a.className=(n+(t?" "+e:"")).replace(Ht," ")}}function v(a,e,t){var n=a&&a.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(t=a.currentStyle),e===void 0?t:t[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=t+(typeof t=="string"?"":"px")}}function $e(a,e){var t="";if(typeof a=="string")t=a;else do{var n=v(a,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!e&&(a=a.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(t)}function Qt(a,e,t){if(a){var n=a.getElementsByTagName(e),o=0,r=n.length;if(t)for(;o<r;o++)t(n[o],o);return n}return[]}function he(){var a=document.scrollingElement;return a||document.documentElement}function R(a,e,t,n,o){if(!(!a.getBoundingClientRect&&a!==window)){var r,l,i,d,u,m,g;if(a!==window&&a.parentNode&&a!==he()?(r=a.getBoundingClientRect(),l=r.top,i=r.left,d=r.bottom,u=r.right,m=r.height,g=r.width):(l=0,i=0,d=window.innerHeight,u=window.innerWidth,m=window.innerHeight,g=window.innerWidth),(e||t)&&a!==window&&(o=o||a.parentNode,!we))do if(o&&o.getBoundingClientRect&&(v(o,"transform")!=="none"||t&&v(o,"position")!=="static")){var y=o.getBoundingClientRect();l-=y.top+parseInt(v(o,"border-top-width")),i-=y.left+parseInt(v(o,"border-left-width")),d=l+r.height,u=i+r.width;break}while(o=o.parentNode);if(n&&a!==window){var O=$e(o||a),D=O&&O.a,k=O&&O.d;O&&(l/=k,i/=D,g/=D,m/=k,d=l+m,u=i+g)}return{top:l,left:i,bottom:d,right:u,width:g,height:m}}}function Lt(a,e,t){for(var n=Ee(a,!0),o=R(a)[e];n;){var r=R(n)[t],l=void 0;if(l=o>=r,!l)return n;if(n===he())break;n=Ee(n,!1)}return!1}function ze(a,e,t,n){for(var o=0,r=0,l=a.children;r<l.length;){if(l[r].style.display!=="none"&&l[r]!==b.ghost&&(n||l[r]!==b.dragged)&&re(l[r],t.draggable,a,!1)){if(o===e)return l[r];o++}r++}return null}function Nt(a,e){for(var t=a.lastElementChild;t&&(t===b.ghost||v(t,"display")==="none"||e&&!lt(t,e));)t=t.previousElementSibling;return t||null}function te(a,e){var t=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)a.nodeName.toUpperCase()!=="TEMPLATE"&&a!==b.clone&&(!e||lt(a,e))&&t++;return t}function Wt(a){var e=0,t=0,n=he();if(a)do{var o=$e(a),r=o.a,l=o.d;e+=a.scrollLeft*r,t+=a.scrollTop*l}while(a!==n&&(a=a.parentNode));return[e,t]}function Fn(a,e){for(var t in a)if(a.hasOwnProperty(t)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===a[t][n])return Number(t)}return-1}function Ee(a,e){if(!a||!a.getBoundingClientRect)return he();var t=a,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var o=v(t);if(t.clientWidth<t.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return he();if(n||e)return t;n=!0}}while(t=t.parentNode);return he()}function Rn(a,e){if(a&&e)for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t]);return a}function bt(a,e){return Math.round(a.top)===Math.round(e.top)&&Math.round(a.left)===Math.round(e.left)&&Math.round(a.height)===Math.round(e.height)&&Math.round(a.width)===Math.round(e.width)}var je;function en(a,e){return function(){if(!je){var t=arguments,n=this;t.length===1?a.call(n,t[0]):a.apply(n,t),je=setTimeout(function(){je=void 0},e)}}}function Xn(){clearTimeout(je),je=void 0}function tn(a,e,t){a.scrollLeft+=e,a.scrollTop+=t}function nn(a){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(a).cloneNode(!0):t?t(a).clone(!0)[0]:a.cloneNode(!0)}function an(a,e,t){var n={};return Array.from(a.children).forEach(function(o){var r,l,i,d;if(!(!re(o,e.draggable,a,!1)||o.animated||o===t)){var u=R(o);n.left=Math.min((r=n.left)!==null&&r!==void 0?r:1/0,u.left),n.top=Math.min((l=n.top)!==null&&l!==void 0?l:1/0,u.top),n.right=Math.max((i=n.right)!==null&&i!==void 0?i:-1/0,u.right),n.bottom=Math.max((d=n.bottom)!==null&&d!==void 0?d:-1/0,u.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var K="Sortable"+new Date().getTime();function Yn(){var a=[],e;return{captureAnimationState:function(){if(a=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(o){if(!(v(o,"display")==="none"||o===b.ghost)){a.push({target:o,rect:R(o)});var r=pe({},a[a.length-1].rect);if(o.thisAnimationDuration){var l=$e(o,!0);l&&(r.top-=l.f,r.left-=l.e)}o.fromRect=r}})}},addAnimationState:function(n){a.push(n)},removeAnimationState:function(n){a.splice(Fn(a,{target:n}),1)},animateAll:function(n){var o=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var r=!1,l=0;a.forEach(function(i){var d=0,u=i.target,m=u.fromRect,g=R(u),y=u.prevFromRect,O=u.prevToRect,D=i.rect,k=$e(u,!0);k&&(g.top-=k.f,g.left-=k.e),u.toRect=g,u.thisAnimationDuration&&bt(y,g)&&!bt(m,g)&&(D.top-g.top)/(D.left-g.left)===(m.top-g.top)/(m.left-g.left)&&(d=$n(D,y,O,o.options)),bt(g,m)||(u.prevFromRect=m,u.prevToRect=g,d||(d=o.options.animation),o.animate(u,D,g,d)),d&&(r=!0,l=Math.max(l,d),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},d),u.thisAnimationDuration=d)}),clearTimeout(e),r?e=setTimeout(function(){typeof n=="function"&&n()},l):typeof n=="function"&&n(),a=[]},animate:function(n,o,r,l){if(l){v(n,"transition",""),v(n,"transform","");var i=$e(this.el),d=i&&i.a,u=i&&i.d,m=(o.left-r.left)/(d||1),g=(o.top-r.top)/(u||1);n.animatingX=!!m,n.animatingY=!!g,v(n,"transform","translate3d("+m+"px,"+g+"px,0)"),this.forRepaintDummy=Bn(n),v(n,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),v(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){v(n,"transition",""),v(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},l)}}}}function Bn(a){return a.offsetWidth}function $n(a,e,t,n){return Math.sqrt(Math.pow(e.top-a.top,2)+Math.pow(e.left-a.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*n.animation}var Re=[],_t={initializeByDefault:!0},Ze={mount:function(e){for(var t in _t)_t.hasOwnProperty(t)&&!(t in e)&&(e[t]=_t[t]);Re.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Re.push(e)},pluginEvent:function(e,t,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var r=e+"Global";Re.forEach(function(l){t[l.pluginName]&&(t[l.pluginName][r]&&t[l.pluginName][r](pe({sortable:t},n)),t.options[l.pluginName]&&t[l.pluginName][e]&&t[l.pluginName][e](pe({sortable:t},n)))})},initializePlugins:function(e,t,n,o){Re.forEach(function(i){var d=i.pluginName;if(!(!e.options[d]&&!i.initializeByDefault)){var u=new i(e,t,e.options);u.sortable=e,u.options=e.options,e[d]=u,_e(n,u.defaults)}});for(var r in e.options)if(e.options.hasOwnProperty(r)){var l=this.modifyOption(e,r,e.options[r]);typeof l<"u"&&(e.options[r]=l)}},getEventProperties:function(e,t){var n={};return Re.forEach(function(o){typeof o.eventProperties=="function"&&_e(n,o.eventProperties.call(t[o.pluginName],e))}),n},modifyOption:function(e,t,n){var o;return Re.forEach(function(r){e[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[t]=="function"&&(o=r.optionListeners[t].call(e[r.pluginName],n))}),o}};function zn(a){var e=a.sortable,t=a.rootEl,n=a.name,o=a.targetEl,r=a.cloneEl,l=a.toEl,i=a.fromEl,d=a.oldIndex,u=a.newIndex,m=a.oldDraggableIndex,g=a.newDraggableIndex,y=a.originalEvent,O=a.putSortable,D=a.extraEventProperties;if(e=e||t&&t[K],!!e){var k,Z=e.options,ne="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!we&&!Ke?k=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(k=document.createEvent("Event"),k.initEvent(n,!0,!0)),k.to=l||t,k.from=i||t,k.item=o||t,k.clone=r,k.oldIndex=d,k.newIndex=u,k.oldDraggableIndex=m,k.newDraggableIndex=g,k.originalEvent=y,k.pullMode=O?O.lastPutMode:void 0;var M=pe(pe({},D),Ze.getEventProperties(n,e));for(var j in M)k[j]=M[j];t&&t.dispatchEvent(k),Z[ne]&&Z[ne].call(e,k)}}var Gn=["evt"],q=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=n.evt,r=Pn(n,Gn);Ze.pluginEvent.bind(b)(e,t,pe({dragEl:h,parentEl:N,ghostEl:_,rootEl:I,nextEl:Ne,lastDownEl:at,cloneEl:A,cloneHidden:xe,dragStarted:Ge,putSortable:$,activeSortable:b.active,originalEvent:o,oldIndex:Be,oldDraggableIndex:Ve,newIndex:ee,newDraggableIndex:De,hideGhostForTarget:sn,unhideGhostForTarget:dn,cloneNowHidden:function(){xe=!0},cloneNowShown:function(){xe=!1},dispatchSortableEvent:function(i){W({sortable:t,name:i,originalEvent:o})}},r))};function W(a){zn(pe({putSortable:$,cloneEl:A,targetEl:h,rootEl:I,oldIndex:Be,oldDraggableIndex:Ve,newIndex:ee,newDraggableIndex:De},a))}var h,N,_,I,Ne,at,A,xe,Be,ee,Ve,De,Je,$,Ye=!1,st=!1,dt=[],Ie,oe,wt,yt,jt,Vt,Ge,Xe,Ue,qe=!1,Qe=!1,ot,z,Dt=[],Ct=!1,ut=[],ft=typeof document<"u",et=At,Ut=Ke||we?"cssFloat":"float",Hn=ft&&!Kt&&!At&&"draggable"in document.createElement("div"),on=(function(){if(ft){if(we)return!1;var a=document.createElement("x");return a.style.cssText="pointer-events:auto",a.style.pointerEvents==="auto"}})(),rn=function(e,t){var n=v(e),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=ze(e,0,t),l=ze(e,1,t),i=r&&v(r),d=l&&v(l),u=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+R(r).width,m=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+R(l).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&i.float&&i.float!=="none"){var g=i.float==="left"?"left":"right";return l&&(d.clear==="both"||d.clear===g)?"vertical":"horizontal"}return r&&(i.display==="block"||i.display==="flex"||i.display==="table"||i.display==="grid"||u>=o&&n[Ut]==="none"||l&&n[Ut]==="none"&&u+m>o)?"vertical":"horizontal"},Ln=function(e,t,n){var o=n?e.left:e.top,r=n?e.right:e.bottom,l=n?e.width:e.height,i=n?t.left:t.top,d=n?t.right:t.bottom,u=n?t.width:t.height;return o===i||r===d||o+l/2===i+u/2},Wn=function(e,t){var n;return dt.some(function(o){var r=o[K].options.emptyInsertThreshold;if(!(!r||Nt(o))){var l=R(o),i=e>=l.left-r&&e<=l.right+r,d=t>=l.top-r&&t<=l.bottom+r;if(i&&d)return n=o}}),n},ln=function(e){function t(r,l){return function(i,d,u,m){var g=i.options.group.name&&d.options.group.name&&i.options.group.name===d.options.group.name;if(r==null&&(l||g))return!0;if(r==null||r===!1)return!1;if(l&&r==="clone")return r;if(typeof r=="function")return t(r(i,d,u,m),l)(i,d,u,m);var y=(l?i:d).options.group.name;return r===!0||typeof r=="string"&&r===y||r.join&&r.indexOf(y)>-1}}var n={},o=e.group;(!o||nt(o)!="object")&&(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},sn=function(){!on&&_&&v(_,"display","none")},dn=function(){!on&&_&&v(_,"display","")};ft&&!Kt&&document.addEventListener("click",function(a){if(st)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),st=!1,!1},!0);var Ae=function(e){if(h){e=e.touches?e.touches[0]:e;var t=Wn(e.clientX,e.clientY);if(t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[K]._onDragOver(n)}}},jn=function(e){h&&h.parentNode[K]._isOutsideThisEl(e.target)};function b(a,e){if(!(a&&a.nodeType&&a.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a,this.options=e=_e({},e),a[K]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return rn(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,i){l.setData("Text",i.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:b.supportPointer!==!1&&"PointerEvent"in window&&(!We||At),emptyInsertThreshold:5};Ze.initializePlugins(this,a,t);for(var n in t)!(n in e)&&(e[n]=t[n]);ln(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:Hn,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?T(a,"pointerdown",this._onTapStart):(T(a,"mousedown",this._onTapStart),T(a,"touchstart",this._onTapStart)),this.nativeDraggable&&(T(a,"dragover",this),T(a,"dragenter",this)),dt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),_e(this,Yn())}b.prototype={constructor:b,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Xe=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,h):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,o=this.options,r=o.preventOnFilter,l=e.type,i=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,d=(i||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||d,m=o.filter;if(ea(n),!h&&!(/mousedown|pointerdown/.test(l)&&e.button!==0||o.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&We&&d&&d.tagName.toUpperCase()==="SELECT")&&(d=re(d,o.draggable,n,!1),!(d&&d.animated)&&at!==d)){if(Be=te(d),Ve=te(d,o.draggable),typeof m=="function"){if(m.call(this,e,d,this)){W({sortable:t,rootEl:u,name:"filter",targetEl:d,toEl:n,fromEl:n}),q("filter",t,{evt:e}),r&&e.preventDefault();return}}else if(m&&(m=m.split(",").some(function(g){if(g=re(u,g.trim(),n,!1),g)return W({sortable:t,rootEl:g,name:"filter",targetEl:d,fromEl:n,toEl:n}),q("filter",t,{evt:e}),!0}),m)){r&&e.preventDefault();return}o.handle&&!re(u,o.handle,n,!1)||this._prepareDragStart(e,i,d)}}},_prepareDragStart:function(e,t,n){var o=this,r=o.el,l=o.options,i=r.ownerDocument,d;if(n&&!h&&n.parentNode===r){var u=R(n);if(I=r,h=n,N=h.parentNode,Ne=h.nextSibling,at=n,Je=l.group,b.dragged=h,Ie={target:h,clientX:(t||e).clientX,clientY:(t||e).clientY},jt=Ie.clientX-u.left,Vt=Ie.clientY-u.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,h.style["will-change"]="all",d=function(){if(q("delayEnded",o,{evt:e}),b.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!Gt&&o.nativeDraggable&&(h.draggable=!0),o._triggerDragStart(e,t),W({sortable:o,name:"choose",originalEvent:e}),Q(h,l.chosenClass,!0)},l.ignore.split(",").forEach(function(m){Qt(h,m.trim(),xt)}),T(i,"dragover",Ae),T(i,"mousemove",Ae),T(i,"touchmove",Ae),l.supportPointer?(T(i,"pointerup",o._onDrop),!this.nativeDraggable&&T(i,"pointercancel",o._onDrop)):(T(i,"mouseup",o._onDrop),T(i,"touchend",o._onDrop),T(i,"touchcancel",o._onDrop)),Gt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,h.draggable=!0),q("delayStart",this,{evt:e}),l.delay&&(!l.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Ke||we))){if(b.eventCanceled){this._onDrop();return}l.supportPointer?(T(i,"pointerup",o._disableDelayedDrag),T(i,"pointercancel",o._disableDelayedDrag)):(T(i,"mouseup",o._disableDelayedDrag),T(i,"touchend",o._disableDelayedDrag),T(i,"touchcancel",o._disableDelayedDrag)),T(i,"mousemove",o._delayedDragTouchMoveHandler),T(i,"touchmove",o._delayedDragTouchMoveHandler),l.supportPointer&&T(i,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(d,l.delay)}else d()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){h&&xt(h),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;x(e,"mouseup",this._disableDelayedDrag),x(e,"touchend",this._disableDelayedDrag),x(e,"touchcancel",this._disableDelayedDrag),x(e,"pointerup",this._disableDelayedDrag),x(e,"pointercancel",this._disableDelayedDrag),x(e,"mousemove",this._delayedDragTouchMoveHandler),x(e,"touchmove",this._delayedDragTouchMoveHandler),x(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?T(document,"pointermove",this._onTouchMove):t?T(document,"touchmove",this._onTouchMove):T(document,"mousemove",this._onTouchMove):(T(h,"dragend",this),T(I,"dragstart",this._onDragStart));try{document.selection?rt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Ye=!1,I&&h){q("dragStarted",this,{evt:t}),this.nativeDraggable&&T(document,"dragover",jn);var n=this.options;!e&&Q(h,n.dragClass,!1),Q(h,n.ghostClass,!0),b.active=this,e&&this._appendGhost(),W({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(oe){this._lastX=oe.clientX,this._lastY=oe.clientY,sn();for(var e=document.elementFromPoint(oe.clientX,oe.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(oe.clientX,oe.clientY),e!==t);)t=e;if(h.parentNode[K]._isOutsideThisEl(e),t)do{if(t[K]){var n=void 0;if(n=t[K]._onDragOver({clientX:oe.clientX,clientY:oe.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=Jt(t));dn()}},_onTouchMove:function(e){if(Ie){var t=this.options,n=t.fallbackTolerance,o=t.fallbackOffset,r=e.touches?e.touches[0]:e,l=_&&$e(_,!0),i=_&&l&&l.a,d=_&&l&&l.d,u=et&&z&&Wt(z),m=(r.clientX-Ie.clientX+o.x)/(i||1)+(u?u[0]-Dt[0]:0)/(i||1),g=(r.clientY-Ie.clientY+o.y)/(d||1)+(u?u[1]-Dt[1]:0)/(d||1);if(!b.active&&!Ye){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(_){l?(l.e+=m-(wt||0),l.f+=g-(yt||0)):l={a:1,b:0,c:0,d:1,e:m,f:g};var y="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");v(_,"webkitTransform",y),v(_,"mozTransform",y),v(_,"msTransform",y),v(_,"transform",y),wt=m,yt=g,oe=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!_){var e=this.options.fallbackOnBody?document.body:I,t=R(h,!0,et,!0,e),n=this.options;if(et){for(z=e;v(z,"position")==="static"&&v(z,"transform")==="none"&&z!==document;)z=z.parentNode;z!==document.body&&z!==document.documentElement?(z===document&&(z=he()),t.top+=z.scrollTop,t.left+=z.scrollLeft):z=he(),Dt=Wt(z)}_=h.cloneNode(!0),Q(_,n.ghostClass,!1),Q(_,n.fallbackClass,!0),Q(_,n.dragClass,!0),v(_,"transition",""),v(_,"transform",""),v(_,"box-sizing","border-box"),v(_,"margin",0),v(_,"top",t.top),v(_,"left",t.left),v(_,"width",t.width),v(_,"height",t.height),v(_,"opacity","0.8"),v(_,"position",et?"absolute":"fixed"),v(_,"zIndex","100000"),v(_,"pointerEvents","none"),b.ghost=_,e.appendChild(_),v(_,"transform-origin",jt/parseInt(_.style.width)*100+"% "+Vt/parseInt(_.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,o=e.dataTransfer,r=n.options;if(q("dragStart",this,{evt:e}),b.eventCanceled){this._onDrop();return}q("setupClone",this),b.eventCanceled||(A=nn(h),A.removeAttribute("id"),A.draggable=!1,A.style["will-change"]="",this._hideClone(),Q(A,this.options.chosenClass,!1),b.clone=A),n.cloneId=rt(function(){q("clone",n),!b.eventCanceled&&(n.options.removeCloneOnHide||I.insertBefore(A,h),n._hideClone(),W({sortable:n,name:"clone"}))}),!t&&Q(h,r.dragClass,!0),t?(st=!0,n._loopId=setInterval(n._emulateDragOver,50)):(x(document,"mouseup",n._onDrop),x(document,"touchend",n._onDrop),x(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",r.setData&&r.setData.call(n,o,h)),T(document,"drop",n),v(h,"transform","translateZ(0)")),Ye=!0,n._dragStartId=rt(n._dragStarted.bind(n,t,e)),T(document,"selectstart",n),Ge=!0,window.getSelection().removeAllRanges(),We&&v(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,o,r,l,i=this.options,d=i.group,u=b.active,m=Je===d,g=i.sort,y=$||u,O,D=this,k=!1;if(Ct)return;function Z(Oe,ht){q(Oe,D,pe({evt:e,isOwner:m,axis:O?"vertical":"horizontal",revert:l,dragRect:o,targetRect:r,canSort:g,fromSortable:y,target:n,completed:M,onMove:function(Pe,pt){return tt(I,t,h,o,Pe,R(Pe),e,pt)},changed:j},ht))}function ne(){Z("dragOverAnimationCapture"),D.captureAnimationState(),D!==y&&y.captureAnimationState()}function M(Oe){return Z("dragOverCompleted",{insertion:Oe}),Oe&&(m?u._hideClone():u._showClone(D),D!==y&&(Q(h,$?$.options.ghostClass:u.options.ghostClass,!1),Q(h,i.ghostClass,!0)),$!==D&&D!==b.active?$=D:D===b.active&&$&&($=null),y===D&&(D._ignoreWhileAnimating=n),D.animateAll(function(){Z("dragOverAnimationComplete"),D._ignoreWhileAnimating=null}),D!==y&&(y.animateAll(),y._ignoreWhileAnimating=null)),(n===h&&!h.animated||n===t&&!n.animated)&&(Xe=null),!i.dragoverBubble&&!e.rootEl&&n!==document&&(h.parentNode[K]._isOutsideThisEl(e.target),!Oe&&Ae(e)),!i.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),k=!0}function j(){ee=te(h),De=te(h,i.draggable),W({sortable:D,name:"change",toEl:t,newIndex:ee,newDraggableIndex:De,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=re(n,i.draggable,t,!0),Z("dragOver"),b.eventCanceled)return k;if(h.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||D._ignoreWhileAnimating===n)return M(!1);if(st=!1,u&&!i.disabled&&(m?g||(l=N!==I):$===this||(this.lastPutMode=Je.checkPull(this,u,h,e))&&d.checkPut(this,u,h,e))){if(O=this._getDirection(e,n)==="vertical",o=R(h),Z("dragOverValid"),b.eventCanceled)return k;if(l)return N=I,ne(),this._hideClone(),Z("revert"),b.eventCanceled||(Ne?I.insertBefore(h,Ne):I.appendChild(h)),M(!0);var X=Nt(t,i.draggable);if(!X||Kn(e,O,this)&&!X.animated){if(X===h)return M(!1);if(X&&t===e.target&&(n=X),n&&(r=R(n)),tt(I,t,h,o,n,r,e,!!n)!==!1)return ne(),X&&X.nextSibling?t.insertBefore(h,X.nextSibling):t.appendChild(h),N=t,j(),M(!0)}else if(X&&qn(e,O,this)){var ie=ze(t,0,i,!0);if(ie===h)return M(!1);if(n=ie,r=R(n),tt(I,t,h,o,n,r,e,!1)!==!1)return ne(),t.insertBefore(h,ie),N=t,j(),M(!0)}else if(n.parentNode===t){r=R(n);var B=0,le,Se=h.parentNode!==t,G=!Ln(h.animated&&h.toRect||o,n.animated&&n.toRect||r,O),Te=O?"top":"left",se=Lt(n,"top","top")||Lt(h,"top","top"),Ce=se?se.scrollTop:void 0;Xe!==n&&(le=r[Te],qe=!1,Qe=!G&&i.invertSwap||Se),B=Zn(e,n,r,O,G?1:i.swapThreshold,i.invertedSwapThreshold==null?i.swapThreshold:i.invertedSwapThreshold,Qe,Xe===n);var ae;if(B!==0){var de=te(h);do de-=B,ae=N.children[de];while(ae&&(v(ae,"display")==="none"||ae===_))}if(B===0||ae===n)return M(!1);Xe=n,Ue=B;var ke=n.nextElementSibling,ue=!1;ue=B===1;var V=tt(I,t,h,o,n,r,e,ue);if(V!==!1)return(V===1||V===-1)&&(ue=V===1),Ct=!0,setTimeout(Un,30),ne(),ue&&!ke?t.appendChild(h):n.parentNode.insertBefore(h,ue?ke:n),se&&tn(se,0,Ce-se.scrollTop),N=h.parentNode,le!==void 0&&!Qe&&(ot=Math.abs(le-R(n)[Te])),j(),M(!0)}if(t.contains(h))return M(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){x(document,"mousemove",this._onTouchMove),x(document,"touchmove",this._onTouchMove),x(document,"pointermove",this._onTouchMove),x(document,"dragover",Ae),x(document,"mousemove",Ae),x(document,"touchmove",Ae)},_offUpEvents:function(){var e=this.el.ownerDocument;x(e,"mouseup",this._onDrop),x(e,"touchend",this._onDrop),x(e,"pointerup",this._onDrop),x(e,"pointercancel",this._onDrop),x(e,"touchcancel",this._onDrop),x(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(ee=te(h),De=te(h,n.draggable),q("drop",this,{evt:e}),N=h&&h.parentNode,ee=te(h),De=te(h,n.draggable),b.eventCanceled){this._nulling();return}Ye=!1,Qe=!1,qe=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),kt(this.cloneId),kt(this._dragStartId),this.nativeDraggable&&(x(document,"drop",this),x(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),We&&v(document.body,"user-select",""),v(h,"transform",""),e&&(Ge&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),_&&_.parentNode&&_.parentNode.removeChild(_),(I===N||$&&$.lastPutMode!=="clone")&&A&&A.parentNode&&A.parentNode.removeChild(A),h&&(this.nativeDraggable&&x(h,"dragend",this),xt(h),h.style["will-change"]="",Ge&&!Ye&&Q(h,$?$.options.ghostClass:this.options.ghostClass,!1),Q(h,this.options.chosenClass,!1),W({sortable:this,name:"unchoose",toEl:N,newIndex:null,newDraggableIndex:null,originalEvent:e}),I!==N?(ee>=0&&(W({rootEl:N,name:"add",toEl:N,fromEl:I,originalEvent:e}),W({sortable:this,name:"remove",toEl:N,originalEvent:e}),W({rootEl:N,name:"sort",toEl:N,fromEl:I,originalEvent:e}),W({sortable:this,name:"sort",toEl:N,originalEvent:e})),$&&$.save()):ee!==Be&&ee>=0&&(W({sortable:this,name:"update",toEl:N,originalEvent:e}),W({sortable:this,name:"sort",toEl:N,originalEvent:e})),b.active&&((ee==null||ee===-1)&&(ee=Be,De=Ve),W({sortable:this,name:"end",toEl:N,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){q("nulling",this),I=h=N=_=Ne=A=at=xe=Ie=oe=Ge=ee=De=Be=Ve=Xe=Ue=$=Je=b.dragged=b.ghost=b.clone=b.active=null,ut.forEach(function(e){e.checked=!0}),ut.length=wt=yt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":h&&(this._onDragOver(e),Vn(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,o=0,r=n.length,l=this.options;o<r;o++)t=n[o],re(t,l.draggable,this.el,!1)&&e.push(t.getAttribute(l.dataIdAttr)||Qn(t));return e},sort:function(e,t){var n={},o=this.el;this.toArray().forEach(function(r,l){var i=o.children[l];re(i,this.options.draggable,o,!1)&&(n[r]=i)},this),t&&this.captureAnimationState(),e.forEach(function(r){n[r]&&(o.removeChild(n[r]),o.appendChild(n[r]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return re(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var o=Ze.modifyOption(this,e,t);typeof o<"u"?n[e]=o:n[e]=t,e==="group"&&ln(n)},destroy:function(){q("destroy",this);var e=this.el;e[K]=null,x(e,"mousedown",this._onTapStart),x(e,"touchstart",this._onTapStart),x(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(x(e,"dragover",this),x(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),dt.splice(dt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!xe){if(q("hideClone",this),b.eventCanceled)return;v(A,"display","none"),this.options.removeCloneOnHide&&A.parentNode&&A.parentNode.removeChild(A),xe=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(xe){if(q("showClone",this),b.eventCanceled)return;h.parentNode==I&&!this.options.group.revertClone?I.insertBefore(A,h):Ne?I.insertBefore(A,Ne):I.appendChild(A),this.options.group.revertClone&&this.animate(h,A),v(A,"display",""),xe=!1}}};function Vn(a){a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault()}function tt(a,e,t,n,o,r,l,i){var d,u=a[K],m=u.options.onMove,g;return window.CustomEvent&&!we&&!Ke?d=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(d=document.createEvent("Event"),d.initEvent("move",!0,!0)),d.to=e,d.from=a,d.dragged=t,d.draggedRect=n,d.related=o||e,d.relatedRect=r||R(e),d.willInsertAfter=i,d.originalEvent=l,a.dispatchEvent(d),m&&(g=m.call(u,d,l)),g}function xt(a){a.draggable=!1}function Un(){Ct=!1}function qn(a,e,t){var n=R(ze(t.el,0,t.options,!0)),o=an(t.el,t.options,_),r=10;return e?a.clientX<o.left-r||a.clientY<n.top&&a.clientX<n.right:a.clientY<o.top-r||a.clientY<n.bottom&&a.clientX<n.left}function Kn(a,e,t){var n=R(Nt(t.el,t.options.draggable)),o=an(t.el,t.options,_),r=10;return e?a.clientX>o.right+r||a.clientY>n.bottom&&a.clientX>n.left:a.clientY>o.bottom+r||a.clientX>n.right&&a.clientY>n.top}function Zn(a,e,t,n,o,r,l,i){var d=n?a.clientY:a.clientX,u=n?t.height:t.width,m=n?t.top:t.left,g=n?t.bottom:t.right,y=!1;if(!l){if(i&&ot<u*o){if(!qe&&(Ue===1?d>m+u*r/2:d<g-u*r/2)&&(qe=!0),qe)y=!0;else if(Ue===1?d<m+ot:d>g-ot)return-Ue}else if(d>m+u*(1-o)/2&&d<g-u*(1-o)/2)return Jn(e)}return y=y||l,y&&(d<m+u*r/2||d>g-u*r/2)?d>m+u/2?1:-1:0}function Jn(a){return te(h)<te(a)?1:-1}function Qn(a){for(var e=a.tagName+a.className+a.src+a.href+a.textContent,t=e.length,n=0;t--;)n+=e.charCodeAt(t);return n.toString(36)}function ea(a){ut.length=0;for(var e=a.getElementsByTagName("input"),t=e.length;t--;){var n=e[t];n.checked&&ut.push(n)}}function rt(a){return setTimeout(a,0)}function kt(a){return clearTimeout(a)}ft&&T(document,"touchmove",function(a){(b.active||Ye)&&a.cancelable&&a.preventDefault()});b.utils={on:T,off:x,css:v,find:Qt,is:function(e,t){return!!re(e,t,e,!1)},extend:Rn,throttle:en,closest:re,toggleClass:Q,clone:nn,index:te,nextTick:rt,cancelNextTick:kt,detectDirection:rn,getChild:ze,expando:K};b.get=function(a){return a[K]};b.mount=function(){for(var a=arguments.length,e=new Array(a),t=0;t<a;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(b.utils=pe(pe({},b.utils),n.utils)),Ze.mount(n)})};b.create=function(a,e){return new b(a,e)};b.version=Mn;var F=[],He,Ot,It=!1,Et,St,ct,Le;function ta(){function a(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return a.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?T(document,"dragover",this._handleAutoScroll):this.options.supportPointer?T(document,"pointermove",this._handleFallbackAutoScroll):n.touches?T(document,"touchmove",this._handleFallbackAutoScroll):T(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?x(document,"dragover",this._handleAutoScroll):(x(document,"pointermove",this._handleFallbackAutoScroll),x(document,"touchmove",this._handleFallbackAutoScroll),x(document,"mousemove",this._handleFallbackAutoScroll)),qt(),it(),Xn()},nulling:function(){ct=Ot=He=It=Le=Et=St=null,F.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var o=this,r=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,i=document.elementFromPoint(r,l);if(ct=t,n||this.options.forceAutoScrollFallback||Ke||we||We){Tt(t,this.options,i,n);var d=Ee(i,!0);It&&(!Le||r!==Et||l!==St)&&(Le&&qt(),Le=setInterval(function(){var u=Ee(document.elementFromPoint(r,l),!0);u!==d&&(d=u,it()),Tt(t,o.options,u,n)},10),Et=r,St=l)}else{if(!this.options.bubbleScroll||Ee(i,!0)===he()){it();return}Tt(t,this.options,Ee(i,!1),!1)}}},_e(a,{pluginName:"scroll",initializeByDefault:!0})}function it(){F.forEach(function(a){clearInterval(a.pid)}),F=[]}function qt(){clearInterval(Le)}var Tt=en(function(a,e,t,n){if(e.scroll){var o=(a.touches?a.touches[0]:a).clientX,r=(a.touches?a.touches[0]:a).clientY,l=e.scrollSensitivity,i=e.scrollSpeed,d=he(),u=!1,m;Ot!==t&&(Ot=t,it(),He=e.scroll,m=e.scrollFn,He===!0&&(He=Ee(t,!0)));var g=0,y=He;do{var O=y,D=R(O),k=D.top,Z=D.bottom,ne=D.left,M=D.right,j=D.width,X=D.height,ie=void 0,B=void 0,le=O.scrollWidth,Se=O.scrollHeight,G=v(O),Te=O.scrollLeft,se=O.scrollTop;O===d?(ie=j<le&&(G.overflowX==="auto"||G.overflowX==="scroll"||G.overflowX==="visible"),B=X<Se&&(G.overflowY==="auto"||G.overflowY==="scroll"||G.overflowY==="visible")):(ie=j<le&&(G.overflowX==="auto"||G.overflowX==="scroll"),B=X<Se&&(G.overflowY==="auto"||G.overflowY==="scroll"));var Ce=ie&&(Math.abs(M-o)<=l&&Te+j<le)-(Math.abs(ne-o)<=l&&!!Te),ae=B&&(Math.abs(Z-r)<=l&&se+X<Se)-(Math.abs(k-r)<=l&&!!se);if(!F[g])for(var de=0;de<=g;de++)F[de]||(F[de]={});(F[g].vx!=Ce||F[g].vy!=ae||F[g].el!==O)&&(F[g].el=O,F[g].vx=Ce,F[g].vy=ae,clearInterval(F[g].pid),(Ce!=0||ae!=0)&&(u=!0,F[g].pid=setInterval((function(){n&&this.layer===0&&b.active._onTouchMove(ct);var ke=F[this.layer].vy?F[this.layer].vy*i:0,ue=F[this.layer].vx?F[this.layer].vx*i:0;typeof m=="function"&&m.call(b.dragged.parentNode[K],ue,ke,a,ct,F[this.layer].el)!=="continue"||tn(F[this.layer].el,ue,ke)}).bind({layer:g}),24))),g++}while(e.bubbleScroll&&y!==d&&(y=Ee(y,!1)));It=u}},30),un=function(e){var t=e.originalEvent,n=e.putSortable,o=e.dragEl,r=e.activeSortable,l=e.dispatchSortableEvent,i=e.hideGhostForTarget,d=e.unhideGhostForTarget;if(t){var u=n||r;i();var m=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,g=document.elementFromPoint(m.clientX,m.clientY);d(),u&&!u.el.contains(g)&&(l("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function Pt(){}Pt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=ze(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:un};_e(Pt,{pluginName:"revertOnSpill"});function Mt(){}Mt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,o=n||this.sortable;o.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),o.animateAll()},drop:un};_e(Mt,{pluginName:"removeOnSpill"});b.mount(new ta);b.mount(Mt,Pt);const na={class:"page-background content-scroller"},aa={class:"pt-25 w-full z-10 shadow-md bg-header text-rice-500"},oa={class:"container mx-auto flex items-center p-4"},ra={class:"w-1/3"},ia={class:"text"},la={class:"max-w-4xl mx-auto p-4 pt-10 text-[1.2rem]"},sa={class:"flex flex-col gap-4"},da={key:0,class:"text-red-500 text-sm mt-1"},ua={class:"flex flex-row gap-5"},ca={class:"w-1/2"},fa={key:0,class:"text-red-500 text-sm mt-1"},ha={class:"w-1/2"},pa={key:0,class:"text-red-500 text-sm mt-1"},ga={key:0,class:"text-red-500 text-sm mt-1"},ma={class:"mt-2 relative"},va={class:"relative"},ba=["onClick"],_a=["placeholder"],wa=["onClick"],ya={key:0,class:"px-3 py-2 text-gray-500"},Da={key:0,class:"text-red-500 text-sm mt-1"},xa={class:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md"},Ea={class:"flex items-center gap-2 text-sm text-blue-800"},Sa={key:0},Ta={key:1},Ca={key:2,class:"text-orange-600"},ka={key:0,class:"mt-4"},Oa={class:"bg-white border border-gray-200 rounded-md p-4"},Ia={class:"relative"},Aa={class:"h-8 bg-gray-100 rounded-full relative overflow-hidden"},Na=["onClick","title"],Pa={class:"text-xs text-white font-medium p-1 truncate"},Ma={class:"flex justify-between mt-2 text-xs text-gray-500"},Fa={key:0},Ra={key:1},Xa={class:"mt-3 flex flex-wrap gap-2 text-xs"},Ya={key:0,class:"flex items-center gap-1"},Ba={class:"flex flex-row gap-4"},$a={class:"mt-4 p-4 border border-gray-200 rounded-md"},za={class:"flex flex-col gap-3"},Ga={class:"flex gap-3"},Ha={class:"flex-1"},La=["min","max"],Wa={key:0,class:"text-orange-500 text-xs mt-1"},ja={class:"flex-1"},Va=["min","max"],Ua={key:0,class:"text-orange-500 text-xs mt-1"},qa={key:0,class:"p-2 bg-yellow-50 border border-yellow-200 rounded text-sm"},Ka={class:"text-yellow-700 text-xs space-y-1"},Za=["disabled"],Ja={key:0,class:"mt-4"},Qa={class:"flex items-center justify-between mb-3"},eo={class:"text-sm font-medium text-gray-700"},to=["data-id"],no={class:"flex items-start justify-between"},ao={class:"flex-1"},oo={class:"flex items-center gap-2"},ro={class:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full font-medium"},io={class:"font-medium text-gray-900"},lo={class:"mt-2 text-sm"},so={key:0,class:"text-gray-600"},uo={class:"text-gray-400 ml-2"},co={key:1,class:"text-orange-500"},fo={key:2,class:"text-red-500 text-xs mt-1"},ho={class:"flex items-center gap-2 ml-4"},po=["onClick"],go=["onClick"],mo={key:0,class:"mt-4 pt-4 border-t border-gray-200 bg-gray-50 -mx-4 -mb-4 px-4 pb-4 rounded-b-lg"},vo={class:"flex gap-3"},bo={class:"flex-1"},_o=["min","max"],wo={class:"flex-1"},yo=["min","max"],Do={class:"flex gap-2 mt-3"},xo=["onClick","disabled"],Eo={__name:"ActionNew",setup(a){En();const{user:e}=bn(),t=me({title:"",content:"",description:"",start_date:"",end_date:"",sdgs_goals:[],stages:[],cover_image_url:null}),n=In.filter(f=>f.value!==0).map(f=>({...f,title:f.title.replace(/<br\s*\/?>/g,"")})),o=me(""),r=me(!1),l=me(null),i=me({name:"",start_date:"",end_date:""}),d=me(-1),u=me({start_date:"",end_date:""}),m=me(null);let g=null;const y=J(()=>o.value?n.filter(f=>f.title.toLowerCase().includes(o.value.toLowerCase())&&!t.value.sdgs_goals.includes(f.value)):n.filter(f=>!t.value.sdgs_goals.includes(f.value))),O=J(()=>n.filter(f=>t.value.sdgs_goals.includes(f.value))),D=J(()=>!t.value.start_date||!t.value.end_date?!1:new Date(t.value.start_date)>new Date(t.value.end_date)),k=J(()=>i.value.name.trim()&&i.value.start_date&&i.value.end_date&&new Date(i.value.start_date)<=new Date(i.value.end_date)&&Pe(i.value)),Z=J(()=>t.value.start_date),ne=J(()=>!!t.value.end_date),M=J(()=>t.value.start_date),j=J(()=>t.value.end_date||Ft()),X=J(()=>t.value.stages.filter(f=>f.start_date&&f.end_date)),ie=J(()=>{const f=[],s=[...X.value].sort((w,p)=>new Date(w.start_date)-new Date(p.start_date));for(let w=0;w<s.length-1;w++){const p=s[w],C=s[w+1];new Date(p.end_date)>new Date(C.start_date)&&f.push({start:C.start_date,end:p.end_date<C.end_date?p.end_date:C.end_date})}return f}),B=J(()=>{const f={start:"",end:""};return i.value.start_date&&(t.value.start_date&&new Date(i.value.start_date)<new Date(t.value.start_date)&&(f.start="開始時間不能早於行動開始時間"),t.value.end_date&&new Date(i.value.start_date)>new Date(t.value.end_date)&&(f.start="開始時間不能晚於行動結束時間")),i.value.end_date&&t.value.end_date&&new Date(i.value.end_date)>new Date(t.value.end_date)&&(f.end="結束時間不能晚於行動結束時間"),f}),le=J(()=>{const f=[];if(!i.value.start_date||!i.value.end_date)return f;const s=new Date(i.value.start_date),w=new Date(i.value.end_date);return X.value.forEach((p,C)=>{const P=new Date(p.start_date),H=new Date(p.end_date);(s>=P&&s<H||w>P&&w<=H||s<=P&&w>=H)&&f.push(`與「${p.name}」時間重疊`)}),f}),Se=J(()=>u.value.start_date&&u.value.end_date&&new Date(u.value.start_date)<=new Date(u.value.end_date)),G=f=>{t.value.sdgs_goals.includes(f.value)||t.value.sdgs_goals.push(f.value),o.value="",r.value=!1},Te=f=>{const s=t.value.sdgs_goals.indexOf(f);s!==-1&&t.value.sdgs_goals.splice(s,1)},se=()=>{},Ce=()=>{if(!k.value)return;const f=Date.now().toString();t.value.stages.push({id:f,name:i.value.name.trim(),start_date:i.value.start_date,end_date:i.value.end_date}),i.value={name:"",start_date:"",end_date:""}},ae=f=>{t.value.stages.splice(f,1),d.value===f?d.value=-1:d.value>f&&d.value--},de=f=>{d.value=f;const s=t.value.stages[f];u.value={start_date:s.start_date||"",end_date:s.end_date||""}},ke=f=>{u.value.start_date&&u.value.end_date?new Date(u.value.start_date)<=new Date(u.value.end_date)?(t.value.stages[f].start_date=u.value.start_date,t.value.stages[f].end_date=u.value.end_date,d.value=-1):alert("結束時間必須晚於或等於開始時間"):alert("請填寫完整的時間資訊")},ue=()=>{d.value=-1,u.value={start_date:"",end_date:""}},V=f=>f?new Date(f).toLocaleDateString("zh-TW"):"",Oe=()=>{if(!t.value.start_date||!t.value.end_date)return"";const f=new Date(t.value.start_date),s=new Date(t.value.end_date),w=Math.abs(s-f);return`${Math.ceil(w/(1e3*60*60*24))} 天`},ht=(f,s)=>{if(!f||!s)return"";const w=new Date(f),p=new Date(s),C=Math.abs(p-w);return`${Math.ceil(C/(1e3*60*60*24))} 天`},Ft=()=>{if(!t.value.start_date)return null;const f=new Date(t.value.start_date);return f.setMonth(f.getMonth()+3),f.toISOString().split("T")[0]},Pe=f=>!(!f.start_date||!f.end_date||t.value.start_date&&new Date(f.start_date)<new Date(t.value.start_date)||t.value.end_date&&new Date(f.end_date)>new Date(t.value.end_date)),pt=(f,s)=>{const w=Rt(),p=new Date(f.start_date),C=new Date(f.end_date),P=new Date(M.value),H=Math.max(0,(p-P)/w*100),ge=(C-p)/w*100;return{left:`${H}%`,width:`${ge}%`,zIndex:10+s}},cn=f=>{const s=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-red-500"];return s[f%s.length]},fn=f=>{const s=Rt(),w=new Date(f.start),p=new Date(f.end),C=new Date(M.value),P=Math.max(0,(w-C)/s*100),H=(p-w)/s*100;return{left:`${P}%`,width:`${H}%`,zIndex:100}},Rt=()=>{const f=new Date(M.value);return new Date(j.value)-f},hn=f=>t.value.stages.findIndex(s=>s.id===f.id),pn=(f,s)=>{let w=[];return!f.start_date||!f.end_date?w.push("border-orange-300 bg-orange-50"):Pe(f)?w.push("border-gray-200"):w.push("border-red-300 bg-red-50"),X.value.some((C,P)=>{if(C.id===f.id)return!1;const H=new Date(f.start_date),ge=new Date(f.end_date),gt=new Date(C.start_date),mt=new Date(C.end_date);return H>=gt&&H<mt||ge>gt&&ge<=mt||H<=gt&&ge>=mt})&&w.push("border-yellow-300 bg-yellow-50"),w.join(" ")},Xt=(f,s)=>{if(!f.start_date||!f.end_date)return"";if(!Pe(f)){if(t.value.start_date&&new Date(f.start_date)<new Date(t.value.start_date))return"開始時間早於行動開始時間";if(t.value.end_date&&new Date(f.end_date)>new Date(t.value.end_date))return"結束時間晚於行動結束時間"}const w=X.value.filter(p=>{if(p.id===f.id)return!1;const C=new Date(f.start_date),P=new Date(f.end_date),H=new Date(p.start_date),ge=new Date(p.end_date);return C>=H&&C<ge||P>H&&P<=ge||C<=H&&P>=ge});return w.length>0?`與「${w[0].name}」${w.length>1?"等階段":""}時間重疊`:""},gn=()=>{m.value&&(g=b.create(m.value,{handle:".sortable-item",animation:150,onEnd:f=>{const{oldIndex:s,newIndex:w}=f;if(s!==w){const p=t.value.stages.splice(s,1)[0];t.value.stages.splice(w,0,p),t.value.stages.forEach(C=>{C.start_date="",C.end_date=""}),d.value=-1}}}))},U=me({title:!1,sdgs_goals:!1,content:!1,start_date:!1,end_date:!1,timeRange:!1}),Yt=Tn({content:"<p>開始寫下你的故事...</p>",extensions:[Cn,kn,On.configure({nested:!0})]});_n(l,()=>{r.value=!1}),wn(()=>{setTimeout(()=>{gn()},100)}),yn(()=>{Yt.value&&Yt.value.destroy(),g&&g.destroy()});const mn=async()=>{U.value={title:!1,sdgs_goals:!1,content:!1,start_date:!1,end_date:!1,timeRange:!1};let f=!1;if(t.value.start_date||(U.value.start_date=!0,f=!0),t.value.end_date||(U.value.end_date=!0,f=!0),D.value&&(U.value.timeRange=!0,f=!0),t.value.title.trim()||(U.value.title=!0,f=!0),t.value.sdgs_goals.length===0&&(U.value.sdgs_goals=!0,f=!0),f)return;Math.floor(new Date(t.value.start_date).getTime()/1e3),Math.floor(new Date(t.value.end_date).getTime()/1e3);const s={...t.value,activity_type:"workshop",objectives:[],institution_id:e.value.institution_id};console.log("New Action Data:",s);try{let w=await xn.createActivity(s);console.log(w)}catch{}};return(f,s)=>{const w=Dn("router-link");return S(),E("div",na,[c("header",aa,[c("div",oa,[c("div",ra,[Bt(w,{to:"/actions",class:"back-home-btn"},{default:vt(()=>[c("span",ia,[Bt(Sn,{align:"left"},{zh:vt(()=>[...s[11]||(s[11]=[ve("取消",-1)])]),en:vt(()=>[...s[12]||(s[12]=[ve("Cancel",-1)])]),_:1})]),s[13]||(s[13]=c("span",{class:"icon"},"←",-1))]),_:1})]),s[14]||(s[14]=c("div",{class:"w-1/3 text-center"},[c("h1",{class:"text-2xl md:text-3xl font-bold"},"建立行動")],-1)),s[15]||(s[15]=c("div",{class:"w-1/3"},null,-1))])]),c("main",la,[c("div",sa,[c("div",null,[s[16]||(s[16]=c("label",{for:"title",class:"block text-lg font-medium"},"標題*",-1)),ce(c("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=p=>t.value.title=p),id:"title",class:ye(["mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":U.value.title}])},null,2),[[fe,t.value.title]]),U.value.title?(S(),E("p",da," 請輸入標題 ")):L("",!0)]),c("div",ua,[c("div",ca,[s[17]||(s[17]=c("label",{for:"start_date",class:"block text-lg font-medium"},"起始時間*",-1)),ce(c("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=p=>t.value.start_date=p),id:"start_date",class:ye(["mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":U.value.start_date}])},null,2),[[fe,t.value.start_date]]),U.value.start_date?(S(),E("p",fa," 請輸入起始時間 ")):L("",!0)]),c("div",ha,[s[18]||(s[18]=c("label",{for:"end_date",class:"block text-lg font-medium"},"結束時間*",-1)),ce(c("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=p=>t.value.end_date=p),id:"end_date",class:ye(["mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",{"border-red-500":U.value.end_date}])},null,2),[[fe,t.value.end_date]]),U.value.end_date?(S(),E("p",pa," 請輸入結束時間 ")):L("",!0)])]),D.value?(S(),E("p",ga," 結束時間必須晚於起始時間 ")):L("",!0),c("div",null,[s[19]||(s[19]=c("label",{class:"block text-lg font-medium"},"SDGs標籤*",-1)),c("div",ma,[c("div",va,[c("div",{class:ye(["flex flex-wrap items-center gap-1 p-2 border border-gray-300 rounded-md shadow-sm focus-within:ring-indigo-500 focus-within:border-indigo-500 min-h-[2.5rem]",{"border-red-500":U.value.sdgs_goals}])},[(S(!0),E(Me,null,Fe(O.value,p=>(S(),E("span",{key:p.value,class:"inline-flex items-center px-2 py-1 text-sm bg-blue-500 text-white rounded-full"},[c("span",null,Y(p.title),1),c("button",{onClick:C=>Te(p.value),class:"ml-1 text-white hover:text-gray-200"}," × ",8,ba)]))),128)),ce(c("input",{type:"text","onUpdate:modelValue":s[3]||(s[3]=p=>o.value=p),onFocus:s[4]||(s[4]=p=>r.value=!0),onInput:se,class:"flex-1 min-w-0 outline-none bg-transparent",placeholder:O.value.length===0?"搜尋SDGs標籤...":"",ref:"searchInput"},null,40,_a),[[fe,o.value]])],2),r.value?(S(),E("div",{key:0,ref_key:"dropdown",ref:l,class:"absolute z-10 w-full bg-pblue-200 border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto mt-1"},[(S(!0),E(Me,null,Fe(y.value,p=>(S(),E("div",{key:p.value,onClick:C=>G(p),class:"px-3 py-2 hover:bg-orange-300 cursor-pointer"},Y(p.title),9,wa))),128)),y.value.length===0?(S(),E("div",ya," 無匹配的標籤 ")):L("",!0)],512)):L("",!0)]),U.value.sdgs_goals?(S(),E("p",Da," 請至少選擇一個SDGs標籤 ")):L("",!0)])]),c("div",null,[s[20]||(s[20]=c("label",{for:"description",class:"block text-lg font-medium"},"描述",-1)),ce(c("input",{type:"text","onUpdate:modelValue":s[5]||(s[5]=p=>t.value.description=p),id:"description",class:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[fe,t.value.description]])]),c("div",null,[s[43]||(s[43]=c("label",{class:"block text-lg font-medium"},"階段規劃",-1)),c("div",xa,[c("div",Ea,[s[21]||(s[21]=c("i",{class:"fa-solid fa-info-circle"},null,-1)),t.value.start_date&&t.value.end_date?(S(),E("span",Sa," 行動期間："+Y(V(t.value.start_date))+" 至 "+Y(V(t.value.end_date))+" （"+Y(Oe())+"） ",1)):t.value.start_date?(S(),E("span",Ta," 行動起始："+Y(V(t.value.start_date))+"（無結束期限） ",1)):(S(),E("span",Ca," 請先設定行動時間以便規劃階段 "))])]),t.value.stages.length>0&&Z.value?(S(),E("div",ka,[s[25]||(s[25]=c("div",{class:"text-sm font-medium text-gray-700 mb-2"}," 時間軸視覺化 ",-1)),c("div",Oa,[c("div",Ia,[c("div",Aa,[(S(!0),E(Me,null,Fe(X.value,(p,C)=>(S(),E("div",{key:p.id,style:$t(pt(p,C)),class:ye(["absolute h-full rounded transition-all duration-300 hover:opacity-80 cursor-pointer border-2 border-white",cn(C)]),onClick:P=>de(hn(p)),title:`${p.name}: ${V(p.start_date)} - ${V(p.end_date)}`},[c("div",Pa,Y(p.name),1)],14,Na))),128)),(S(!0),E(Me,null,Fe(ie.value,p=>(S(),E("div",{key:`overlap-${p.start}-${p.end}`,style:$t(fn(p)),class:"absolute h-full bg-red-500 opacity-70 border-2 border-red-600",title:"時間重疊"},null,4))),128))]),c("div",Ma,[c("span",null,Y(V(M.value)),1),ne.value?(S(),E("span",Fa,Y(V(j.value)),1)):(S(),E("span",Ra,"進行中..."))])]),c("div",Xa,[s[23]||(s[23]=c("div",{class:"flex items-center gap-1"},[c("div",{class:"w-3 h-3 bg-blue-500 rounded"}),c("span",null,"已規劃階段")],-1)),s[24]||(s[24]=c("div",{class:"flex items-center gap-1"},[c("div",{class:"w-3 h-3 bg-gray-300 rounded"}),c("span",null,"空檔期間")],-1)),ie.value.length>0?(S(),E("div",Ya,[...s[22]||(s[22]=[c("div",{class:"w-3 h-3 bg-red-500 rounded"},null,-1),c("span",null,"時間重疊",-1)])])):L("",!0)])])])):L("",!0),c("section",Ba,[c("div",$a,[s[31]||(s[31]=c("h3",{class:"text-md font-medium mb-3"},"新增階段",-1)),c("div",za,[c("div",null,[s[26]||(s[26]=c("label",{for:"newStageName",class:"block text-sm font-medium"},"階段名稱",-1)),ce(c("input",{type:"text","onUpdate:modelValue":s[6]||(s[6]=p=>i.value.name=p),id:"newStageName",placeholder:"輸入階段名稱",class:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[fe,i.value.name]])]),c("div",Ga,[c("div",Ha,[s[27]||(s[27]=c("label",{for:"newStageStartTime",class:"block text-sm font-medium"},"開始時間",-1)),ce(c("input",{type:"date","onUpdate:modelValue":s[7]||(s[7]=p=>i.value.start_date=p),id:"newStageStartTime",min:t.value.start_date,max:t.value.end_date,class:ye(["mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",{"border-orange-500":B.value.start}])},null,10,La),[[fe,i.value.start_date]]),B.value.start?(S(),E("p",Wa,Y(B.value.start),1)):L("",!0)]),c("div",ja,[s[28]||(s[28]=c("label",{for:"newStageEndTime",class:"block text-sm font-medium"},"結束時間",-1)),ce(c("input",{type:"date","onUpdate:modelValue":s[8]||(s[8]=p=>i.value.end_date=p),id:"newStageEndTime",min:i.value.start_date||t.value.start_date,max:t.value.end_date,class:ye(["mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",{"border-orange-500":B.value.end}])},null,10,Va),[[fe,i.value.end_date]]),B.value.end?(S(),E("p",Ua,Y(B.value.end),1)):L("",!0)])]),le.value.length>0?(S(),E("div",qa,[s[29]||(s[29]=c("div",{class:"text-yellow-800 font-medium mb-1"}," ⚠️ 時間衝突警告： ",-1)),c("ul",Ka,[(S(!0),E(Me,null,Fe(le.value,p=>(S(),E("li",{key:p},Y(p),1))),128))])])):L("",!0),c("button",{onClick:Ce,disabled:!k.value,class:"self-start bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-sm transition-colors"},[...s[30]||(s[30]=[c("i",{class:"fa-solid fa-plus mr-1"},null,-1),ve(" 新增階段 ",-1)])],8,Za)])]),t.value.stages.length>0?(S(),E("div",Ja,[c("div",Qa,[c("div",eo," 已規劃階段 ("+Y(t.value.stages.length)+") ",1),s[32]||(s[32]=c("div",{class:"text-xs text-gray-500"},"可拖曳調整順序",-1))]),c("div",{ref_key:"sortableContainer",ref:m,class:"space-y-3"},[(S(!0),E(Me,null,Fe(t.value.stages,(p,C)=>(S(),E("div",{key:p.id,"data-id":p.id,class:ye(["sortable-item p-4 border rounded-lg bg-white hover:shadow-md transition-all duration-200",pn(p)])},[c("div",no,[c("div",ao,[c("div",oo,[c("span",ro," 第"+Y(C+1)+"階段 ",1),c("div",io,Y(p.name),1)]),c("div",lo,[p.start_date&&p.end_date?(S(),E("div",so,[s[33]||(s[33]=c("i",{class:"fa-solid fa-calendar mr-1"},null,-1)),ve(" "+Y(V(p.start_date))+" 至 "+Y(V(p.end_date))+" ",1),c("span",uo," ("+Y(ht(p.start_date,p.end_date))+") ",1)])):(S(),E("div",co,[...s[34]||(s[34]=[c("i",{class:"fa-solid fa-exclamation-triangle mr-1"},null,-1),ve(" 請設定時間 ",-1)])])),Xt(p)?(S(),E("div",fo,Y(Xt(p)),1)):L("",!0)])]),c("div",ho,[c("button",{onClick:P=>de(C),class:"text-blue-500 hover:text-blue-700 text-sm px-2 py-1 rounded hover:bg-blue-50 transition-colors",title:"編輯時間"},[...s[35]||(s[35]=[c("i",{class:"fa-solid fa-edit mr-1"},null,-1),ve("編輯 ",-1)])],8,po),c("button",{onClick:P=>ae(C),class:"text-red-500 hover:text-red-700 text-sm px-2 py-1 rounded hover:bg-red-50 transition-colors",title:"刪除階段"},[...s[36]||(s[36]=[c("i",{class:"fa-solid fa-trash mr-1"},null,-1),ve("刪除 ",-1)])],8,go),s[37]||(s[37]=c("div",{class:"text-gray-400 cursor-move px-2 py-1 hover:text-gray-600",title:"拖曳排序"},[c("i",{class:"fa-solid fa-grip-vertical"})],-1))])]),d.value===C?(S(),E("div",mo,[s[42]||(s[42]=c("div",{class:"text-sm font-medium text-gray-700 mb-3"}," 編輯階段時間 ",-1)),c("div",vo,[c("div",bo,[s[38]||(s[38]=c("label",{class:"block text-sm font-medium text-gray-700"},"開始時間",-1)),ce(c("input",{type:"date","onUpdate:modelValue":s[9]||(s[9]=P=>u.value.start_date=P),min:t.value.start_date,max:t.value.end_date,class:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,8,_o),[[fe,u.value.start_date]])]),c("div",wo,[s[39]||(s[39]=c("label",{class:"block text-sm font-medium text-gray-700"},"結束時間",-1)),ce(c("input",{type:"date","onUpdate:modelValue":s[10]||(s[10]=P=>u.value.end_date=P),min:u.value.start_date||t.value.start_date,max:t.value.end_date,class:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,8,yo),[[fe,u.value.end_date]])])]),c("div",Do,[c("button",{onClick:P=>ke(C),disabled:!Se.value,class:"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},[...s[40]||(s[40]=[c("i",{class:"fa-solid fa-check mr-1"},null,-1),ve("儲存 ",-1)])],8,xo),c("button",{onClick:ue,class:"bg-gray-500 text-white px-3 py-1 rounded text-sm hover:bg-gray-600 transition-colors"},[...s[41]||(s[41]=[c("i",{class:"fa-solid fa-times mr-1"},null,-1),ve("取消 ",-1)])])])])):L("",!0)],10,to))),128))],512)])):L("",!0)])]),c("div",{class:"self-end"},[c("button",{onClick:mn,class:"bg-green-500 text-white px-6 py-2 rounded-md hover:bg-green-600"}," 儲存 ")])])])])}}},Oo=vn(Eo,[["__scopeId","data-v-6b16c4a4"]]);export{Oo as default};
