import{r as c,g as w,c as i,o as l,b as e,s as y,x as P,y as B,n as D,t as n,F as u,h as p,i as C,j as M,m as S,l as m}from"./index-CrZNFqyU.js";import{t as U}from"./SDGs_goal-D1XSLY4x.js";const E="/Pinghe/assets/Background_1-CQ1SmFLY.png",L="/Pinghe/assets/Background_2-C9DmGNh3.png",T="/Pinghe/assets/Bar_Selected-Bjc_qhgQ.png",F="/Pinghe/assets/Bar_Unselected-DiqUIWwT.png",I="/Pinghe/assets/LoadingTrain-Dl9H4zbh.png",z="/Pinghe/assets/MainPage_Background-DnFHI_ZY.png",N="/Pinghe/assets/MainPage_Background-CNRyYgac.webp",j="/Pinghe/assets/MainPage_Example-D6pDo3pp.png",R="/Pinghe/assets/MainPage_Pic-DoeJb_t_.png",Y="/Pinghe/assets/MainPage_Pic-DEf4BASO.webp",$="/Pinghe/assets/Title-DP11h-Zm.png",H="/Pinghe/assets/lightBulb-DmS65tyD.png",V="/Pinghe/assets/lightBulb2-o5XC2Rg-.png",W="/Pinghe/assets/logo-_x_Dc33F.png",q="/Pinghe/assets/logo_BW-De8MHFbm.png",G="/Pinghe/assets/%E5%B9%B3%E5%92%8C%E5%9C%8B%E5%B0%8F_mobile_Example-CMnBeDsY.png",O=[{id:1,title:"讀經教育",time:"1753977600",types:[4],intro:"全校讀論語 星期四讀經和鎮長。",img_url:"story-bg.webp",description:"全校讀論語 星期四讀經和鎮長。"},{id:2,title:"舞蹈社團",time:"1741977600",types:[4],intro:"精彩的舞蹈表演，獲得滿堂彩。",img_url:"story-bg.webp",description:"精彩的舞蹈表演，獲得滿堂彩。"},{id:3,title:"社區踏查",time:"1753907600",types:[11],intro:"",img_url:"",description:""},{id:4,title:"社區踏查",time:"",types:[11],intro:"",img_url:"story-bg.webp",description:""}],Q={class:"page-background content-scroller"},Z={class:"pt-25 w-full z-10 shadow-md bg-header text-rice-500"},A={class:"container mx-auto flex items-center p-4"},J={class:"w-1/3"},X={class:"max-w-4xl mx-auto p-4 pt-10 text-[1.2rem]"},K={key:0,class:"animate-fade-in-up flex flex-col gap-8"},ee={class:"relative z-10 text-white"},se={class:"text-4xl font-bold mb-4"},te={class:"mb-2 text-lg"},ae={class:"flex flex-wrap gap-2 mt-2"},ne={class:"flex flex-col gap-4 items-start"},ie={class:"text-gray-700 leading-relaxed w-full"},le={class:"mb-6"},oe={class:"flex flex-col gap-4"},re={class:"font-bold"},ge={class:"text-gray-800"},_e={class:"flex items-center justify-end mt-2"},ce=["onClick"],de={class:"ml-1"},ue={key:1},he={__name:"StoryDetail",props:{id:String},setup(b){const h=b,a=c(O.find(o=>o.id===parseInt(h.id))),v=w(()=>{if(!a.value)return{};const o=a.value.img_url||"Background_2.png";try{return{backgroundImage:`url(${new URL(Object.assign({"../assets/images/Background_1.png":E,"../assets/images/Background_2.png":L,"../assets/images/Bar_Selected.png":T,"../assets/images/Bar_Unselected.png":F,"../assets/images/LoadingTrain.png":I,"../assets/images/MainPage_Background.png":z,"../assets/images/MainPage_Background.webp":N,"../assets/images/MainPage_Example.png":j,"../assets/images/MainPage_Pic.png":R,"../assets/images/MainPage_Pic.webp":Y,"../assets/images/Title.png":$,"../assets/images/lightBulb.png":H,"../assets/images/lightBulb2.png":V,"../assets/images/logo.png":W,"../assets/images/logo_BW.png":q,"../assets/images/平和國小_mobile_Example.png":G})[`../assets/images/${o}`],import.meta.url).href})`}}catch(s){return console.error(s),{backgroundImage:`url(${new URL("/Pinghe/assets/Background_2-C9DmGNh3.png",import.meta.url).href})`}}}),d={name:"我"},r=c(""),_=c([{id:1,author:"小明",text:"這篇文章真棒！",likes:5,liked:!1},{id:2,author:"我",text:"寫得很好，學到很多。",likes:2,liked:!0}]),x=()=>{r.value.trim()!==""&&(_.value.unshift({id:Date.now(),author:d.name,text:r.value,likes:0,liked:!1}),r.value="")},f=o=>{const s=_.value.find(g=>g.id===o);s&&(s.liked?s.likes--:s.likes++,s.liked=!s.liked)},k=()=>{navigator.share?navigator.share({title:a.value.title,text:a.value.intro,url:window.location.href}).catch(console.error):(navigator.clipboard.writeText(window.location.href),alert("連結已複製到剪貼簿！"))};return(o,s)=>{const g=B("router-link");return l(),i("div",Q,[e("header",Z,[e("div",A,[e("div",J,[y(g,{to:"/story",class:"back-home-btn"},{default:P(()=>[...s[1]||(s[1]=[e("span",{class:"text"},"回上頁",-1),e("span",{class:"icon"},"←",-1)])]),_:1})]),s[2]||(s[2]=e("div",{class:"w-1/3 text-center"},null,-1)),s[3]||(s[3]=e("div",{class:"w-1/3"},null,-1))])]),e("main",X,[a.value?(l(),i("section",K,[e("div",{style:D(v.value),class:"relative bg-cover bg-center bg-opacity-70 p-7 rounded-md md:h-80 grid grid-cols-1 content-end overflow-hidden"},[s[4]||(s[4]=e("div",{class:"absolute inset-0 bg-black/40"},null,-1)),e("div",ee,[e("h1",se,n(a.value.title),1),e("p",te,n(a.value.intro),1),e("small",null,n(new Date(a.value.time*1e3).toLocaleDateString()),1),e("div",ae,[(l(!0),i(u,null,p(a.value.types,t=>(l(),i("span",{key:t,class:"px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800"},n(S(U)[t].title),1))),128))])])],4),e("section",ne,[e("button",{onClick:k,class:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 self-end"}," 分享 "),e("p",ie,n(a.value.description),1)]),e("section",null,[s[5]||(s[5]=e("h2",{class:"text-2xl font-bold mb-4"},"留言板",-1)),e("div",le,[C(e("textarea",{"onUpdate:modelValue":s[0]||(s[0]=t=>r.value=t),class:"w-full p-2 border rounded-md",rows:"3",placeholder:"在這裡寫下你的留言..."},null,512),[[M,r.value]]),e("button",{onClick:x,class:"mt-2 bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600"}," 發布留言 ")]),e("div",oe,[(l(!0),i(u,null,p(_.value,t=>(l(),i("div",{key:t.id,class:m(["p-4 rounded-md",t.author===d.name?"bg-green-100":"bg-gray-100"])},[e("p",re,n(t.author),1),e("p",ge,n(t.text),1),e("div",_e,[e("button",{onClick:pe=>f(t.id),class:"text-gray-500 hover:text-red-500"},[e("i",{class:m(["fa-heart",t.liked?"fa-solid text-red-500":"fa-regular"])},null,2),e("span",de,n(t.likes),1)],8,ce)])],2))),128))])])])):(l(),i("div",ue,[...s[6]||(s[6]=[e("p",null,"找不到這篇故事。",-1)])]))])])}}};export{he as default};
