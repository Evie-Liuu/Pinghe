import{e as F,f as H,r as x,g as _,w as U,c as d,o as u,b as e,a as $,F as S,h as I,i as j,v as A,t as y,j as L,u as E,k as g,l as b,m as c,n as R,p as B,q as O,s as q,x as G,y as J}from"./index-CYtrqfdL.js";import{t as z}from"./SDGs_goal-D1XSLY4x.js";import{C as h}from"./CJKSub-DM2NgIw1.js";const K=[{id:1,title:"剩食問題",group:"一年忠班",startTime:"1746028800",endTime:"1753977600",types:[2],intro:"",progress:10,thumbnail:"thumb2.jpg",description:""},{id:2,title:"剩食問題",group:"一年孝班",startTime:"1746028800",endTime:"1753977600",types:[2],intro:"",progress:40,thumbnail:"thumb2.jpg",description:""},{id:3,title:"節約用水",group:"全校",startTime:"",endTime:"",types:[6],intro:"",progress:80,thumbnail:"thumb2.jpg",description:""},{id:4,title:"社區踏查",group:"",startTime:"",endTime:"",types:[2,3],intro:"",progress:50,thumbnail:"thumb2.jpg",description:""}];function M(v,w){const s=r=>{v.value&&!v.value.contains(r.target)&&w()};F(()=>document.addEventListener("mousedown",s)),H(()=>document.removeEventListener("mousedown",s))}const X={class:"text-lg"},Q=["innerHTML"],W={key:0,class:"absolute z-10 mt-2 w-56 bg-white rounded-md shadow-lg max-h-60 overflow-y-auto text-black"},Y={key:0,class:"p-2 border-t border-gray-200"},Z={class:"inline-flex items-center w-full cursor-pointer"},ee=["value"],te=["innerHTML"],se={key:0,class:"absolute z-10 mt-2 w-48 bg-white rounded-md shadow-lg text-black"},le={key:0,class:"flex gap-2 items-center text-black bg-white/50 p-2 rounded-lg"},ne={__name:"HeaderFilter",emits:["update:filters"],setup(v,{emit:w}){const s=x([]),r=x(!1),t=x("all"),a=x(!1),p=x(""),o=x(""),l=x(null),i=x(null);M(l,()=>{r.value=!1}),M(i,()=>{a.value=!1});const f=w,k=_(()=>z.filter(D=>D.value!==0)),C=_(()=>{if(s.value.length===0)return"SDGs";if(s.value.length>1)return`SDGs (${s.value.length})`;const D=z.find(n=>n.value===s.value[0]);return D?D.title.replace(/<br\s*\/?>/g," "):"SDGs"}),V=_(()=>{switch(t.value){case"day":return"最近一天";case"week":return"最近一周";case"custom":return"自訂範圍";default:return"發布時間"}});function T(D){t.value=D,a.value=!1,D!=="custom"&&(p.value="",o.value="")}return U([s,t,p,o],()=>{f("update:filters",{sdgs:s.value,time:t.value,startDate:p.value,endDate:o.value})},{deep:!0,immediate:!0}),(D,n)=>(u(),d("div",X,[e("div",{class:"relative",ref_key:"sdgDropdownRef",ref:l},[e("button",{onClick:n[0]||(n[0]=m=>r.value=!r.value),class:"p-1 px-4 rounded-full bg-gray-500 text-white min-w-[150px] text-left flex justify-between items-center gap-2"},[e("span",{innerHTML:C.value,class:"truncate"},null,8,Q),n[10]||(n[10]=e("span",null,"▾",-1))]),r.value?(u(),d("div",W,[s.value.length>0?(u(),d("div",Y,[e("button",{onClick:n[1]||(n[1]=m=>s.value=[]),class:"text-sm text-blue-600 hover:underline w-full text-center"}," 清除選擇 ")])):$("",!0),(u(!0),d(S,null,I(k.value,m=>(u(),d("div",{key:m.value,class:"p-2 hover:bg-gray-100"},[e("label",Z,[j(e("input",{type:"checkbox",value:m.value,"onUpdate:modelValue":n[2]||(n[2]=N=>s.value=N),class:"h-5 w-5 text-green-600 rounded focus:ring-green-500 border-gray-300"},null,8,ee),[[A,s.value]]),e("span",{class:"ml-3 text-gray-700",innerHTML:m.title},null,8,te)])]))),128))])):$("",!0)],512),e("div",{class:"relative",ref_key:"timeDropdownRef",ref:i},[e("button",{onClick:n[3]||(n[3]=m=>a.value=!a.value),class:"p-1 px-4 rounded-full bg-gray-500 text-white min-w-[150px] text-left flex justify-between items-center gap-2"},[e("span",null,y(V.value),1),n[11]||(n[11]=e("span",null,"▾",-1))]),a.value?(u(),d("div",se,[e("div",{onClick:n[4]||(n[4]=m=>T("all")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 全部時間 "),e("div",{onClick:n[5]||(n[5]=m=>T("day")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 最近一天 "),e("div",{onClick:n[6]||(n[6]=m=>T("week")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 最近一周 "),e("div",{onClick:n[7]||(n[7]=m=>T("custom")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 自訂範圍 ")])):$("",!0)],512),t.value==="custom"?(u(),d("div",le,[j(e("input",{type:"date","onUpdate:modelValue":n[8]||(n[8]=m=>p.value=m),class:"p-1 border rounded-md"},null,512),[[L,p.value]]),n[12]||(n[12]=e("span",{class:"text-gray-600"},"至",-1)),j(e("input",{type:"date","onUpdate:modelValue":n[9]||(n[9]=m=>o.value=m),class:"p-1 border rounded-md"},null,512),[[L,o.value]])])):$("",!0)]))}},ae="/Pinghe/assets/lightBulb2-o5XC2Rg-.png",re=["onClick"],oe={class:"p-6 md:p-15 md:ps-55 flex flex-col justify-center w-full md:flex-1 text-sm md:text-lg"},ie={class:"text-xl md:text-2xl mb-2 md:mb-2"},de={class:"grid grid-cols-1 md:grid-cols-2 gap-x-4"},ue={class:"mb-2"},me={class:"text-md mb-2"},pe={class:"text-md mb-2 md:col-span-2"},ce={class:"flex items-center w-full md:w-70 gap-3 md:col-span-2"},ge={class:"relative flex-1 bg-gray-200 rounded-full h-2 overflow-hidden"},ve={class:"w-10 text-sm text-gray-700 text-left"},xe={class:"flex flex-wrap gap-2 mt-2 md:col-span-2"},fe={__name:"ActionCard",props:{filteredInfo:{type:Array,default:()=>[]}},setup(v){E();const w=r=>r<40?"bg-red-500":r<70?"bg-yellow-400":"bg-green-500",s=r=>{};return(r,t)=>(u(),d("div",q(G(r.$attrs)),[(u(!0),d(S,null,I(v.filteredInfo,a=>(u(),d("div",{class:"animate-fade-in-up cursor-pointer w-full md:max-w-7xl md:mx-auto min-h-96 md:max-h-80 bg-pblue-300 text-pblue-700 font-bold rounded-xl shadow-md overflow-hidden flex flex-col md:flex-row hover:scale-105",key:a.id,onClick:p=>s(a.id)},[t[11]||(t[11]=e("div",{class:"w-full md:w-2/5 flex items-end justify-center md:justify-end md:pr-10"},[e("img",{src:ae,alt:"Card Image",class:"w-full h-full object-cover object-center"})],-1)),e("div",oe,[e("h2",ie,[e("span",null,[b(h,{align:"center"},{zh:c(()=>[...t[0]||(t[0]=[e("span",{class:"text-xl md:text-2xl"},"主題",-1)])]),en:c(()=>[...t[1]||(t[1]=[g("Issue",-1)])]),_:1})]),g(" ："+y(a.title),1)]),e("div",de,[e("p",ue,[b(h,{align:"center"},{zh:c(()=>[...t[2]||(t[2]=[e("span",{class:"text-lg md:text-xl"},"時間",-1)])]),en:c(()=>[...t[3]||(t[3]=[g("Time",-1)])]),_:1}),g(" ："+y(a.startTime.length?new Date(a.startTime*1e3).toLocaleDateString()+" ~ "+new Date(a.endTime*1e3).toLocaleDateString():"無"),1)]),e("p",me,[b(h,{align:"left"},{zh:c(()=>[...t[4]||(t[4]=[e("span",{class:"text-lg md:text-xl"},"成員",-1)])]),en:c(()=>[...t[5]||(t[5]=[g("Member",-1)])]),_:1}),g(" ："+y(a.group),1)]),e("p",pe,[b(h,{align:"left"},{zh:c(()=>[...t[6]||(t[6]=[e("span",{class:"text-lg md:text-xl"},"描述",-1)])]),en:c(()=>[...t[7]||(t[7]=[g("Description",-1)])]),_:1}),g(" ："+y(a.intro),1)]),e("div",ce,[b(h,{align:"left"},{zh:c(()=>[...t[8]||(t[8]=[e("span",{class:"text-lg md:text-xl"},"進度",-1)])]),en:c(()=>[...t[9]||(t[9]=[g("Progress",-1)])]),_:1}),t[10]||(t[10]=g(" ： ",-1)),e("div",ge,[e("div",{class:B(["h-2 rounded-full transition-all duration-500",w(a.progress)]),style:R({width:a.progress+"%"})},null,6)]),e("span",ve,y(a.progress)+"% ",1)]),e("div",xe,[(u(!0),d(S,null,I(a.types,p=>(u(),d("span",{key:p,class:"px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800"},y(O(z)[p].title),1))),128))])])])],8,re))),128))],16))}},be={key:0,class:"text-base md:text-[1.6rem]"},we=["disabled"],ye=["disabled"],ke={__name:"PageLabel",props:{totalItems:{type:Number,required:!0},itemsPerPage:{type:Number,default:6},modelValue:{type:Number,required:!0}},emits:["update:modelValue"],setup(v,{emit:w}){const s=v,r=w,t=_(()=>s.totalItems===0?1:Math.ceil(s.totalItems/s.itemsPerPage)),a=()=>{s.modelValue<t.value&&r("update:modelValue",s.modelValue+1)},p=()=>{s.modelValue>1&&r("update:modelValue",s.modelValue-1)};return(o,l)=>t.value>=1?(u(),d("div",be,[e("button",{onClick:p,disabled:v.modelValue===1,class:"px-4 py-2 bg-gray-300 rounded-md disabled:opacity-50"}," 上一頁 ",8,we),e("span",null,"第 "+y(v.modelValue)+" / "+y(t.value)+" 頁",1),e("button",{onClick:a,disabled:v.modelValue===t.value,class:"px-4 py-2 bg-gray-300 rounded-md disabled:opacity-50"}," 下一頁 ",8,ye)])):$("",!0)}},De={class:"page-background content-scroller"},he={class:"relative z-5 pt-25 w-full shadow-md bg-header text-rice-500"},$e={class:"container mx-auto flex items-center p-4"},_e={class:"w-1/3"},Te={class:"text"},Ce={class:"p-10 flex flex-col justify-center items-center gap-8 max-w-7xl md:mx-auto"},Ve={key:0,class:"text-center text-gray-500 mt-8"},P=3,Ie={__name:"Actions",setup(v){const w=x(K),s=x({sdgs:[],time:"all",startDate:"",endDate:""}),r=x(1),t=o=>{s.value=o,r.value=1},a=_(()=>{let o=w.value;if(s.value.sdgs.length>0&&(o=o.filter(l=>l.types&&l.types.some(i=>s.value.sdgs.includes(i)))),s.value.time!=="all"){const l=new Date;let i,f;switch(s.value.time){case"day":f=new Date(l),i=new Date(l),i.setDate(l.getDate()-1);break;case"week":f=new Date(l),i=new Date(l),i.setDate(l.getDate()-7);break;case"custom":s.value.startDate&&s.value.endDate&&(i=new Date(s.value.startDate),i.setHours(0,0,0,0),f=new Date(s.value.endDate),f.setHours(23,59,59,999));break}i&&f&&(o=o.filter(k=>{if(!k.startTime||!k.endTime||!String(k.startTime).trim()||!String(k.endTime).trim())return!1;const C=new Date(Number(k.startTime)*1e3),V=new Date(Number(k.endTime)*1e3);return C<=f&&V>=i}))}return o}),p=_(()=>{const o=(r.value-1)*P,l=o+P;return a.value.slice(o,l)});return(o,l)=>{const i=J("router-link");return u(),d("div",De,[e("header",he,[e("div",$e,[e("div",_e,[b(i,{to:"/",class:"back-home-btn"},{default:c(()=>[e("span",Te,[b(h,{align:"center"},{zh:c(()=>[...l[1]||(l[1]=[g("回首頁",-1)])]),en:c(()=>[...l[2]||(l[2]=[g("Home",-1)])]),_:1})]),l[3]||(l[3]=e("span",{class:"icon"},"←",-1))]),_:1})]),l[4]||(l[4]=e("div",{class:"w-1/3 text-center"},[e("h1",{class:"text-2xl md:text-3xl font-bold"},"行動追蹤")],-1)),l[5]||(l[5]=e("div",{class:"w-1/3"},null,-1))])]),e("main",Ce,[b(ne,{"onUpdate:filters":t,class:"flex flex-wrap justify-center items-center gap-4"}),b(fe,{filteredInfo:p.value,class:"flex flex-col gap-5 w-full px-4 md:px-0"},null,8,["filteredInfo"]),a.value.length===0?(u(),d("div",Ve,[...l[6]||(l[6]=[e("p",null,"找不到符合條件的行動。",-1)])])):$("",!0),b(ke,{class:"flex justify-center items-center gap-4 mt-8",totalItems:a.value.length,itemsPerPage:P,modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=f=>r.value=f)},null,8,["totalItems","modelValue"])])])}}};export{Ie as default};
