import{_ as C,a as U,b as P,c as S,d as D,e as L,f as M,g as T,h as z,i as I,j as E,k as N,l as V,m as $,n as j,o as R,p as F,q,r as G,s as J,t as K,u as O,v as W,w as A}from"./平和國小_mobile_Example-DLfGNsGK.js";import{r as d,k as H,c as i,o,b as e,f as m,w as u,e as p,l as Q,n as X,t as l,F as b,d as v,C as Y,E as Z,h as ee,g as f}from"./index-DMMpmzwx.js";import{i as se}from"./Story-CnzZU_3N.js";import{t as te}from"./SDGs_goal-D1XSLY4x.js";import{C as ae}from"./CJKSub-UyIsZpim.js";const le={class:"page-background content-scroller"},ie={class:"pt-25 w-full z-10 shadow-md bg-header text-rice-500"},oe={class:"container mx-auto flex items-center p-4"},ne={class:"w-1/3"},_e={class:"text"},re={class:"max-w-4xl mx-auto p-4 pt-10 text-[1.2rem]"},ge={key:0,class:"animate-fade-in-up flex flex-col gap-8"},de={class:"relative z-10 text-white"},ue={class:"text-4xl font-bold mb-4"},ce={class:"mb-2 text-lg"},me={class:"flex flex-wrap gap-2 mt-2"},pe={class:"flex flex-col gap-4 items-start"},be={class:"text-gray-700 leading-relaxed w-full"},ve={class:"mb-6"},fe={class:"flex flex-col gap-4"},xe={class:"font-bold"},he={class:"text-gray-800"},ke={class:"flex items-center justify-end mt-2"},we=["onClick"],ye={class:"ml-1"},Be={key:1},Me={__name:"StoryDetail",props:{id:String},setup(x){const h=x,a=d(se.find(n=>n.id===parseInt(h.id))),k=H(()=>{if(!a.value)return{};const n=a.value.img_url||"Background_2.png";try{return{backgroundImage:`url(${new URL(Object.assign({"../assets/images/Background_1.png":A,"../assets/images/Background_2.png":W,"../assets/images/Bar_Selected.png":O,"../assets/images/Bar_Unselected.png":K,"../assets/images/LoadingTrain.png":J,"../assets/images/Logo.gif":G,"../assets/images/MainPage_Background.png":q,"../assets/images/MainPage_Background.webp":F,"../assets/images/MainPage_Example.png":R,"../assets/images/MainPage_Pic.png":j,"../assets/images/MainPage_Pic.webp":$,"../assets/images/Title.png":V,"../assets/images/figure1.png":N,"../assets/images/figure2.png":E,"../assets/images/figure3.png":I,"../assets/images/figure4.png":z,"../assets/images/figure5.png":T,"../assets/images/lightBulb.png":M,"../assets/images/lightBulb2.png":L,"../assets/images/logo.png":D,"../assets/images/logo_BW.png":S,"../assets/images/story_bg.png":P,"../assets/images/student.png":U,"../assets/images/平和國小_mobile_Example.png":C})[`../assets/images/${n}`],import.meta.url).href})`}}catch(s){return console.error(s),{backgroundImage:`url(${new URL("/Pinghe/assets/Background_2-C9DmGNh3.png",import.meta.url).href})`}}}),c={name:"我"},_=d(""),g=d([{id:1,author:"小明",text:"這篇文章真棒！",likes:5,liked:!1},{id:2,author:"我",text:"寫得很好，學到很多。",likes:2,liked:!0}]),w=()=>{_.value.trim()!==""&&(g.value.unshift({id:Date.now(),author:c.name,text:_.value,likes:0,liked:!1}),_.value="")},y=n=>{const s=g.value.find(r=>r.id===n);s&&(s.liked?s.likes--:s.likes++,s.liked=!s.liked)},B=()=>{navigator.share?navigator.share({title:a.value.title,text:a.value.intro,url:window.location.href}).catch(console.error):(navigator.clipboard.writeText(window.location.href),alert("連結已複製到剪貼簿！"))};return(n,s)=>{const r=Q("router-link");return o(),i("div",le,[e("header",ie,[e("div",oe,[e("div",ne,[m(r,{to:"/story",class:"back-home-btn"},{default:u(()=>[e("span",_e,[m(ae,{align:"center"},{zh:u(()=>[...s[1]||(s[1]=[p("回上頁",-1)])]),en:u(()=>[...s[2]||(s[2]=[p("Return",-1)])]),_:1})]),s[3]||(s[3]=e("span",{class:"icon"},"←",-1))]),_:1})]),s[4]||(s[4]=e("div",{class:"w-1/3 text-center"},null,-1)),s[5]||(s[5]=e("div",{class:"w-1/3"},null,-1))])]),e("main",re,[a.value?(o(),i("section",ge,[e("div",{style:X(k.value),class:"relative bg-cover bg-center bg-opacity-70 p-7 rounded-md md:h-80 grid grid-cols-1 content-end overflow-hidden"},[s[6]||(s[6]=e("div",{class:"absolute inset-0 bg-black/40"},null,-1)),e("div",de,[e("h1",ue,l(a.value.title),1),e("p",ce,l(a.value.intro),1),e("small",null,l(new Date(a.value.time*1e3).toLocaleDateString()),1),e("div",me,[(o(!0),i(b,null,v(a.value.types,t=>(o(),i("span",{key:t,class:"px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800"},l(ee(te)[t].title),1))),128))])])],4),e("section",pe,[e("button",{onClick:B,class:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 self-end"}," 分享 "),e("p",be,l(a.value.description),1)]),e("section",null,[s[7]||(s[7]=e("h2",{class:"text-2xl font-bold mb-4"},"留言板",-1)),e("div",ve,[Y(e("textarea",{"onUpdate:modelValue":s[0]||(s[0]=t=>_.value=t),class:"w-full p-2 border rounded-md",rows:"3",placeholder:"在這裡寫下你的留言..."},null,512),[[Z,_.value]]),e("button",{onClick:w,class:"mt-2 bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600"}," 發布留言 ")]),e("div",fe,[(o(!0),i(b,null,v(g.value,t=>(o(),i("div",{key:t.id,class:f(["p-4 rounded-md",t.author===c.name?"bg-green-100":"bg-gray-100"])},[e("p",xe,l(t.author),1),e("p",he,l(t.text),1),e("div",ke,[e("button",{onClick:Ce=>y(t.id),class:"text-gray-500 hover:text-red-500"},[e("i",{class:f(["fa-heart",t.liked?"fa-solid text-red-500":"fa-regular"])},null,2),e("span",ye,l(t.likes),1)],8,we)])],2))),128))])])])):(o(),i("div",Be,[...s[8]||(s[8]=[e("p",null,"找不到這篇故事。",-1)])]))])])}}};export{Me as default};
