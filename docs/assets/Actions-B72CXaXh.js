import{e as N,f as F,r as v,g as h,w as M,c as u,o as d,b as e,a as y,F as V,h as P,i as T,v as H,t as x,j as S,u as U,k as z,n as A,l as E,m as R,p as B,q as O,s as k,x as q,y as G}from"./index-Cg8rONlr.js";import{t as j}from"./SDGs_goal-D1XSLY4x.js";const X=[{id:1,title:"剩食問題",group:"一年忠班",startTime:"1746028800",endTime:"1753977600",types:[2],intro:"",progress:10,thumbnail:"thumb2.jpg",description:""},{id:2,title:"剩食問題",group:"一年孝班",startTime:"1746028800",endTime:"1753977600",types:[2],intro:"",progress:40,thumbnail:"thumb2.jpg",description:""},{id:3,title:"節約用水",group:"全校",startTime:"",endTime:"",types:[6],intro:"",progress:80,thumbnail:"thumb2.jpg",description:""},{id:4,title:"社區踏查",group:"",startTime:"",endTime:"",types:[2,3],intro:"",progress:50,thumbnail:"thumb2.jpg",description:""}];function I(p,f){const t=n=>{p.value&&!p.value.contains(n.target)&&f()};N(()=>document.addEventListener("mousedown",t)),F(()=>document.removeEventListener("mousedown",t))}const J={class:"text-lg"},K=["innerHTML"],Q={key:0,class:"absolute z-10 mt-2 w-56 bg-white rounded-md shadow-lg max-h-60 overflow-y-auto text-black"},W={key:0,class:"p-2 border-t border-gray-200"},Y={class:"inline-flex items-center w-full cursor-pointer"},Z=["value"],ee=["innerHTML"],te={key:0,class:"absolute z-10 mt-2 w-48 bg-white rounded-md shadow-lg text-black"},se={key:0,class:"flex gap-2 items-center text-black bg-white/50 p-2 rounded-lg"},le={__name:"HeaderFilter",emits:["update:filters"],setup(p,{emit:f}){const t=v([]),n=v(!1),o=v("all"),a=v(!1),c=v(""),r=v(""),l=v(null),i=v(null);I(l,()=>{n.value=!1}),I(i,()=>{a.value=!1});const g=f,b=h(()=>j.filter(w=>w.value!==0)),D=h(()=>{if(t.value.length===0)return"SDGs";if(t.value.length>1)return`SDGs (${t.value.length})`;const w=j.find(s=>s.value===t.value[0]);return w?w.title.replace(/<br\s*\/?>/g," "):"SDGs"}),$=h(()=>{switch(o.value){case"day":return"最近一天";case"week":return"最近一周";case"custom":return"自訂範圍";default:return"發布時間"}});function _(w){o.value=w,a.value=!1,w!=="custom"&&(c.value="",r.value="")}return M([t,o,c,r],()=>{g("update:filters",{sdgs:t.value,time:o.value,startDate:c.value,endDate:r.value})},{deep:!0,immediate:!0}),(w,s)=>(d(),u("div",J,[e("div",{class:"relative",ref_key:"sdgDropdownRef",ref:l},[e("button",{onClick:s[0]||(s[0]=m=>n.value=!n.value),class:"p-1 px-4 rounded-full bg-gray-500 text-white min-w-[150px] text-left flex justify-between items-center gap-2"},[e("span",{innerHTML:D.value,class:"truncate"},null,8,K),s[10]||(s[10]=e("span",null,"▾",-1))]),n.value?(d(),u("div",Q,[t.value.length>0?(d(),u("div",W,[e("button",{onClick:s[1]||(s[1]=m=>t.value=[]),class:"text-sm text-blue-600 hover:underline w-full text-center"}," 清除選擇 ")])):y("",!0),(d(!0),u(V,null,P(b.value,m=>(d(),u("div",{key:m.value,class:"p-2 hover:bg-gray-100"},[e("label",Y,[T(e("input",{type:"checkbox",value:m.value,"onUpdate:modelValue":s[2]||(s[2]=L=>t.value=L),class:"h-5 w-5 text-green-600 rounded focus:ring-green-500 border-gray-300"},null,8,Z),[[H,t.value]]),e("span",{class:"ml-3 text-gray-700",innerHTML:m.title},null,8,ee)])]))),128))])):y("",!0)],512),e("div",{class:"relative",ref_key:"timeDropdownRef",ref:i},[e("button",{onClick:s[3]||(s[3]=m=>a.value=!a.value),class:"p-1 px-4 rounded-full bg-gray-500 text-white min-w-[150px] text-left flex justify-between items-center gap-2"},[e("span",null,x($.value),1),s[11]||(s[11]=e("span",null,"▾",-1))]),a.value?(d(),u("div",te,[e("div",{onClick:s[4]||(s[4]=m=>_("all")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 全部時間 "),e("div",{onClick:s[5]||(s[5]=m=>_("day")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 最近一天 "),e("div",{onClick:s[6]||(s[6]=m=>_("week")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 最近一周 "),e("div",{onClick:s[7]||(s[7]=m=>_("custom")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 自訂範圍 ")])):y("",!0)],512),o.value==="custom"?(d(),u("div",se,[T(e("input",{type:"date","onUpdate:modelValue":s[8]||(s[8]=m=>c.value=m),class:"p-1 border rounded-md"},null,512),[[S,c.value]]),s[12]||(s[12]=e("span",{class:"text-gray-600"},"至",-1)),T(e("input",{type:"date","onUpdate:modelValue":s[9]||(s[9]=m=>r.value=m),class:"p-1 border rounded-md"},null,512),[[S,r.value]])])):y("",!0)]))}},ae="/Pinghe/assets/lightBulb2-o5XC2Rg-.png",ne=["onClick"],re={class:"p-6 md:p-15 md:ps-55 flex flex-col justify-center w-full md:flex-1 text-sm md:text-lg"},oe={class:"text-xl md:text-2xl mb-2 md:mb-4"},ie={class:"mb-2"},ue={class:"text-md mb-2"},de={class:"text-md mb-2"},me={class:"flex items-center w-full md:w-70 gap-3"},ce={class:"relative flex-1 bg-gray-200 rounded-full h-2 overflow-hidden"},pe={class:"w-10 text-sm text-gray-700 text-left"},ve={class:"flex flex-wrap gap-2 mt-2"},ge={__name:"ActionCard",props:{filteredInfo:{type:Array,default:()=>[]}},setup(p){U();const f=n=>n<40?"bg-red-500":n<70?"bg-yellow-400":"bg-green-500",t=n=>{};return(n,o)=>(d(),u("div",B(O(n.$attrs)),[(d(!0),u(V,null,P(p.filteredInfo,a=>(d(),u("div",{class:"animate-fade-in-up cursor-pointer w-full md:max-w-7xl md:mx-auto min-h-96 md:min-h-80 bg-pblue-300 text-pblue-700 font-bold rounded-xl shadow-md overflow-hidden flex flex-col md:flex-row hover:scale-105",key:a.id,onClick:c=>t(a.id)},[o[1]||(o[1]=e("div",{class:"w-full md:w-auto flex items-end justify-center md:justify-end md:pr-10"},[e("img",{src:ae,alt:"Card Image",class:"w-[170px] md:w-[290px]"})],-1)),e("div",re,[e("h2",oe,"主題："+x(a.title),1),e("p",ie," 時間："+x(a.startTime.length?new Date(a.startTime*1e3).toLocaleDateString()+" ~ "+new Date(a.endTime*1e3).toLocaleDateString():"無"),1),e("p",ue,"成員："+x(a.group),1),e("p",de,"描述："+x(a.intro),1),e("div",me,[o[0]||(o[0]=z(" 進度： ",-1)),e("div",ce,[e("div",{class:E(["h-2 rounded-full transition-all duration-500",f(a.progress)]),style:A({width:a.progress+"%"})},null,6)]),e("span",pe,x(a.progress)+"% ",1)]),e("div",ve,[(d(!0),u(V,null,P(a.types,c=>(d(),u("span",{key:c,class:"px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800"},x(R(j)[c].title),1))),128))])])],8,ne))),128))],16))}},fe={key:0,class:"text-base md:text-[1.6rem]"},xe=["disabled"],be=["disabled"],we={__name:"PageLabel",props:{totalItems:{type:Number,required:!0},itemsPerPage:{type:Number,default:6},modelValue:{type:Number,required:!0}},emits:["update:modelValue"],setup(p,{emit:f}){const t=p,n=f,o=h(()=>t.totalItems===0?1:Math.ceil(t.totalItems/t.itemsPerPage)),a=()=>{t.modelValue<o.value&&n("update:modelValue",t.modelValue+1)},c=()=>{t.modelValue>1&&n("update:modelValue",t.modelValue-1)};return(r,l)=>o.value>=1?(d(),u("div",fe,[e("button",{onClick:c,disabled:p.modelValue===1,class:"px-4 py-2 bg-gray-300 rounded-md disabled:opacity-50"}," 上一頁 ",8,xe),e("span",null,"第 "+x(p.modelValue)+" / "+x(o.value)+" 頁",1),e("button",{onClick:a,disabled:p.modelValue===o.value,class:"px-4 py-2 bg-gray-300 rounded-md disabled:opacity-50"}," 下一頁 ",8,be)])):y("",!0)}},ye={class:"page-background content-scroller"},he={class:"relative z-5 pt-25 w-full shadow-md bg-header text-rice-500"},_e={class:"container mx-auto flex items-center p-4"},ke={class:"w-1/3"},De={class:"p-10 flex flex-col justify-center items-center gap-8 max-w-7xl md:mx-auto"},$e={key:0,class:"text-center text-gray-500 mt-8"},C=3,Ve={__name:"Actions",setup(p){const f=v(X),t=v({sdgs:[],time:"all",startDate:"",endDate:""}),n=v(1),o=r=>{t.value=r,n.value=1},a=h(()=>{let r=f.value;if(t.value.sdgs.length>0&&(r=r.filter(l=>l.types&&l.types.some(i=>t.value.sdgs.includes(i)))),t.value.time!=="all"){const l=new Date;let i,g;switch(t.value.time){case"day":g=new Date(l),i=new Date(l),i.setDate(l.getDate()-1);break;case"week":g=new Date(l),i=new Date(l),i.setDate(l.getDate()-7);break;case"custom":t.value.startDate&&t.value.endDate&&(i=new Date(t.value.startDate),i.setHours(0,0,0,0),g=new Date(t.value.endDate),g.setHours(23,59,59,999));break}i&&g&&(r=r.filter(b=>{if(!b.startTime||!b.endTime||!String(b.startTime).trim()||!String(b.endTime).trim())return!1;const D=new Date(Number(b.startTime)*1e3),$=new Date(Number(b.endTime)*1e3);return D<=g&&$>=i}))}return r}),c=h(()=>{const r=(n.value-1)*C,l=r+C;return a.value.slice(r,l)});return(r,l)=>{const i=G("router-link");return d(),u("div",ye,[e("header",he,[e("div",_e,[e("div",ke,[k(i,{to:"/",class:"back-home-btn"},{default:q(()=>[...l[1]||(l[1]=[e("span",{class:"text"},"回首頁",-1),e("span",{class:"icon"},"←",-1)])]),_:1})]),l[2]||(l[2]=e("div",{class:"w-1/3 text-center"},[e("h1",{class:"text-2xl md:text-3xl font-bold"},"行動追蹤")],-1)),l[3]||(l[3]=e("div",{class:"w-1/3"},null,-1))])]),e("main",De,[k(le,{"onUpdate:filters":o,class:"flex flex-wrap justify-center items-center gap-4"}),k(ge,{filteredInfo:c.value,class:"flex flex-col gap-5 w-full px-4 md:px-0"},null,8,["filteredInfo"]),a.value.length===0?(d(),u("div",$e,[...l[4]||(l[4]=[e("p",null,"找不到符合條件的行動。",-1)])])):y("",!0),k(we,{class:"flex justify-center items-center gap-4 mt-8",totalItems:a.value.length,itemsPerPage:C,modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=g=>n.value=g)},null,8,["totalItems","modelValue"])])])}}};export{Ve as default};
